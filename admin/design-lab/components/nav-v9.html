<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nav V9 - Enhanced Responsive Navigation</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              navy: '#010079',
              gold: '#D5AD36',
              interactive: '#1B73D3',
              cta: '#FED701'
            }
          }
        }
      }
    }
  </script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800;900&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    .orbitron { font-family: 'Orbitron', sans-serif; }

    /* 검색 슬라이드 애니메이션 */
    .search-slide-enter {
      animation: slideIn 0.3s ease-out forwards;
    }
    .search-slide-exit {
      animation: slideOut 0.3s ease-in forwards;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes slideOut {
      from {
        opacity: 1;
        transform: translateX(0);
      }
      to {
        opacity: 0;
        transform: translateX(20px);
      }
    }

    /* 펄스 애니메이션 (Live Ticker) */
    @keyframes pulse-soft {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.05); }
    }

    .pulse-price {
      animation: pulse-soft 2s ease-in-out infinite;
    }

    /* 드롭다운 hover 딜레이 */
    .dropdown-wrapper:hover .dropdown-menu {
      transition-delay: 0.2s;
    }

    /* Sticky Nav 압축 상태 */
    .nav-compressed .top-tier {
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
    }

    .nav-compressed .brand-logo {
      width: 2rem;
      height: 2rem;
    }

    .nav-compressed .brand-text {
      font-size: 1rem;
    }

    /* 모바일 메뉴 슬라이드 */
    .mobile-menu {
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
    }

    .mobile-menu.open {
      transform: translateX(0);
    }

    /* 키보드 포커스 스타일 */
    button:focus-visible,
    a:focus-visible {
      outline: 2px solid #1B73D3;
      outline-offset: 2px;
    }
  </style>
</head>
<body class="bg-gray-50">

<!-- V9: Enhanced Responsive Command Deck -->
<nav class="relative w-full z-50" id="mainNav">

  <div class="w-full bg-white shadow-[0_10px_40px_-10px_rgba(0,0,0,0.1)] border-b border-gray-100 sticky top-0 transition-all duration-300">

    <!-- Top Layer: Meta Info & Status -->
    <div class="container mx-auto px-4 sm:px-6 pt-3 pb-2 flex justify-between items-end top-tier transition-all duration-300">

      <!-- Brand Area -->
      <a href="#" class="flex items-center gap-2 sm:gap-3 group">
        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-xl flex items-center justify-center shadow-md group-hover:scale-105 transition-transform border border-slate-100 brand-logo">
          <img src="../../../favicon.svg" alt="Icon" class="h-6 w-6 sm:h-8 sm:w-8">
        </div>
        <div class="flex flex-col brand-text">
          <span class="font-[900] orbitron text-slate-800 text-lg sm:text-xl leading-none tracking-tight">
            100x <span class="text-brand-gold">FENOK</span>
          </span>
          <span class="text-[9px] sm:text-[10px] font-bold text-slate-400 tracking-[0.2em] mt-0.5">COMMAND CENTER</span>
        </div>
      </a>

      <!-- Live Ticker (데스크탑만 표시) -->
      <div class="hidden lg:flex items-center gap-4 xl:gap-6 bg-slate-50 px-4 xl:px-6 py-2 rounded-full border border-slate-100">
        <div class="flex flex-col items-center leading-none ticker-item" data-symbol="SPX">
          <span class="text-[9px] font-bold text-slate-400 mb-0.5">S&P 500</span>
          <span class="text-xs font-[800] text-green-600 orbitron ticker-price pulse-price">4,783.45</span>
        </div>
        <div class="w-[1px] h-4 bg-slate-200"></div>
        <div class="flex flex-col items-center leading-none ticker-item" data-symbol="NDX">
          <span class="text-[9px] font-bold text-slate-400 mb-0.5">NASDAQ</span>
          <span class="text-xs font-[800] text-red-500 orbitron ticker-price pulse-price">16,832.11</span>
        </div>
        <div class="w-[1px] h-4 bg-slate-200"></div>
        <div class="flex flex-col items-center leading-none ticker-item" data-symbol="VIX">
          <span class="text-[9px] font-bold text-slate-400 mb-0.5">VIX</span>
          <span class="text-xs font-[800] text-slate-700 orbitron ticker-price pulse-price">12.45</span>
        </div>
      </div>

      <!-- User/Tools -->
      <div class="flex items-center gap-2 sm:gap-3">

        <!-- 검색 버튼 -->
        <button
          id="searchToggle"
          class="w-8 h-8 sm:w-9 sm:h-9 rounded-lg bg-slate-50 text-slate-500 hover:bg-brand-navy hover:text-white transition-all border border-slate-100 shadow-sm flex items-center justify-center"
          aria-label="검색 열기"
          aria-expanded="false">
          <i class="fas fa-search text-xs sm:text-sm"></i>
        </button>

        <!-- 그리드 버튼 (알림 배지 포함) -->
        <button
          class="relative w-8 h-8 sm:w-9 sm:h-9 rounded-lg bg-slate-50 text-slate-500 hover:bg-brand-navy hover:text-white transition-all border border-slate-100 shadow-sm flex items-center justify-center"
          aria-label="앱 그리드">
          <i class="fas fa-th text-xs sm:text-sm"></i>
          <!-- 알림 배지 -->
          <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"></span>
        </button>

        <!-- 햄버거 버튼 (태블릿 이하에서만 표시) -->
        <button
          id="mobileMenuToggle"
          class="lg:hidden w-8 h-8 sm:w-9 sm:h-9 rounded-lg bg-slate-50 text-slate-500 hover:bg-brand-navy hover:text-white transition-all border border-slate-100 shadow-sm flex items-center justify-center"
          aria-label="메뉴 열기"
          aria-expanded="false">
          <i class="fas fa-bars text-xs sm:text-sm"></i>
        </button>

      </div>
    </div>

    <!-- 검색 슬라이드 UI (숨김 상태) -->
    <div
      id="searchSlide"
      class="hidden container mx-auto px-4 sm:px-6 pb-3"
      role="search">
      <div class="flex items-center gap-2 bg-slate-50 rounded-lg px-4 py-2 border border-slate-200">
        <i class="fas fa-search text-slate-400 text-sm"></i>
        <input
          type="text"
          id="searchInput"
          placeholder="검색어를 입력하세요..."
          class="flex-1 bg-transparent outline-none text-sm text-slate-700 placeholder-slate-400"
          aria-label="검색 입력">
        <button
          id="searchClose"
          class="text-slate-400 hover:text-slate-600 transition-colors"
          aria-label="검색 닫기">
          <i class="fas fa-times text-sm"></i>
        </button>
      </div>
    </div>

    <!-- Bottom Layer: Navigation Pills (데스크탑) -->
    <div class="hidden lg:block w-full border-t border-gray-100 bg-white/50 backdrop-blur-sm">
      <div class="container mx-auto px-6 h-12 flex items-center gap-2">

        <!-- DASHBOARD (현재 페이지 예시) -->
        <a
          href="#dashboard"
          class="nav-link h-full flex items-center px-4 text-xs font-[800] text-brand-navy border-b-2 border-brand-navy bg-blue-50/50 orbitron tracking-wide"
          data-page="dashboard"
          aria-current="page">
          DASHBOARD
        </a>

        <div class="h-4 w-[1px] bg-gray-200 mx-2"></div>

        <div class="flex items-center gap-1 h-full">

          <!-- MARKET 드롭다운 (200ms 딜레이) -->
          <div class="relative dropdown-wrapper h-full flex items-center group">
            <button
              class="px-4 py-1.5 rounded-md text-xs font-bold text-slate-500 hover:text-slate-900 hover:bg-slate-100 transition-all flex items-center gap-1 group-hover:bg-white group-hover:shadow-sm"
              aria-haspopup="true"
              aria-expanded="false">
              MARKET
              <i class="fas fa-chevron-down text-[8px] opacity-30 group-hover:text-brand-gold transition-colors"></i>
            </button>

            <!-- 드롭다운 메뉴 -->
            <div class="dropdown-menu absolute top-[80%] left-0 bg-white border border-gray-200 shadow-xl rounded-xl p-2 min-w-[220px] opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all transform group-hover:translate-y-1 z-50">
              <div class="px-3 py-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider border-b border-gray-100 mb-1">Briefing</div>
              <a href="#market-wrap" class="flex items-center px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-lg group/link transition-colors">
                <span class="w-1 h-4 bg-brand-gold rounded-full mr-3 opacity-0 group-hover/link:opacity-100 transition-opacity"></span>
                <div>
                  <span class="block font-bold text-slate-700">Market Wrap</span>
                  <span class="text-[10px] text-slate-400">Daily Updates</span>
                </div>
              </a>
              <a href="#alpha-scout" class="flex items-center px-3 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-lg group/link transition-colors">
                <span class="w-1 h-4 bg-brand-interactive rounded-full mr-3 opacity-0 group-hover/link:opacity-100 transition-opacity"></span>
                <div>
                  <span class="block font-bold text-slate-700">Alpha Scout</span>
                  <span class="text-[10px] text-slate-400">Weekly Deep Dive</span>
                </div>
              </a>
            </div>
          </div>

          <!-- ANALYTICS 드롭다운 (그리드 스타일) -->
          <div class="relative dropdown-wrapper h-full flex items-center group">
            <button
              class="px-4 py-1.5 rounded-md text-xs font-bold text-slate-500 hover:text-slate-900 hover:bg-slate-100 transition-all flex items-center gap-1 group-hover:bg-white group-hover:shadow-sm"
              aria-haspopup="true"
              aria-expanded="false">
              ANALYTICS
              <i class="fas fa-chevron-down text-[8px] opacity-30 group-hover:text-brand-gold transition-colors"></i>
            </button>

            <div class="dropdown-menu absolute top-[80%] left-0 bg-white border border-gray-200 shadow-xl rounded-xl p-4 min-w-[320px] opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all transform group-hover:translate-y-1 z-50">
              <div class="px-1 pb-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider border-b border-gray-100 mb-2">Tools & Charts</div>
              <div class="grid grid-cols-2 gap-2">
                <a href="#multichart" class="flex flex-col items-center p-3 rounded-lg hover:bg-blue-50 border border-transparent hover:border-blue-100 transition-all text-center group/card">
                  <i class="fas fa-chart-line text-xl text-brand-interactive mb-2 group-hover/card:scale-110 transition-transform"></i>
                  <span class="text-xs font-bold text-slate-700">Multichart</span>
                </a>
                <a href="#radar" class="flex flex-col items-center p-3 rounded-lg hover:bg-blue-50 border border-transparent hover:border-blue-100 transition-all text-center group/card">
                  <i class="fas fa-radar text-xl text-brand-navy mb-2 group-hover/card:scale-110 transition-transform"></i>
                  <span class="text-xs font-bold text-slate-700">Radar</span>
                </a>
              </div>
            </div>
          </div>

          <!-- STRATEGIES 드롭다운 -->
          <div class="relative dropdown-wrapper h-full flex items-center group">
            <button
              class="px-4 py-1.5 rounded-md text-xs font-bold text-slate-500 hover:text-slate-900 hover:bg-slate-100 transition-all flex items-center gap-1 group-hover:bg-white group-hover:shadow-sm"
              aria-haspopup="true"
              aria-expanded="false">
              STRATEGIES
              <i class="fas fa-chevron-down text-[8px] opacity-30 group-hover:text-brand-gold transition-colors"></i>
            </button>

            <div class="dropdown-menu absolute top-[80%] right-0 bg-white border border-gray-200 shadow-xl rounded-xl p-3 min-w-[280px] opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all transform group-hover:translate-y-1 z-50">
              <div class="px-2 pb-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider border-b border-gray-100 mb-2">Proven Methods</div>
              <a href="#infinite-buying" class="flex items-start p-2 rounded-lg hover:bg-slate-50 transition-colors mb-1 group/strat">
                <div class="w-8 h-8 rounded bg-green-100 flex items-center justify-center text-green-600 mr-3 mt-0.5 group-hover/strat:bg-green-200 transition-colors">
                  <i class="fas fa-infinity text-xs"></i>
                </div>
                <div>
                  <span class="block text-sm font-bold text-slate-700 group-hover/strat:text-brand-navy">Infinite Buying</span>
                  <span class="block text-[10px] text-slate-500 leading-tight mt-0.5">DCA strategy for volatile markets</span>
                </div>
              </a>
              <a href="#value-rebalancing" class="flex items-start p-2 rounded-lg hover:bg-slate-50 transition-colors group/strat">
                <div class="w-8 h-8 rounded bg-brand-gold/20 flex items-center justify-center text-brand-gold mr-3 mt-0.5 group-hover/strat:bg-brand-gold/30 transition-colors">
                  <i class="fas fa-balance-scale text-xs"></i>
                </div>
                <div>
                  <span class="block text-sm font-bold text-slate-700 group-hover/strat:text-brand-navy">Value Rebalancing</span>
                  <span class="block text-[10px] text-slate-500 leading-tight mt-0.5">Asset allocation optimization</span>
                </div>
              </a>
            </div>
          </div>

        </div>

      </div>
    </div>

    <!-- 모바일/태블릿 메뉴 (사이드 슬라이드) -->
    <div
      id="mobileMenu"
      class="lg:hidden fixed inset-y-0 right-0 w-80 max-w-[85vw] bg-white shadow-2xl mobile-menu z-50">

      <!-- 모바일 메뉴 헤더 -->
      <div class="flex items-center justify-between p-4 border-b border-gray-200">
        <span class="font-bold orbitron text-slate-800">MENU</span>
        <button
          id="mobileMenuClose"
          class="w-8 h-8 rounded-lg hover:bg-slate-100 transition-colors flex items-center justify-center"
          aria-label="메뉴 닫기">
          <i class="fas fa-times text-slate-600"></i>
        </button>
      </div>

      <!-- 모바일 메뉴 내용 -->
      <div class="p-4 space-y-2 overflow-y-auto h-[calc(100vh-5rem)]">

        <!-- DASHBOARD -->
        <a href="#dashboard" class="block px-4 py-3 rounded-lg bg-blue-50 border-l-4 border-brand-navy font-bold text-sm text-brand-navy">
          <i class="fas fa-home mr-2"></i> DASHBOARD
        </a>

        <!-- MARKET -->
        <details class="group">
          <summary class="px-4 py-3 rounded-lg hover:bg-slate-50 cursor-pointer font-bold text-sm text-slate-700 list-none flex items-center justify-between">
            <span><i class="fas fa-chart-bar mr-2"></i> MARKET</span>
            <i class="fas fa-chevron-down text-xs text-slate-400 group-open:rotate-180 transition-transform"></i>
          </summary>
          <div class="ml-4 mt-1 space-y-1">
            <a href="#market-wrap" class="block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-lg">Market Wrap</a>
            <a href="#alpha-scout" class="block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-lg">Alpha Scout</a>
          </div>
        </details>

        <!-- ANALYTICS -->
        <details class="group">
          <summary class="px-4 py-3 rounded-lg hover:bg-slate-50 cursor-pointer font-bold text-sm text-slate-700 list-none flex items-center justify-between">
            <span><i class="fas fa-chart-line mr-2"></i> ANALYTICS</span>
            <i class="fas fa-chevron-down text-xs text-slate-400 group-open:rotate-180 transition-transform"></i>
          </summary>
          <div class="ml-4 mt-1 space-y-1">
            <a href="#multichart" class="block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-lg">Multichart</a>
            <a href="#radar" class="block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-lg">Radar</a>
          </div>
        </details>

        <!-- STRATEGIES -->
        <details class="group">
          <summary class="px-4 py-3 rounded-lg hover:bg-slate-50 cursor-pointer font-bold text-sm text-slate-700 list-none flex items-center justify-between">
            <span><i class="fas fa-lightbulb mr-2"></i> STRATEGIES</span>
            <i class="fas fa-chevron-down text-xs text-slate-400 group-open:rotate-180 transition-transform"></i>
          </summary>
          <div class="ml-4 mt-1 space-y-1">
            <a href="#infinite-buying" class="block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-lg">Infinite Buying</a>
            <a href="#value-rebalancing" class="block px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 rounded-lg">Value Rebalancing</a>
          </div>
        </details>

        <!-- 모바일 Live Ticker -->
        <div class="mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200">
          <div class="text-[10px] font-bold text-slate-400 mb-3 uppercase tracking-wider">Live Market</div>
          <div class="space-y-2">
            <div class="flex justify-between items-center">
              <span class="text-xs text-slate-600">S&P 500</span>
              <span class="text-sm font-bold orbitron text-green-600">4,783.45</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-xs text-slate-600">NASDAQ</span>
              <span class="text-sm font-bold orbitron text-red-500">16,832.11</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-xs text-slate-600">VIX</span>
              <span class="text-sm font-bold orbitron text-slate-700">12.45</span>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- 모바일 메뉴 오버레이 -->
    <div
      id="mobileMenuOverlay"
      class="lg:hidden hidden fixed inset-0 bg-black/50 z-40"
      aria-hidden="true"></div>

  </div>
</nav>

<!-- 데모용 콘텐츠 (스크롤 테스트) -->
<div class="container mx-auto px-4 sm:px-6 py-12">
  <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
    <h1 class="text-3xl font-bold orbitron text-slate-800 mb-4">Navigation V9 Demo</h1>
    <p class="text-slate-600 mb-4">아래로 스크롤하여 Sticky Nav 압축 효과를 확인하세요.</p>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-8">
      <div class="bg-blue-50 p-6 rounded-lg">
        <h3 class="font-bold text-brand-navy mb-2">반응형 디자인</h3>
        <p class="text-sm text-slate-600">모바일, 태블릿, 데스크탑 모두 최적화</p>
      </div>
      <div class="bg-green-50 p-6 rounded-lg">
        <h3 class="font-bold text-green-700 mb-2">키보드 접근성</h3>
        <p class="text-sm text-slate-600">Tab, Enter, Escape 키 지원</p>
      </div>
      <div class="bg-purple-50 p-6 rounded-lg">
        <h3 class="font-bold text-purple-700 mb-2">검색 슬라이드</h3>
        <p class="text-sm text-slate-600">상단 검색 버튼 클릭으로 활성화</p>
      </div>
      <div class="bg-yellow-50 p-6 rounded-lg">
        <h3 class="font-bold text-yellow-700 mb-2">Live Ticker</h3>
        <p class="text-sm text-slate-600">실시간 시장 데이터 준비 완료</p>
      </div>
    </div>
  </div>

  <!-- 스크롤 테스트용 더미 콘텐츠 -->
  <div class="space-y-4">
    <div class="bg-white rounded-lg shadow p-6 h-64"></div>
    <div class="bg-white rounded-lg shadow p-6 h-64"></div>
    <div class="bg-white rounded-lg shadow p-6 h-64"></div>
  </div>
</div>

<script>
/**
 * Navigation V9 JavaScript
 * - 검색 슬라이드 토글
 * - 모바일 메뉴 토글
 * - Sticky Nav 압축
 * - 현재 페이지 하이라이트
 * - 키보드 접근성
 * - Live Ticker API 연동 구조
 */

(function() {
  'use strict';

  // ========================================
  // 1. 검색 슬라이드 토글
  // ========================================
  const searchToggle = document.getElementById('searchToggle');
  const searchSlide = document.getElementById('searchSlide');
  const searchClose = document.getElementById('searchClose');
  const searchInput = document.getElementById('searchInput');

  function openSearch() {
    searchSlide.classList.remove('hidden');
    searchSlide.classList.add('search-slide-enter');
    searchToggle.setAttribute('aria-expanded', 'true');
    // 포커스를 검색 입력창으로 이동
    setTimeout(() => searchInput.focus(), 100);
  }

  function closeSearch() {
    searchSlide.classList.remove('search-slide-enter');
    searchSlide.classList.add('search-slide-exit');
    searchToggle.setAttribute('aria-expanded', 'false');
    setTimeout(() => {
      searchSlide.classList.add('hidden');
      searchSlide.classList.remove('search-slide-exit');
      searchInput.value = '';
    }, 300);
  }

  searchToggle.addEventListener('click', openSearch);
  searchClose.addEventListener('click', closeSearch);

  // Escape 키로 검색 닫기
  searchInput.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeSearch();
    }
  });

  // ========================================
  // 2. 모바일 메뉴 토글
  // ========================================
  const mobileMenuToggle = document.getElementById('mobileMenuToggle');
  const mobileMenuClose = document.getElementById('mobileMenuClose');
  const mobileMenu = document.getElementById('mobileMenu');
  const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');

  function openMobileMenu() {
    mobileMenu.classList.add('open');
    mobileMenuOverlay.classList.remove('hidden');
    mobileMenuToggle.setAttribute('aria-expanded', 'true');
    // body 스크롤 방지
    document.body.style.overflow = 'hidden';
  }

  function closeMobileMenu() {
    mobileMenu.classList.remove('open');
    mobileMenuOverlay.classList.add('hidden');
    mobileMenuToggle.setAttribute('aria-expanded', 'false');
    document.body.style.overflow = '';
  }

  if (mobileMenuToggle) {
    mobileMenuToggle.addEventListener('click', openMobileMenu);
  }

  if (mobileMenuClose) {
    mobileMenuClose.addEventListener('click', closeMobileMenu);
  }

  if (mobileMenuOverlay) {
    mobileMenuOverlay.addEventListener('click', closeMobileMenu);
  }

  // Escape 키로 모바일 메뉴 닫기
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {
      closeMobileMenu();
    }
  });

  // ========================================
  // 3. Sticky Nav 압축 (스크롤)
  // ========================================
  const mainNav = document.getElementById('mainNav');
  let lastScrollY = window.scrollY;

  function handleScroll() {
    const currentScrollY = window.scrollY;

    if (currentScrollY > 100) {
      mainNav.classList.add('nav-compressed');
    } else {
      mainNav.classList.remove('nav-compressed');
    }

    lastScrollY = currentScrollY;
  }

  window.addEventListener('scroll', handleScroll, { passive: true });

  // ========================================
  // 4. 현재 페이지 하이라이트
  // ========================================
  function highlightCurrentPage() {
    const currentHash = window.location.hash || '#dashboard';
    const navLinks = document.querySelectorAll('.nav-link');

    navLinks.forEach(link => {
      link.classList.remove('text-brand-navy', 'border-brand-navy', 'bg-blue-50/50', 'border-b-2');
      link.classList.add('text-slate-500', 'hover:text-slate-900', 'hover:bg-slate-100');
      link.removeAttribute('aria-current');

      if (link.getAttribute('href') === currentHash) {
        link.classList.remove('text-slate-500', 'hover:text-slate-900', 'hover:bg-slate-100');
        link.classList.add('text-brand-navy', 'border-brand-navy', 'bg-blue-50/50', 'border-b-2');
        link.setAttribute('aria-current', 'page');
      }
    });
  }

  // 페이지 로드 시 및 해시 변경 시 하이라이트
  window.addEventListener('load', highlightCurrentPage);
  window.addEventListener('hashchange', highlightCurrentPage);

  // ========================================
  // 5. 키보드 접근성 (드롭다운)
  // ========================================
  const dropdownWrappers = document.querySelectorAll('.dropdown-wrapper');

  dropdownWrappers.forEach(wrapper => {
    const button = wrapper.querySelector('button');
    const menu = wrapper.querySelector('.dropdown-menu');

    // Enter 키로 드롭다운 열기
    button.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        wrapper.classList.toggle('group-hover');
        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        button.setAttribute('aria-expanded', !isExpanded);
      }
    });

    // Escape 키로 드롭다운 닫기
    wrapper.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        wrapper.classList.remove('group-hover');
        button.setAttribute('aria-expanded', 'false');
        button.focus();
      }
    });
  });

  // ========================================
  // 6. Live Ticker API 연동 구조 (준비)
  // ========================================

  /**
   * fetchTickerData - 실시간 시장 데이터를 가져오는 함수
   * @description API 엔드포인트에서 데이터를 가져와 Live Ticker 업데이트
   * @example
   * // API 사용 예시:
   * // fetchTickerData('https://api.example.com/market/tickers')
   */
  async function fetchTickerData(apiUrl) {
    try {
      const response = await fetch(apiUrl);

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();

      // 데이터 형식 예상:
      // {
      //   "SPX": { "price": 4783.45, "change": 1.2 },
      //   "NDX": { "price": 16832.11, "change": -0.5 },
      //   "VIX": { "price": 12.45, "change": 0.3 }
      // }

      updateTickerUI(data);

    } catch (error) {
      console.error('Ticker data fetch failed:', error);
    }
  }

  /**
   * updateTickerUI - Live Ticker UI 업데이트
   * @param {Object} data - API에서 받은 시장 데이터
   */
  function updateTickerUI(data) {
    const tickerItems = document.querySelectorAll('.ticker-item');

    tickerItems.forEach(item => {
      const symbol = item.getAttribute('data-symbol');
      const priceElement = item.querySelector('.ticker-price');

      if (data[symbol]) {
        const { price, change } = data[symbol];

        // 가격 업데이트
        priceElement.textContent = price.toFixed(2);

        // 색상 변경 (양수/음수)
        priceElement.classList.remove('text-green-600', 'text-red-500', 'text-slate-700');
        if (change > 0) {
          priceElement.classList.add('text-green-600');
        } else if (change < 0) {
          priceElement.classList.add('text-red-500');
        } else {
          priceElement.classList.add('text-slate-700');
        }

        // 펄스 애니메이션 트리거 (변경 시)
        priceElement.style.animation = 'none';
        setTimeout(() => {
          priceElement.style.animation = '';
        }, 10);
      }
    });
  }

  /**
   * startTickerPolling - 주기적 데이터 폴링 시작
   * @param {string} apiUrl - API 엔드포인트 URL
   * @param {number} interval - 폴링 간격 (밀리초)
   */
  function startTickerPolling(apiUrl, interval = 30000) {
    // 초기 데이터 로드
    fetchTickerData(apiUrl);

    // 주기적 업데이트 (기본 30초)
    setInterval(() => {
      fetchTickerData(apiUrl);
    }, interval);
  }

  // ========================================
  // API 연동 활성화 (실제 사용 시 주석 해제)
  // ========================================

  // startTickerPolling('https://api.example.com/market/tickers', 30000);

  // 또는 WebSocket 연동:
  // const ws = new WebSocket('wss://api.example.com/market/stream');
  // ws.onmessage = (event) => {
  //   const data = JSON.parse(event.data);
  //   updateTickerUI(data);
  // };

})();
</script>

</body>
</html>
