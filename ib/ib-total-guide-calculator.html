<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬´í•œë§¤ìˆ˜ë²• ì™„ì „ì •ë³µ ì¸í¬ê·¸ë˜í”½ (API ì—°ë™ ìµœì¢…ë³¸)</title>
    <meta name="description" content="ë¬´í•œë§¤ìˆ˜ë²• ì „ëµì„ ì‹œê°í™”í•œ ì¸í¬ê·¸ë˜í”½ê³¼ ê³„ì‚°ê¸°.">
    <link rel="canonical" href="https://el-fenomeno-kim-dashboard.on.drv.tw/ib/ib-total-guide-calculator.html">
    <meta property="og:title" content="ë¬´í•œë§¤ìˆ˜ë²• ì™„ì „ì •ë³µ ì¸í¬ê·¸ë˜í”½ (API ì—°ë™ ìµœì¢…ë³¸)">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://el-fenomeno-kim-dashboard.on.drv.tw/favicon-96x96.png">
    <meta name="theme-color" content="#0ea5e9">
    <script defer src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- 
    Narrative Plan (v9 - Final):
    1. Introduction: Core philosophy.
    2. The Evolution: Timeline of methodologies.
    3. Interactive Deep Dive: TQQQ vs SOXL strategy details.
    4. Crisis Management: Quarter Stop-loss flowchart.
    5. NEW - Real-time Price API (Fixed): The previous CORS proxy is replaced with a more reliable one (allorigins.win) to fix the network errors.
    6. The Bigger Picture: Synergy with 'ë°¸ë¥˜ ë¦¬ë°¸ëŸ°ì‹±(VR)'.
    7. Manual Order Generator: The core utility, uses data from the fixed API call.

    Visualization Choices & Justification (NO SVG, NO MERMAID JS):
    - Real-time Price Display: Goal=Inform -> JavaScript fetch & HTML. Justification: Switched to a more stable CORS proxy as suggested to resolve the persistent network errors.
    - All other visualizations remain as specified in previous versions.
    -->
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f0f4f8; scroll-behavior: smooth; }
        .card { background-color: white; border-radius: 0.75rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); padding: 1.5rem; margin-bottom: 2rem; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 300px; max-height: 40vh; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .highlight { color: #ffa600; }
        .pill { display: inline-block; background-color: #e0e7ff; color: #4338ca; padding: 0.25rem 0.75rem; border-radius: 9999px; font-weight: 700; font-size: 0.875rem; }
        .flow-box { border: 2px solid #d1d5db; padding: 1rem; border-radius: 0.5rem; text-align: center; background-color: #f9fafb; flex-grow: 1; }
        .flow-arrow { display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: bold; margin: 0.5rem 0; color: #665191; transform: rotate(90deg); }
        @media (min-width: 768px) { .flow-arrow { transform: rotate(0deg); } }
        .tab { padding: 0.75rem 1.5rem; cursor: pointer; font-weight: 700; border-bottom: 4px solid transparent; transition: all 0.2s; }
        .tab.active { color: #665191; border-color: #665191; }
        .calculator-input { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem; }
        .calculator-output { background-color: #f3f4f6; padding: 1.5rem; border-radius: 0.5rem; margin-top: 1rem; }
        .output-table { width: 100%; margin-top: 1rem; }
        .output-table th, .output-table td { padding: 0.5rem; text-align: left; border-bottom: 1px solid #e5e7eb; }
        .output-table th { background-color: #e5e7eb; font-weight: bold; }
    </style>
</head>
<body class="text-003f5c">
    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <div id="nav"></div>

        <header class="text-center mb-16">

            <h1 class="text-4xl md:text-6xl font-black text-[#003f5c] mb-4">ë¬´í•œë§¤ìˆ˜ë²• ì™„ì „ì •ë³µ</h1>
            <p class="text-lg md:text-xl text-[#2f4b7c]">ê·œì¹™ê³¼ ì‹œìŠ¤í…œìœ¼ë¡œ 3ë°° ë ˆë²„ë¦¬ì§€ ETFì˜ ë³€ë™ì„±ì„ ì§€ë°°í•˜ëŠ” íˆ¬ì ì „ëµ</p>
        </header>

        <main>
            <section id="intro" class="card">
                <h2 class="text-3xl font-bold mb-4">1. ë¬´í•œë§¤ìˆ˜ë²•ì˜ í•µì‹¬ ì² í•™</h2>
                <p class="mb-6 text-base md:text-lg">
                    'ë¬´í•œë§¤ìˆ˜ë²•'ì€ ë‹¨ê¸°ì ì¸ ì£¼ê°€ ì˜ˆì¸¡ì„ í¬ê¸°í•˜ê³ , ì‚¬ì „ì— ì •ì˜ëœ <span class="font-bold highlight">ìˆ˜í•™ì  ê·œì¹™</span>ì— ë”°ë¼ ê¸°ê³„ì²˜ëŸ¼ ë¶„í• ë§¤ìˆ˜ì™€ ë¶„í• ë§¤ë„ë¥¼ ë°˜ë³µí•˜ëŠ” ì „ëµì…ë‹ˆë‹¤. ì´ ë°©ë²•ë¡ ì˜ ì‹¬ì¥ì—ëŠ” ì¸ê°„ì˜ ê°ì •(ê³µí¬ì™€ íƒìš•)ì„ ë°°ì œí•˜ê³ , ì‹œì¥ì˜ ë³€ë™ì„± ìì²´ë¥¼ ìˆ˜ìµì˜ ì›ì²œìœ¼ë¡œ í™œìš©í•˜ë ¤ëŠ” ì² í•™ì´ ìˆìŠµë‹ˆë‹¤.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-center">
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <span class="text-5xl">ğŸ¤–</span>
                        <h3 class="text-xl font-bold mt-2">ë‚˜ëŠ” ê¸°ê³„ë‹¤</h3>
                        <p class="text-gray-600">ì–´ë–¤ ìƒí™©ì—ì„œë„ ì›ì¹™ì„ ìµœìš°ì„ ìœ¼ë¡œ. ê°ì •ì  íŒë‹¨ì€ ê°€ì¥ í° ì ì…ë‹ˆë‹¤.</p>
                    </div>
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <span class="text-5xl">ğŸº</span>
                        <h3 class="text-xl font-bold mt-2">ìì‹ ì˜ 'ê·¸ë¦‡' ì•Œê¸°</h3>
                        <p class="text-gray-600">3ë°° ë ˆë²„ë¦¬ì§€ì˜ ë³€ë™ì„±ì„ ê°ë‹¹í•  ìˆ˜ ìˆëŠ” ë§Œí¼ë§Œ íˆ¬ìí•˜ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </section>

            <section id="evolution" class="card">
                <h2 class="text-3xl font-bold mb-6 text-center">2. ì „ëµì˜ ì§„í™”: ëŠì„ì—†ëŠ” ìµœì í™”</h2>
                <p class="text-center text-lg mb-8 max-w-3xl mx-auto">ë¬´í•œë§¤ìˆ˜ë²•ì€ ì‹œì¥ ìƒí™©ì— ëŒ€ì‘í•˜ë©° V1ë¶€í„° ìµœì‹  ë²„ì „ê¹Œì§€ ëŠì„ì—†ì´ ë°œì „í•´ì™”ìŠµë‹ˆë‹¤. ê° ë²„ì „ì€ ë¦¬ìŠ¤í¬ ê´€ë¦¬ì™€ ìˆ˜ìµë¥  ê·¹ëŒ€í™” ì‚¬ì´ì˜ ê· í˜•ì„ ì°¾ì•„ê°€ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.</p>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="p-4 font-bold">ë²„ì „</th>
                                <th class="p-4 font-bold">í•µì‹¬ íŠ¹ì§•</th>
                                <th class="p-4 font-bold">ì£¼ìš” ë³€í™”</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="p-4 font-bold text-[#003f5c]">V2.2 (2023 ì˜¤í”¼ì…œ)</td>
                                <td class="p-4">ì „í›„ë°˜ì „ ê°œë…ì„ 'Tê°’'ì— ë”°ë¼ ë¶€ë“œëŸ½ê²Œ ì—°ê²°, ì•ˆì •ì„± ê°•í™”</td>
                                <td class="p-4">í”„ë¡œì„¸ìŠ¤ ê°„ê²°í™”, í•˜ë½ì¥ ë°©ì–´ë ¥ ì¦ì§„, ì ì§„ì  ì†ì ˆ ê°œë… ë„ì…</td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-4 font-bold text-[#665191]">V3.0</td>
                                <td class="p-4">20ë¶„í•  ê¸°ë°˜, ìˆ˜ìµì˜ ì¼ë¶€ë¥¼ 1íšŒ ë§¤ìˆ˜ê¸ˆì— ì¦‰ì‹œ ë°˜ì˜ (ë°˜ë³µë¦¬)</td>
                                <td class="p-4">ë” ê³µê²©ì ì¸ íˆ¬ì, ìˆ˜ìµë¥  ê·¹ëŒ€í™” ì¶”êµ¬</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-bold text-[#ff7c43]">IBS (ë¬´í•œë§¤ìˆ˜ë§¤ë„ë²•)</td>
                                <td class="p-4">10ë¶„í•  ê¸°ë°˜, ë§¤ë„ë¥¼ ë§¤ìš° ìì£¼í•˜ì—¬ í˜„ê¸ˆ íë¦„ ì°½ì¶œì— ì§‘ì¤‘</td>
                                <td class="p-4">'ì¿¼í„°ë§¤ë„' ëŒ€ì‹  '1íšŒì¹˜ ë§¤ë„' ê°œë… ë„ì…, ì¤‘ê¸°ì  ê´€ì  í•„ìš”</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <section id="deep-dive" class="card">
                <h2 class="text-3xl font-bold mb-2 text-center">3. ì¢…ëª©ë³„ ìƒì„¸ ì „ëµ (V2.2 ê¸°ì¤€)</h2>
                <p class="text-center text-lg mb-8 max-w-3xl mx-auto">V2.2 ë°©ë²•ë¡ ì—ì„œ TQQQì™€ SOXLì€ ë§¤ë§¤ êµ¬ì¡°ëŠ” ë™ì¼í•˜ì§€ë§Œ, ë³€ë™ì„±ì„ ê°ì•ˆí•˜ì—¬ â˜†%(ë³„ í¼ì„¼íŠ¸) ê³µì‹ê³¼ ëª©í‘œ ìˆ˜ìµë¥ ì— ì°¨ì´ë¥¼ ë‘¡ë‹ˆë‹¤.</p>
                
                <div class="flex justify-center border-b mb-6">
                    <button id="tab-tqqq" class="tab active">TQQQ</button>
                    <button id="tab-soxl" class="tab">SOXL</button>
                </div>

                <div id="content-tqqq">
                     <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                        <div>
                            <h3 class="text-2xl font-bold mb-3">TQQQ ì „ëµ: ì•ˆì •ì„±ì— ì§‘ì¤‘</h3>
                            <div class="bg-indigo-50 p-4 rounded-lg text-center mb-4">
                                <p class="text-lg font-bold">ê¸°ë³¸ ì„¤ì •: <span class="text-2xl highlight">40ë¶„í• </span> / ëª©í‘œìˆ˜ìµ <span class="text-2xl highlight">+10%</span></p>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-lg mb-4">
                                <p class="text-lg font-bold text-center">â˜†% = 10 - ( T / 2 )</p>
                            </div>
                        </div>
                        <div>
                            <div class="chart-container">
                                <canvas id="tqqqChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="content-soxl" class="hidden">
                     <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                        <div>
                            <h3 class="text-2xl font-bold mb-3">SOXL ì „ëµ: ë³€ë™ì„± ëŒ€ì‘</h3>
                             <div class="bg-indigo-50 p-4 rounded-lg text-center mb-4">
                                <p class="text-lg font-bold">ê¸°ë³¸ ì„¤ì •: <span class="text-2xl highlight">40ë¶„í• </span> / ëª©í‘œìˆ˜ìµ <span class="text-2xl highlight">+12%</span></p>
                            </div>
                            <div class="bg-orange-50 p-4 rounded-lg mb-4">
                                <p class="text-lg font-bold text-center">â˜†% = 12 - ( T * 0.6 )</p>
                            </div>
                        </div>
                        <div>
                            <div class="chart-container">
                                <canvas id="soxlChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="crisis" class="card">
                <h2 class="text-3xl font-bold mb-2 text-center">4. ìœ„ê¸°ê´€ë¦¬: ì¿¼í„° ì†ì ˆ (V2.2 ê¸°ì¤€)</h2>
                <p class="text-center text-lg mb-8 max-w-3xl mx-auto">ëª¨ë“  ë¶„í• ë§¤ìˆ˜(40íšŒ)ê°€ ëë‚¬ìŒì—ë„ ëª©í‘œ ìˆ˜ìµì— ë„ë‹¬í•˜ì§€ ëª»í–ˆì„ ë•Œ, ì†ì‹¤ì„ ì œí•œí•˜ê³  ì¬ê¸°íšŒë¥¼ ë§Œë“œëŠ” ì²´ê³„ì ì¸ ë¹„ìƒ íƒˆì¶œ ê³„íšì…ë‹ˆë‹¤.</p>
                <div class="flex flex-col md:flex-row items-stretch justify-center gap-4 md:gap-2">
                    <div class="flow-box">
                        <p class="pill mb-3">STEP 1</p>
                        <h3 class="text-xl font-bold mb-2">1/4 MOC ë§¤ë„</h3>
                        <p>ë³´ìœ  ìˆ˜ëŸ‰ì˜ <span class="highlight font-bold">1/4</span>ì„ ì¢…ê°€(MOC)ë¡œ <span class="font-bold">ë¬´ì¡°ê±´ ë§¤ë„</span>í•˜ì—¬ í˜„ê¸ˆì„ í™•ë³´í•˜ê³  ì†ì‹¤ì„ í™•ì •í•©ë‹ˆë‹¤.</p>
                    </div>
                    <div class="flow-arrow">â¡ï¸</div>
                    <div class="flow-box">
                        <p class="pill mb-3">STEP 2</p>
                        <h3 class="text-xl font-bold mb-2">ìê¸ˆ ì¬ê³„ì‚°</h3>
                        <p>í™•ë³´ëœ í˜„ê¸ˆê³¼ ê¸°ì¡´ ìˆ˜ìµê¸ˆì„ í•©ì‚°í•˜ì—¬, <span class="highlight font-bold">10íšŒ ë¶„í•  ë§¤ìˆ˜ê¸ˆ</span>ì„ ìƒˆë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
                    </div>
                    <div class="flow-arrow">â¡ï¸</div>
                    <div class="flow-box">
                        <p class="pill mb-3">STEP 3</p>
                        <h3 class="text-xl font-bold mb-2">ì¶”ê°€ ë§¤ìˆ˜ ì‹œì‘</h3>
                        <p><span class="highlight font-bold">-10%(TQQQ) ë˜ëŠ” -12%(SOXL)</span> LOC ë§¤ìˆ˜ë¥¼ 10íšŒì— ê±¸ì³ ì§„í–‰í•˜ë©° í‰ë‹¨ì„ ì ê·¹ì ìœ¼ë¡œ ë‚®ì¶¥ë‹ˆë‹¤.</p>
                    </div>
                     <div class="flow-arrow">â¡ï¸</div>
                    <div class="flow-box">
                        <p class="pill mb-3">STEP 4</p>
                        <h3 class="text-xl font-bold mb-2">íƒˆì¶œ ë˜ëŠ” ë°˜ë³µ</h3>
                        <p>ë‚®ì•„ì§„ í‰ë‹¨ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì€ ë°˜ë“±ì—ë„ ìˆ˜ìµ ì „í™˜(íƒˆì¶œ)ì„ ë…¸ë¦½ë‹ˆë‹¤. ì‹¤íŒ¨ ì‹œ STEP 1ì„ ë°˜ë³µí•©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </section>
            
            <section id="synergy" class="card">
                <h2 class="text-3xl font-bold mb-6 text-center">5. ì™„ì„±ëœ ê·¸ë¦¼: ë¬´í•œë§¤ìˆ˜ë²• + ë°¸ë¥˜ ë¦¬ë°¸ëŸ°ì‹±(VR)</h2>
                <p class="text-center text-lg mb-8 max-w-3xl mx-auto">ìˆ˜ìµë¥ ì´ ì „ë¶€ê°€ ì•„ë‹™ë‹ˆë‹¤. íˆ¬ìëŠ” ì‹¬ë¦¬ ê²Œì„ì´ë©°, ë¬´í•œë§¤ìˆ˜ë²•ì˜ ì§„ì •í•œ ê°€ì¹˜ëŠ” ì¥ê¸° íˆ¬ì ì „ëµì¸ 'ë°¸ë¥˜ ë¦¬ë°¸ëŸ°ì‹±(VR)'ê³¼ í•¨ê»˜í•  ë•Œ ë°œíœ˜ë©ë‹ˆë‹¤.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-blue-50 p-6 rounded-lg">
                        <h3 class="text-xl font-bold mb-3">ë¬´í•œë§¤ìˆ˜ë²• (ë‹¨ê¸°/ì¤‘ê¸°)</h3>
                        <ul class="list-disc list-inside space-y-2">
                            <li>íš¡ë³´ì¥/í•˜ë½ì¥ì—ì„œë„ í˜„ê¸ˆ íë¦„ ì°½ì¶œ</li>
                            <li>ì‹¤í˜„ ìˆ˜ìµìœ¼ë¡œ ì¸í•œ ì‹¬ë¦¬ì  ì•ˆì •ê° ì œê³µ</li>
                            <li>ê¸‰ì „ í•„ìš”ì‹œ ìœ ì—°í•˜ê²Œ ëŒ€ì‘ ê°€ëŠ¥</li>
                        </ul>
                    </div>
                    <div class="bg-purple-50 p-6 rounded-lg">
                        <h3 class="text-xl font-bold mb-3">ë°¸ë¥˜ ë¦¬ë°¸ëŸ°ì‹± (ì¥ê¸°)</h3>
                        <ul class="list-disc list-inside space-y-2">
                            <li>ë³µë¦¬ì˜ ë§ˆë²•ì„ í†µí•œ ìì‚°ì˜ ê¸°í•˜ê¸‰ìˆ˜ì  ì„±ì¥ ì¶”êµ¬</li>
                            <li>ìƒìŠ¹ì¥ì˜ í° íë¦„ì„ ë†“ì¹˜ì§€ ì•ŠìŒ</li>
                            <li>ë¬´í•œë§¤ìˆ˜ë²• ìˆ˜ìµê¸ˆì˜ ìµœì¢… ì¢…ì°©ì§€</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section id="live-price" class="card">
                <h2 class="text-3xl font-bold mb-6 text-center">6. ì‹¤ì‹œê°„ ì‹œì„¸ (Yahoo Finance API)</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-center">
                    <div class="p-6 bg-blue-50 rounded-lg">
                        <h3 class="text-2xl font-bold mb-2">TQQQ</h3>
                        <p class="text-4xl font-black text-blue-900">$<span id="tqqq-price">ë¡œë”©ì¤‘...</span></p>
                    </div>
                    <div class="p-6 bg-orange-50 rounded-lg">
                        <h3 class="text-2xl font-bold mb-2">SOXL</h3>
                        <p class="text-4xl font-black text-orange-900">$<span id="soxl-price">ë¡œë”©ì¤‘...</span></p>
                    </div>
                </div>
                 <p id="last-update" class="text-center text-sm text-gray-500 mt-4"></p>
            </section>

            <section id="practical-guide" class="card">
                <h2 class="text-3xl font-bold mb-2 text-center">7. ìë™ë§¤ë§¤ ë°±ì—…: ìˆ˜ë™ ì£¼ë¬¸ ìƒì„±ê¸°</h2>
                <p class="text-center text-lg mb-8 max-w-3xl mx-auto">ìë™í™” íˆ´ì´ ì—†ì–´ë„ ê´œì°®ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ í˜„ì¬ê°€ë¥¼ í™•ì¸í•˜ê³ , ì•„ë˜ ìƒì„±ê¸°ì— ë‹¹ì‹ ì˜ ê³„ì¢Œ ìƒí™©ì„ ì…ë ¥í•˜ë©´ ì˜¤ëŠ˜ ì‹¤í–‰í•´ì•¼ í•  ëª¨ë“  ì£¼ë¬¸ì„ ì •í™•íˆ ê³„ì‚°í•´ ë“œë¦½ë‹ˆë‹¤.</p>
                
                <div class="bg-gray-100 p-6 rounded-lg">
                    <h3 class="text-2xl font-bold mb-4">ì˜¤ëŠ˜ì˜ ì£¼ë¬¸ ìƒì„±ê¸°</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="tickerSelect" class="font-bold">1. ì¢…ëª© ì„ íƒ</label>
                            <select id="tickerSelect" class="calculator-input mt-1">
                                <option value="TQQQ">TQQQ (V2.2)</option>
                                <option value="SOXL">SOXL (V2.2)</option>
                            </select>
                        </div>
                        <div>
                            <label for="virtualSeed" class="font-bold">2. ì¢…ëª©ë³„ ì›ê¸ˆ ($)</label>
                            <input type="number" id="virtualSeed" class="calculator-input mt-1" placeholder="ì˜ˆ: 13000">
                        </div>
                        <div>
                            <label for="cumulativeBuy" class="font-bold">3. ì´ ë§¤ì…ê¸ˆì•¡ ($)</label>
                            <input type="number" id="cumulativeBuy" class="calculator-input mt-1" placeholder="ì˜ˆ: 1631">
                        </div>
                        <div>
                            <label for="avgPrice" class="font-bold">4. ë‚´ í‰ë‹¨ê°€ ($)</label>
                            <input type="number" id="avgPrice" class="calculator-input mt-1" placeholder="ì˜ˆ: 70.9110">
                        </div>
                         <div class="md:col-span-2">
                            <label for="totalQuantity" class="font-bold">5. ì´ ë³´ìœ  ìˆ˜ëŸ‰</label>
                            <input type="number" id="totalQuantity" class="calculator-input mt-1" placeholder="ì˜ˆ: 23">
                        </div>
                    </div>
                    <button id="calculateBtn" class="w-full bg-[#665191] text-white font-bold py-3 mt-6 rounded-lg hover:bg-[#50407a] transition-colors">ì£¼ë¬¸ ìƒì„±í•˜ê¸°</button>
                    <div id="calculatorResult" class="calculator-output hidden mt-6"></div>
                </div>
            </section>

			<footer class="py-12 px-6 bg-slate-50">
				<div class="container mx-auto text-center text-slate-500">
					<div class="text-xl font-bold mb-2 orbitron text-slate-800">El Fenomeno Kim</div>
					<p class="mb-4 text-sm">The Ultimate Investment Knowledge Platform</p>
					<p class="text-xs text-slate-400">Â© 2025 FenoK. ëª¨ë“  ì •ë³´ëŠ” íˆ¬ì ì°¸ê³ ìš©ì´ì§€ë§Œ, ì†ì‹¤ ë‚˜ë©´ ë‹ˆ íƒ“, ìˆ˜ìµ ë‚˜ë©´ ë‚´ íƒ“.<br>100x â€¢ QUANTUM POWERED</p>
				</div>
			</footer>

        </main>
    </div>

    <script defer>
        document.addEventListener('DOMContentLoaded', function () {
            const livePrices = { TQQQ: null, SOXL: null };

            async function fetchStockPrice(symbol) {
                const proxyUrl = 'https://api.allorigins.win/get?url=';
                const targetUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${symbol}`;
                try {
                    const response = await fetch(proxyUrl + encodeURIComponent(targetUrl));
                    if (!response.ok) throw new Error(`Network response was not ok for ${symbol}`);
                    const data = await response.json();
                    const content = JSON.parse(data.contents);
                    const price = content?.chart?.result?.[0]?.meta?.regularMarketPrice;
                    return price ? price.toFixed(2) : 'N/A';
                } catch (error) {
                    console.error('Price fetch error for ' + symbol + ':', error);
                    return 'ì‹¤íŒ¨';
                }
            }

            async function updateLivePrices() {
                const tqqqPriceSpan = document.getElementById('tqqq-price');
                const soxlPriceSpan = document.getElementById('soxl-price');
                const lastUpdateSpan = document.getElementById('last-update');
                
                tqqqPriceSpan.textContent = 'ë¡œë”©ì¤‘...';
                soxlPriceSpan.textContent = 'ë¡œë”©ì¤‘...';

                const [tqqqPrice, soxlPrice] = await Promise.all([
                    fetchStockPrice('TQQQ'),
                    fetchStockPrice('SOXL')
                ]);

                livePrices.TQQQ = tqqqPrice !== 'ì‹¤íŒ¨' && tqqqPrice !== 'N/A' ? parseFloat(tqqqPrice) : null;
                livePrices.SOXL = soxlPrice !== 'ì‹¤íŒ¨' && soxlPrice !== 'N/A' ? parseFloat(soxlPrice) : null;

                tqqqPriceSpan.textContent = tqqqPrice;
                soxlPriceSpan.textContent = soxlPrice;
                lastUpdateSpan.textContent = `ìµœì¢… ì—…ë°ì´íŠ¸: ${new Date().toLocaleString()}`;
            }

            updateLivePrices();
            setInterval(updateLivePrices, 60000);

            const tabs = {
                tqqq: document.getElementById('tab-tqqq'),
                soxl: document.getElementById('tab-soxl')
            };
            const contents = {
                tqqq: document.getElementById('content-tqqq'),
                soxl: document.getElementById('content-soxl')
            };
            let tqqqChart, soxlChart;

            const tooltipPlugin = {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            return Array.isArray(label) ? label.join(' ') : label;
                        }
                    }
                }
            };
            
            function createChart(canvasId, labels, data, datasetLabel, colors) {
                const ctx = document.getElementById(canvasId).getContext('2d');
                return new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: datasetLabel,
                            data: data,
                            backgroundColor: (c) => c.raw >= 0 ? colors.positive.bg : colors.negative.bg,
                            borderColor: (c) => c.raw >= 0 ? colors.positive.border : colors.negative.border,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: { title: { display: true, text: 'ìˆ˜ìµë¥  (%)' }, ticks: { callback: (v) => v + '%' } },
                            x: { title: { display: true, text: 'T ê°’' }, ticks: { callback: function(val, i) { return i % 2 === 0 ? this.getLabelForValue(val) : ''; }, autoSkip: false, maxRotation: 0 } }
                        },
                        plugins: { legend: { display: false }, ...tooltipPlugin }
                    }
                });
            }

            function createTqqqChart() {
                const labels = [];
                const values = [];
                for (let t = 1; t <= 40; t++) {
                    labels.push(`T=${t}`);
                    values.push(10 - (t / 2));
                }
                const colors = { positive: {bg: 'rgba(255, 124, 67, 0.6)', border: 'rgba(255, 124, 67, 1)'}, negative: {bg: 'rgba(102, 81, 145, 0.6)', border: 'rgba(102, 81, 145, 1)'}};
                tqqqChart = createChart('tqqqChart', labels, values, 'TQQQ â˜†% (LOC ê¸°ì¤€ê°€)', colors);
            }

            function createSoxlChart() {
                const labels = [];
                const values = [];
                for (let t = 1; t <= 40; t++) {
                    labels.push(`T=${t}`);
                    values.push(12 - (t * 0.6));
                }
                 const colors = { positive: {bg: 'rgba(255, 166, 0, 0.6)', border: 'rgba(255, 166, 0, 1)'}, negative: {bg: 'rgba(0, 63, 92, 0.6)', border: 'rgba(0, 63, 92, 1)'}};
                soxlChart = createChart('soxlChart', labels, values, 'SOXL â˜†% (LOC ê¸°ì¤€ê°€)', colors);
            }
            
            createTqqqChart();

            function switchTab(activeTab) {
                Object.keys(tabs).forEach(key => {
                    const is_active = key === activeTab;
                    tabs[key].classList.toggle('active', is_active);
                    contents[key].classList.toggle('hidden', !is_active);
                });

                if (activeTab === 'soxl' && !soxlChart) {
                    createSoxlChart();
                }
            }

            tabs.tqqq.addEventListener('click', () => switchTab('tqqq'));
            tabs.soxl.addEventListener('click', () => switchTab('soxl'));

            const calculateBtn = document.getElementById('calculateBtn');
            calculateBtn.addEventListener('click', () => {
                const ticker = document.getElementById('tickerSelect').value;
                const virtualSeed = parseFloat(document.getElementById('virtualSeed').value);
                const cumulativeBuy = parseFloat(document.getElementById('cumulativeBuy').value);
                const totalQuantity = parseFloat(document.getElementById('totalQuantity').value);
                const avgPrice = parseFloat(document.getElementById('avgPrice').value);
                const resultDiv = document.getElementById('calculatorResult');

                if (isNaN(virtualSeed) || isNaN(cumulativeBuy) || isNaN(totalQuantity) || isNaN(avgPrice) || virtualSeed <= 0) {
                    resultDiv.innerHTML = '<p class="text-red-600 font-bold">ëª¨ë“  ê°’ì„ ì •í™•í•˜ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>';
                    resultDiv.classList.remove('hidden');
                    return;
                }

                const config = {
                    TQQQ: { split: 40, starFormula: t => 10 - (t / 2), sellProfit: 10 },
                    SOXL: { split: 40, starFormula: t => 12 - (t * 0.6), sellProfit: 12 }
                };
                
                const currentConfig = config[ticker];
                const oneTimeBuy = virtualSeed / currentConfig.split;
                const tValue = Math.ceil((cumulativeBuy / oneTimeBuy) * 10) / 10;
                const starPercent = currentConfig.starFormula(tValue);
                const starPrice = avgPrice * (1 + starPercent / 100);
                const profitPrice = avgPrice * (1 + currentConfig.sellProfit / 100);
                
                const isFirstHalf = tValue < 20;
                
                let buyOrders = [];
                let oneTimeBuyAmount = 0;

                if (isFirstHalf) {
                    const buyAmountHalf = oneTimeBuy / 2;
                    const í‰ë‹¨LOCë§¤ìˆ˜ìˆ˜ëŸ‰ = Math.floor(buyAmountHalf / avgPrice);
                    buyOrders.push({ type: 'í‰ë‹¨LOC ë§¤ìˆ˜', price: avgPrice.toFixed(4), quantity: í‰ë‹¨LOCë§¤ìˆ˜ìˆ˜ëŸ‰ });
                    oneTimeBuyAmount += í‰ë‹¨LOCë§¤ìˆ˜ìˆ˜ëŸ‰ * avgPrice;
                    
                    if (starPrice > 0) {
                        const í°ìˆ˜LOCë§¤ìˆ˜ìˆ˜ëŸ‰ = Math.floor(buyAmountHalf / (starPrice - 0.01));
                        buyOrders.push({ type: 'í°ìˆ˜LOC ë§¤ìˆ˜', price: (starPrice - 0.01).toFixed(4), quantity: í°ìˆ˜LOCë§¤ìˆ˜ìˆ˜ëŸ‰ });
                        oneTimeBuyAmount += í°ìˆ˜LOCë§¤ìˆ˜ìˆ˜ëŸ‰ * (starPrice - 0.01);
                    }
                } else {
                    if (starPrice > 0) {
                        const í°ìˆ˜LOCë§¤ìˆ˜ìˆ˜ëŸ‰ = Math.floor(oneTimeBuy / (starPrice - 0.01));
                        buyOrders.push({ type: 'í°ìˆ˜LOC ë§¤ìˆ˜', price: (starPrice - 0.01).toFixed(4), quantity: í°ìˆ˜LOCë§¤ìˆ˜ìˆ˜ëŸ‰ });
                        oneTimeBuyAmount += í°ìˆ˜LOCë§¤ìˆ˜ìˆ˜ëŸ‰ * (starPrice - 0.01);
                    }
                }
                
                let remainingAmountForAdditional = oneTimeBuy - oneTimeBuyAmount;
                let additionalBuyOrders = [];
                if(remainingAmountForAdditional > 0){
                    const maxAdditionalBuyCount = 5;
                    let lastBuyPrice = (buyOrders.length > 0) ? parseFloat(buyOrders[buyOrders.length-1].price) : avgPrice;
                    for(let i=0; i < maxAdditionalBuyCount; i++){
                        let declinePrice = lastBuyPrice * (1 - (i+1)*0.015);
                        if(remainingAmountForAdditional > declinePrice && declinePrice > 0){
                            additionalBuyOrders.push({ type: `í•˜ë½ëŒ€ë¹„ ì¶”ê°€ë§¤ìˆ˜ ${i+1}`, price: declinePrice.toFixed(4), quantity: 1 });
                            remainingAmountForAdditional -= declinePrice;
                        } else {
                            break;
                        }
                    }
                }

                const sellQuantity1 = Math.floor(totalQuantity / 4);
                const sellQuantity2 = totalQuantity - sellQuantity1;
                let sellOrders = [
                    { type: 'LOC ë§¤ë„', price: starPrice.toFixed(4), quantity: sellQuantity1 },
                    { type: `ì§€ì •ê°€ ë§¤ë„ (+${currentConfig.sellProfit}%)`, price: profitPrice.toFixed(4), quantity: sellQuantity2 }
                ];

                const renderTable = (title, headers, rows) => {
                    if (rows.length === 0) return '';
                    let tableHTML = `<h4 class="text-xl font-bold mt-4 mb-2">${title}</h4><table class="output-table"><thead><tr>`;
                    headers.forEach(h => tableHTML += `<th>${h}</th>`);
                    tableHTML += `</tr></thead><tbody>`;
                    rows.forEach(row => {
                         tableHTML += `<tr>`;
                         row.forEach(cell => tableHTML += `<td>${cell}</td>`);
                         tableHTML += `</tr>`;
                    });
                    tableHTML += `</tbody></table>`;
                    return tableHTML;
                }
                
                let summaryHtml = `<div class="p-4 bg-white rounded-md grid grid-cols-2 md:grid-cols-3 gap-4">
                        <div class="text-center"><p class="text-sm text-gray-500">T-Value</p><p class="font-bold text-lg">${tValue.toFixed(1)}</p></div>
                        <div class="text-center"><p class="text-sm text-gray-500">1íšŒ ë§¤ìˆ˜ê¸ˆ</p><p class="font-bold text-lg">$${oneTimeBuy.toFixed(2)}</p></div>
                        <div class="text-center"><p class="text-sm text-gray-500">â˜†% (LOC ê°€ê²©)</p><p class="font-bold text-lg">${starPercent.toFixed(2)}% ($${starPrice.toFixed(2)})</p></div>
                    `;
                
                const currentPrice = livePrices[ticker];
                if (currentPrice) {
                    const currentProfitPercent = ((currentPrice - avgPrice) / avgPrice) * 100;
                    summaryHtml += `<div class="text-center col-span-2 md:col-span-3"><p class="text-sm text-gray-500">í˜„ì¬ í‰ê°€ìˆ˜ìµë¥  (ì‹¤ì‹œê°„)</p><p class="font-bold text-2xl ${currentProfitPercent >= 0 ? 'text-green-600' : 'text-red-600'}">${currentProfitPercent.toFixed(2)}%</p></div>`;
                }
                summaryHtml += '</div>';

                const buyOrderRows = [...buyOrders, ...additionalBuyOrders].map(o => [o.type, o.price, o.quantity]);
                const sellOrderRows = sellOrders.map(o => [o.type, o.price, o.quantity]);

                let resultHtml = `
                    ${summaryHtml}
                    ${renderTable('ğŸ“ˆ ë§¤ìˆ˜ ì£¼ë¬¸ ëª©ë¡', ['ì£¼ë¬¸ ì¢…ë¥˜', 'ê°€ê²©($)', 'ìˆ˜ëŸ‰'], buyOrderRows)}
                    ${renderTable('ğŸ“‰ ë§¤ë„ ì£¼ë¬¸ ëª©ë¡', ['ì£¼ë¬¸ ì¢…ë¥˜', 'ê°€ê²©($)', 'ìˆ˜ëŸ‰'], sellOrderRows)}
                `;

                resultDiv.innerHTML = resultHtml;
                resultDiv.classList.remove('hidden');
            });
        });
    </script>
    <script type="module">
        import { siteVersion } from '../version.js';
        if (window.top === window.self) {
            fetch(`../nav.html?v=${siteVersion}`)
                .then(r => r.text())
                .then(html => {
                    const nav = document.getElementById('nav');
                    nav.innerHTML = html;
                    nav.querySelectorAll('script').forEach(oldScript => {
                        const script = document.createElement('script');
                        Array.from(oldScript.attributes).forEach(attr => script.setAttribute(attr.name, attr.value));
                        script.textContent = oldScript.textContent;
                        oldScript.replaceWith(script);
                    });
                });
        }
    </script>
  <script type="module" src="../version.js"></script>
</body>
</html>
