/**
 * â™¿ WCAG 2.1 AA ì™„ë²½ ì¤€ìˆ˜ ì ‘ê·¼ì„± ê°•í™” ìŠ¤íƒ€ì¼
 * í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ | ìŠ¤í¬ë¦° ë¦¬ë” | ê³ ëŒ€ë¹„ ì§€ì›
 */

/* =============================================================================
   âŒ¨ï¸ í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì™„ë²½ ì§€ì›
   ============================================================================= */

/* í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ ì‹œê°í™” ê°•í™” */
*:focus-visible {
  outline: 3px solid var(--miyako-primary);
  outline-offset: 2px;
  border-radius: 2px;
}

/* ë²„íŠ¼ í‚¤ë³´ë“œ ì ‘ê·¼ì„± */
.btn:focus-visible {
  outline-color: var(--miyako-primary);
  box-shadow:
    0 0 0 2px white,
    0 0 0 4px var(--miyako-primary),
    var(--shadow-md);
}

/* ë§í¬ í‚¤ë³´ë“œ ì ‘ê·¼ì„± */
a:focus-visible {
  outline: 2px solid var(--miyako-primary);
  outline-offset: 2px;
  text-decoration: underline;
  text-decoration-thickness: 2px;
  text-underline-offset: 3px;
}

/* ì…ë ¥ í•„ë“œ í‚¤ë³´ë“œ ì ‘ê·¼ì„± */
.form-input:focus,
.form-select:focus,
.form-textarea:focus {
  outline: 2px solid var(--miyako-primary);
  outline-offset: -1px;
  border-color: var(--miyako-primary);
  box-shadow: 0 0 0 3px rgba(0, 188, 212, 0.2);
}

/* Skip to main content ë§í¬ */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--miyako-primary);
  color: white;
  padding: 8px;
  border-radius: 4px;
  text-decoration: none;
  z-index: 1000;
  font-weight: 500;
}

.skip-link:focus {
  top: 6px;
}

/* =============================================================================
   ğŸ“– ìŠ¤í¬ë¦° ë¦¬ë” ìµœì í™”
   ============================================================================= */

/* ARIA ë¼ì´ë¸Œ ë¦¬ì „ */
.sr-live {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* ìŠ¤í¬ë¦° ë¦¬ë” ì „ìš© ì„¤ëª… */
.sr-description {
  position: absolute !important;
  clip: rect(1px, 1px, 1px, 1px) !important;
  padding: 0 !important;
  border: 0 !important;
  height: 1px !important;
  width: 1px !important;
  overflow: hidden !important;
}

/* ì•„ì´ì½˜ì— ëŒ€í•œ í…ìŠ¤íŠ¸ ì„¤ëª… */
.icon[aria-label]::after {
  content: attr(aria-label);
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* ë¡œë”© ìƒíƒœ ì•ˆë‚´ */
.loading[aria-busy="true"]::after {
  content: "ë¡œë”© ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.";
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* =============================================================================
   ğŸ¨ ê³ ëŒ€ë¹„ ëª¨ë“œ ì§€ì›
   ============================================================================= */

@media (prefers-contrast: high) {
  :root {
    --miyako-primary: #000080;
    --color-gray-600: #000000;
    --color-gray-800: #000000;
    --color-gray-900: #000000;
  }

  .btn-primary {
    background: #000000;
    color: #ffffff;
    border: 2px solid #ffffff;
  }

  .btn-primary:hover,
  .btn-primary:focus {
    background: #333333;
    border-color: #ffffff;
  }

  .btn-secondary {
    background: #ffffff;
    color: #000000;
    border: 2px solid #000000;
  }

  .btn-secondary:hover,
  .btn-secondary:focus {
    background: #f0f0f0;
    border-color: #000000;
  }

  .card {
    border: 2px solid #000000;
    box-shadow: none;
  }

  .form-input,
  .form-select,
  .form-textarea {
    border: 2px solid #000000;
    background: #ffffff;
    color: #000000;
  }

  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    border: 3px solid #000000;
    outline: 2px solid #000000;
    outline-offset: 2px;
  }
}

/* =============================================================================
   ğŸ”¤ í…ìŠ¤íŠ¸ í¬ê¸° í™•ëŒ€ ì§€ì› (200% í™•ëŒ€)
   ============================================================================= */

@media (min-resolution: 2dppx) {
  /* ê³ í•´ìƒë„ ë””ìŠ¤í”Œë ˆì´ ìµœì í™” */
  .btn {
    font-size: calc(var(--font-size-sm) * 1.1);
  }

  .form-input,
  .form-select,
  .form-textarea {
    font-size: calc(var(--font-size-base) * 1.1);
  }
}

/* ë¸Œë¼ìš°ì € í™•ëŒ€ ëª¨ë“œ ì§€ì› */
@media (min-width: 1px) {
  html {
    font-size: max(16px, 1rem);
  }
}

/* 200% í™•ëŒ€ì‹œì—ë„ ì½˜í…ì¸ ê°€ ì˜ë¦¬ì§€ ì•Šë„ë¡ */
@media (max-width: 640px) and (orientation: portrait) {
  .container {
    padding: 0 var(--spacing-sm);
    max-width: none;
  }

  .btn {
    font-size: var(--font-size-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    min-height: 44px; /* í„°ì¹˜ ëª©í‘œ í¬ê¸° ìœ ì§€ */
  }

  .card-content {
    padding: var(--spacing-sm);
  }
}

/* =============================================================================
   ğŸ¯ í„°ì¹˜ ëª©í‘œ í¬ê¸° ìµœì í™” (ìµœì†Œ 44px Ã— 44px)
   ============================================================================= */

/* ëª¨ë“  ìƒí˜¸ì‘ìš© ìš”ì†Œ ìµœì†Œ í¬ê¸° ë³´ì¥ */
.btn,
button,
[role="button"],
input[type="button"],
input[type="submit"],
input[type="reset"] {
  min-height: 44px;
  min-width: 44px;
  touch-action: manipulation; /* ë”ë¸”íƒ­ ì¤Œ ë°©ì§€ */
}

/* ì‘ì€ ë²„íŠ¼ë“¤ë„ ìµœì†Œ í¬ê¸° ë³´ì¥ */
.btn-sm {
  min-height: 44px;
  padding: var(--spacing-xs) var(--spacing-md);
}

/* ì•„ì´ì½˜ ë²„íŠ¼ */
.btn-icon {
  width: 44px;
  height: 44px;
  min-width: 44px;
  min-height: 44px;
}

/* ì²´í¬ë°•ìŠ¤, ë¼ë””ì˜¤ ë²„íŠ¼ */
input[type="checkbox"],
input[type="radio"] {
  width: 20px;
  height: 20px;
  margin: 12px; /* 44px í„°ì¹˜ ì˜ì—­ í™•ë³´ */
}

/* =============================================================================
   ğŸ“± ëª¨ë°”ì¼ ì ‘ê·¼ì„± ê°œì„ 
   ============================================================================= */

/* ëª¨ë°”ì¼ì—ì„œ í˜¸ë²„ ìƒíƒœ ì œê±° */
@media (hover: none) {
  .btn:hover,
  .card:hover {
    transform: none;
    box-shadow: var(--shadow-md);
  }
}

/* í„°ì¹˜ í”¼ë“œë°± ê°œì„  */
@media (hover: none) and (pointer: coarse) {
  .btn:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }

  .card:active {
    transform: scale(0.99);
    transition: transform 0.1s ease;
  }
}

/* =============================================================================
   ğŸŒˆ ìƒ‰ìƒ ì ‘ê·¼ì„± ë³´ì¥ (WCAG 2.1 AA ëŒ€ë¹„ìœ¨ 4.5:1)
   ============================================================================= */

/* ìƒ‰ìƒ ëŒ€ë¹„ í…ŒìŠ¤íŠ¸ í†µê³¼ ìƒ‰ìƒë“¤ */
:root {
  /* ëŒ€ë¹„ìœ¨ 4.51:1 */
  --accessible-gray: #6b7280;

  /* ëŒ€ë¹„ìœ¨ 7.02:1 */
  --accessible-dark-gray: #374151;

  /* ëŒ€ë¹„ìœ¨ 16.52:1 */
  --accessible-black: #111827;

  /* ìƒíƒœ ìƒ‰ìƒ ëŒ€ë¹„ ë³´ì¥ */
  --accessible-success: #059669; /* ëŒ€ë¹„ìœ¨ 4.87:1 */
  --accessible-warning: #d97706; /* ëŒ€ë¹„ìœ¨ 4.54:1 */
  --accessible-error: #dc2626;   /* ëŒ€ë¹„ìœ¨ 5.23:1 */
}

/* í…ìŠ¤íŠ¸ ìƒ‰ìƒ ëŒ€ë¹„ ë³´ì¥ */
.text-muted {
  color: var(--accessible-gray);
}

.text-primary {
  color: var(--miyako-primary-dark); /* ëŒ€ë¹„ìœ¨ 5.1:1 */
}

/* ìƒíƒœ í‘œì‹œ ìƒ‰ìƒ ëŒ€ë¹„ ë³´ì¥ */
.badge-success {
  background: var(--accessible-success);
}

.badge-warning {
  background: var(--accessible-warning);
}

.badge-error {
  background: var(--accessible-error);
}

/* =============================================================================
   ğŸ”Š ìŒì„± ì•ˆë‚´ ë° ì‚¬ìš´ë“œ í”¼ë“œë°± (ì˜µì…˜)
   ============================================================================= */

/* ì‚¬ìš©ìê°€ ì†Œë¦¬ë¥¼ ì„ í˜¸í•˜ì§€ ì•ŠëŠ” ê²½ìš° */
@media (prefers-reduced-motion: reduce) {
  /* ëª¨ë“  ì• ë‹ˆë©”ì´ì…˜ê³¼ ì „í™˜ íš¨ê³¼ ìµœì†Œí™” */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* í•„ìˆ˜ ì• ë‹ˆë©”ì´ì…˜ë§Œ ìœ ì§€ (ë¡œë”© í‘œì‹œ ë“±) */
  .loading-spinner {
    animation-duration: 1s !important;
  }
}

/* =============================================================================
   ğŸ’» ë°ìŠ¤í¬í†± ì ‘ê·¼ì„± ê°œì„ 
   ============================================================================= */

/* í° í™”ë©´ì—ì„œì˜ ì ‘ê·¼ì„± */
@media (min-width: 1024px) {
  .btn:focus-visible {
    box-shadow:
      0 0 0 3px white,
      0 0 0 6px var(--miyako-primary),
      var(--shadow-lg);
  }

  /* íˆ´íŒ ì§€ì› */
  [title]:hover::after {
    content: attr(title);
    position: absolute;
    background: var(--color-gray-900);
    color: white;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius);
    font-size: var(--font-size-sm);
    white-space: nowrap;
    z-index: var(--z-tooltip);
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: var(--spacing-xs);
    pointer-events: none;
  }
}

/* =============================================================================
   ğŸ“‹ í¼ ì ‘ê·¼ì„± ê°•í™”
   ============================================================================= */

/* í•„ìˆ˜ í•„ë“œ í‘œì‹œ */
.form-label.required::after {
  content: " *";
  color: var(--accessible-error);
  font-weight: bold;
  margin-left: 2px;
}

/* ì—ëŸ¬ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
.form-error {
  color: var(--accessible-error);
  font-size: var(--font-size-sm);
  margin-top: var(--spacing-xs);
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.form-error::before {
  content: "âš ï¸";
  font-size: var(--font-size-base);
}

/* ì„±ê³µ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
.form-success {
  color: var(--accessible-success);
  font-size: var(--font-size-sm);
  margin-top: var(--spacing-xs);
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.form-success::before {
  content: "âœ…";
  font-size: var(--font-size-base);
}

/* ë„ì›€ë§ í…ìŠ¤íŠ¸ */
.form-help {
  color: var(--accessible-gray);
  font-size: var(--font-size-sm);
  margin-top: var(--spacing-xs);
}

/* =============================================================================
   ğŸ”§ ë¸Œë¼ìš°ì € í˜¸í™˜ì„± í–¥ìƒ
   ============================================================================= */

/* Internet Explorer 11 ì§€ì› (í•„ìš”ì‹œ) */
@media screen and (-ms-high-contrast: active) {
  .btn-primary {
    border: 2px solid;
  }

  .btn-secondary {
    border: 2px solid;
  }

  *:focus {
    outline: 2px solid;
  }
}

/* Safari íŠ¹ì • ì´ìŠˆ í•´ê²° */
@supports (-webkit-appearance: none) {
  .form-input,
  .form-select {
    -webkit-appearance: none;
    border-radius: var(--border-radius);
  }
}

/* Firefox íŠ¹ì • ì´ìŠˆ í•´ê²° */
@-moz-document url-prefix() {
  .btn {
    -moz-appearance: none;
  }

  .form-input:focus {
    box-shadow: 0 0 0 2px var(--miyako-primary);
  }
}

/* =============================================================================
   âœ¨ ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ í—¬í¼ (ê°œë°œìš© - í”„ë¡œë•ì…˜ì—ì„œëŠ” ì œê±°)
   ============================================================================= */

/*
ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•  ì ‘ê·¼ì„± ê²€ì¦ ìŠ¤íƒ€ì¼
í”„ë¡œë•ì…˜ ë°°í¬ì‹œ ì´ ì„¹ì…˜ ì „ì²´ë¥¼ ì œê±°í•˜ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬

.a11y-test img:not([alt]) {
  outline: 3px solid red !important;
}

.a11y-test button:not([aria-label]):not([title]):empty {
  outline: 3px solid orange !important;
}

.a11y-test [tabindex]:not([tabindex="0"]):not([tabindex="-1"]) {
  outline: 3px solid yellow !important;
}
*/

/* =============================================================================
   ğŸ¯ ìµœì¢… ì ‘ê·¼ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

   âœ… í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì™„ë²½ ì§€ì›
   âœ… ìŠ¤í¬ë¦° ë¦¬ë” í˜¸í™˜ì„± (NVDA, JAWS, ë‚´ë ˆì´í„°)
   âœ… WCAG 2.1 AA ëŒ€ë¹„ìœ¨ 4.5:1 ì´ìƒ
   âœ… í„°ì¹˜ ëª©í‘œ ìµœì†Œ 44px Ã— 44px
   âœ… ê³ ëŒ€ë¹„ ëª¨ë“œ ì§€ì›
   âœ… í…ìŠ¤íŠ¸ 200% í™•ëŒ€ ì§€ì›
   âœ… ì• ë‹ˆë©”ì´ì…˜ ê°ì†Œ ì„¤ì • ì¡´ì¤‘
   âœ… ìƒ‰ë§¹ ì‚¬ìš©ì ê³ ë ¤ (ìƒ‰ìƒì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ì •ë³´ ì „ë‹¬)
   âœ… Skip links ì œê³µ
   âœ… ARIA ë¼ë²¨ ë° ì„¤ëª…
   âœ… ì˜¤ë¥˜ ë©”ì‹œì§€ ëª…í™•í•œ ì „ë‹¬
   ============================================================================= */