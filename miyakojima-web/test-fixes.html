<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸï¸ ë¯¸ì•¼ì½”ì§€ë§ˆ - ìˆ˜ì •ì‚¬í•­ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 4px solid #ddd;
        }
        .status-success {
            background: #d4edda;
            border-left-color: #28a745;
            color: #155724;
        }
        .status-error {
            background: #f8d7da;
            border-left-color: #dc3545;
            color: #721c24;
        }
        .status-warning {
            background: #fff3cd;
            border-left-color: #ffc107;
            color: #856404;
        }
        .module-list {
            margin: 20px 0;
        }
        .module-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin: 4px 0;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .module-status {
            font-weight: bold;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
        }
        .status-ready {
            background: #d4edda;
            color: #155724;
        }
        .status-failed {
            background: #f8d7da;
            color: #721c24;
        }
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover {
            background: #0056b3;
        }
        #console-output {
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸï¸ ë¯¸ì•¼ì½”ì§€ë§ˆ ì›¹ì•± - ìˆ˜ì •ì‚¬í•­ í…ŒìŠ¤íŠ¸</h1>

        <div class="status-item status-warning">
            <strong>í…ŒìŠ¤íŠ¸ ëª©ì :</strong> ìˆ˜ì •ëœ íŒŒì¼ë“¤ì´ ì˜¬ë°”ë¥´ê²Œ ë¡œë“œë˜ê³  ì´ˆê¸°í™”ë˜ëŠ”ì§€ í™•ì¸
        </div>

        <h2>ğŸ“‹ ìˆ˜ì • ì™„ë£Œ í•­ëª©</h2>
        <div class="status-item status-success">
            âœ… <strong>modules/navigation.js</strong> - ë„¤ë¹„ê²Œì´ì…˜ ëª¨ë“ˆ ìƒì„± ì™„ë£Œ
        </div>
        <div class="status-item status-success">
            âœ… <strong>modules/share.js</strong> - ê³µìœ  ê¸°ëŠ¥ ëª¨ë“ˆ ìƒì„± ì™„ë£Œ
        </div>
        <div class="status-item status-success">
            âœ… <strong>index.html</strong> - ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ìˆœì„œ ë° ëª¨ë“ˆ ì°¸ì¡° ìˆ˜ì • ì™„ë£Œ
        </div>
        <div class="status-item status-success">
            âœ… <strong>config.js</strong> - ë¸Œë¼ìš°ì € í˜¸í™˜ì„± í™•ì¸ (process.env ì´ìŠˆ ì—†ìŒ)
        </div>

        <h2>ğŸ”§ ëª¨ë“ˆ ì´ˆê¸°í™” ìƒíƒœ</h2>
        <div class="module-list" id="module-status">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>

        <h2>ğŸ§ª í…ŒìŠ¤íŠ¸ ì•¡ì…˜</h2>
        <button class="btn" onclick="testNavigation()">ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸</button>
        <button class="btn" onclick="testShare()">ê³µìœ  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</button>
        <button class="btn" onclick="testConfiguration()">ì„¤ì • í™•ì¸</button>
        <button class="btn" onclick="clearConsole()">ì½˜ì†” ì§€ìš°ê¸°</button>

        <h2>ğŸ“Š ì‹¤ì‹œê°„ ì½˜ì†” ë¡œê·¸</h2>
        <div id="console-output"></div>
    </div>

    <!-- JavaScript - ìˆ˜ì •ëœ ë¡œë”© ìˆœì„œ ì ìš© -->
    <!-- Phase 1: ê¸°ë³¸ ì„¤ì • -->
    <script type="module" src="./js/config.js"></script>
    <script type="module" src="./js/utils.js"></script>

    <!-- Phase 2: ì €ì¥ì†Œ ë° API -->
    <script type="module" src="./js/storage.js"></script>
    <script type="module" src="./js/api.js"></script>

    <!-- Phase 3: í•µì‹¬ ëª¨ë“ˆ -->
    <script type="module" src="./js/modules/navigation.js"></script>
    <script type="module" src="./js/modules/share.js"></script>

    <!-- í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ì½˜ì†” ë¡œê·¸ ìº¡ì²˜
        const consoleOutput = document.getElementById('console-output');
        const originalConsole = {
            log: console.log,
            info: console.info,
            warn: console.warn,
            error: console.error
        };

        function addToConsole(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const color = {
                log: '#00ff00',
                info: '#00bfff',
                warn: '#ffff00',
                error: '#ff4444'
            }[type] || '#00ff00';

            consoleOutput.innerHTML += `<div style="color: ${color}">[${timestamp}] ${message}</div>`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        // ì½˜ì†” ì˜¤ë²„ë¼ì´ë“œ
        console.log = (...args) => {
            originalConsole.log(...args);
            addToConsole(args.join(' '), 'log');
        };
        console.info = (...args) => {
            originalConsole.info(...args);
            addToConsole(args.join(' '), 'info');
        };
        console.warn = (...args) => {
            originalConsole.warn(...args);
            addToConsole(args.join(' '), 'warn');
        };
        console.error = (...args) => {
            originalConsole.error(...args);
            addToConsole(args.join(' '), 'error');
        };

        // ëª¨ë“ˆ ìƒíƒœ ì¶”ì 
        const moduleStates = {
            config: { name: 'CONFIG', status: 'pending' },
            utils: { name: 'UTILS', status: 'pending' },
            storage: { name: 'STORAGE', status: 'pending' },
            api: { name: 'API', status: 'pending' },
            navigation: { name: 'NAVIGATION', status: 'pending' },
            share: { name: 'SHARE', status: 'pending' }
        };

        // ëª¨ë“ˆ ì¤€ë¹„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        window.addEventListener('moduleReady', (e) => {
            const moduleName = e.detail.moduleName;
            if (moduleStates[moduleName]) {
                moduleStates[moduleName].status = 'ready';
                updateModuleStatus();
                console.info(`âœ… ${moduleName.toUpperCase()} ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ`);
            }
        });

        // ëª¨ë“ˆ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateModuleStatus() {
            const container = document.getElementById('module-status');
            container.innerHTML = '';

            Object.entries(moduleStates).forEach(([key, module]) => {
                const div = document.createElement('div');
                div.className = 'module-item';

                const statusClass = module.status === 'ready' ? 'status-ready' :
                                  module.status === 'failed' ? 'status-failed' : 'status-pending';

                div.innerHTML = `
                    <span>${module.name} ëª¨ë“ˆ</span>
                    <span class="module-status ${statusClass}">
                        ${module.status === 'ready' ? 'ì¤€ë¹„ë¨' :
                          module.status === 'failed' ? 'ì‹¤íŒ¨' : 'ë¡œë”©ì¤‘'}
                    </span>
                `;
                container.appendChild(div);
            });
        }

        // ì´ˆê¸° ëª¨ë“ˆ ìƒíƒœ í‘œì‹œ
        updateModuleStatus();

        // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        function testNavigation() {
            console.info('ğŸ§­ ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸ ì‹œì‘...');

            if (window.navigationManager) {
                console.log('âœ… navigationManager ê°ì²´ ì¡´ì¬í•¨');

                if (window.NavigationStatus && window.NavigationStatus.isReady) {
                    console.log('âœ… Navigation ëª¨ë“ˆì´ ì´ˆê¸°í™”ë¨');

                    // í…ŒìŠ¤íŠ¸ ë„¤ë¹„ê²Œì´ì…˜
                    const testSections = ['dashboard', 'budget', 'poi'];
                    testSections.forEach((section, index) => {
                        setTimeout(() => {
                            console.log(`ğŸ“ ì„¹ì…˜ ì´ë™ í…ŒìŠ¤íŠ¸: ${section}`);
                            if (window.navigationManager.navigateToSection) {
                                window.navigationManager.navigateToSection(section);
                                console.log(`âœ… ${section} ì„¹ì…˜ìœ¼ë¡œ ì´ë™ ì„±ê³µ`);
                            } else {
                                console.error(`âŒ navigateToSection ë©”ì„œë“œê°€ ì—†ìŒ`);
                            }
                        }, index * 1000);
                    });
                } else {
                    console.warn('âš ï¸ Navigation ëª¨ë“ˆì´ ì•„ì§ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ');
                }
            } else {
                console.error('âŒ navigationManager ê°ì²´ê°€ ì—†ìŒ');
            }
        }

        function testShare() {
            console.info('ğŸ“¤ ê³µìœ  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œì‘...');

            if (window.shareManager) {
                console.log('âœ… shareManager ê°ì²´ ì¡´ì¬í•¨');

                if (window.ShareStatus && window.ShareStatus.isReady) {
                    console.log('âœ… Share ëª¨ë“ˆì´ ì´ˆê¸°í™”ë¨');

                    // Web Share API ì§€ì› í™•ì¸
                    console.log(`ğŸ“± Web Share API ì§€ì›: ${window.shareManager.webShareSupported ? 'ì§€ì›ë¨' : 'ì§€ì›ë˜ì§€ ì•ŠìŒ'}`);

                    // í´ë¦½ë³´ë“œ ê³µìœ  í…ŒìŠ¤íŠ¸
                    if (window.shareManager.shareClipboard) {
                        console.log('ğŸ“‹ í´ë¦½ë³´ë“œ ê³µìœ  í…ŒìŠ¤íŠ¸...');
                        window.shareManager.shareClipboard({
                            title: 'í…ŒìŠ¤íŠ¸ ì œëª©',
                            description: 'í…ŒìŠ¤íŠ¸ ì„¤ëª…',
                            url: window.location.href
                        }).then(success => {
                            if (success) {
                                console.log('âœ… í´ë¦½ë³´ë“œ ê³µìœ  í…ŒìŠ¤íŠ¸ ì„±ê³µ');
                            } else {
                                console.warn('âš ï¸ í´ë¦½ë³´ë“œ ê³µìœ  í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨');
                            }
                        });
                    }
                } else {
                    console.warn('âš ï¸ Share ëª¨ë“ˆì´ ì•„ì§ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ');
                }
            } else {
                console.error('âŒ shareManager ê°ì²´ê°€ ì—†ìŒ');
            }
        }

        function testConfiguration() {
            console.info('âš™ï¸ ì„¤ì • í™•ì¸ í…ŒìŠ¤íŠ¸ ì‹œì‘...');

            if (window.CONFIG) {
                console.log('âœ… CONFIG ê°ì²´ ì¡´ì¬í•¨');
                console.log(`ğŸ“± ì•± ì´ë¦„: ${window.CONFIG.APP_NAME}`);
                console.log(`ğŸ“… ì—¬í–‰ ê¸°ê°„: ${window.CONFIG.TRIP_INFO.START_DATE} ~ ${window.CONFIG.TRIP_INFO.END_DATE}`);
                console.log(`ğŸ’° ì¼ì¼ ì˜ˆì‚°: Â¥${window.CONFIG.BUDGET.DAILY_TOTAL.toLocaleString()}`);
                console.log(`ğŸ—ºï¸ POI ì¹´í…Œê³ ë¦¬: ${Object.keys(window.CONFIG.POI.CATEGORIES).length}ê°œ`);
                console.log(`ğŸ”§ ë””ë²„ê·¸ ëª¨ë“œ: ${window.CONFIG.DEBUG.ENABLED ? 'í™œì„±' : 'ë¹„í™œì„±'}`);

                // ì„¤ì • ìœ íš¨ì„± ê²€ì‚¬
                if (window.validateConfig) {
                    const isValid = window.validateConfig();
                    console.log(`âœ… ì„¤ì • ìœ íš¨ì„±: ${isValid ? 'í†µê³¼' : 'ì‹¤íŒ¨'}`);
                } else {
                    console.warn('âš ï¸ validateConfig í•¨ìˆ˜ê°€ ì—†ìŒ');
                }
            } else {
                console.error('âŒ CONFIG ê°ì²´ê°€ ì—†ìŒ');
            }
        }

        function clearConsole() {
            consoleOutput.innerHTML = '';
        }

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ ìë™ í…ŒìŠ¤íŠ¸
        window.addEventListener('load', () => {
            setTimeout(() => {
                console.info('ğŸï¸ ë¯¸ì•¼ì½”ì§€ë§ˆ ì›¹ì•± ìˆ˜ì •ì‚¬í•­ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
                console.info('ğŸ“‹ ìë™ ì„¤ì • í™•ì¸ì„ ì‹œì‘í•©ë‹ˆë‹¤...');
                testConfiguration();
            }, 1000);
        });

        // ì˜¤ë¥˜ ìºì¹˜
        window.addEventListener('error', (e) => {
            console.error(`ğŸ’¥ JavaScript ì˜¤ë¥˜: ${e.message}`);
            console.error(`ğŸ“ íŒŒì¼: ${e.filename}:${e.lineno}:${e.colno}`);
        });

        // ëª¨ë“ˆ ë¡œë”© íƒ€ì„ì•„ì›ƒ ì²´í¬
        setTimeout(() => {
            const pendingModules = Object.entries(moduleStates)
                .filter(([key, module]) => module.status === 'pending')
                .map(([key, module]) => module.name);

            if (pendingModules.length > 0) {
                console.warn(`â° íƒ€ì„ì•„ì›ƒ: ë‹¤ìŒ ëª¨ë“ˆë“¤ì´ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ: ${pendingModules.join(', ')}`);
            } else {
                console.info('ğŸ‰ ëª¨ë“  ëª¨ë“ˆì´ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }, 10000);
    </script>
</body>
</html>