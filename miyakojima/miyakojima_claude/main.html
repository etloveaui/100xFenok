<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üèùÔ∏è ÎØ∏ÏïºÏΩîÏßÄÎßà Ïó¨Ìñâ Ïª¥Ìå®ÎãàÏñ∏</title>
    
    <!-- PWA Î©îÌÉÄ ÌÉúÍ∑∏ -->
    <meta name="theme-color" content="#1976D2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="description" content="ÍπÄÏùÄÌÉú & Ï†ïÏú†ÎØºÏùò ÎØ∏ÏïºÏΩîÏßÄÎßà Ïó¨ÌñâÏùÑ ÏúÑÌïú ÏôÑÏ†ÑÌïú AI Ïª¥Ìå®ÎãàÏñ∏">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- ÏïÑÏù¥ÏΩò -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Google Maps API -->
    <script>
        window.initMap = function() {
            window.mapsLoaded = true;
            if (window.initializeMap) {
                window.initializeMap();
            }
        }
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap&language=ko&region=JP&libraries=places">
    </script>
    
    <style>
        :root {
            /* Ïª¨Îü¨ ÏãúÏä§ÌÖú */
            --primary: #1976D2;
            --primary-light: #42A5F5;
            --primary-dark: #0D47A1;
            --secondary: #FF9800;
            --accent: #4CAF50;
            --error: #F44336;
            --warning: #FF9800;
            --success: #4CAF50;
            --info: #2196F3;
            
            /* Î∞∞Í≤Ω */
            --bg-primary: #FFFFFF;
            --bg-secondary: #F8F9FA;
            --bg-tertiary: #E3F2FD;
            --bg-glass: rgba(255, 255, 255, 0.95);
            
            /* ÌÖçÏä§Ìä∏ */
            --text-primary: #212121;
            --text-secondary: #757575;
            --text-hint: #BDBDBD;
            --text-white: #FFFFFF;
            
            /* Í∑∏Î¶ºÏûê */
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.2);
            
            /* Í∞ÑÍ≤© */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            
            /* Î∞òÏßÄÎ¶Ñ */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            /* Ìè∞Ìä∏ */
            --font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-xs: 12px;
            --font-sm: 14px;
            --font-base: 16px;
            --font-lg: 18px;
            --font-xl: 20px;
            --font-2xl: 24px;
            --font-3xl: 32px;
            
            /* Ïï†ÎãàÎ©îÏù¥ÏÖò */
            --transition: 0.3s ease;
            --transition-fast: 0.15s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            font-size: var(--font-base);
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Î°úÎî© Ïä§ÌÅ¨Î¶∞ */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-content {
            text-align: center;
            color: var(--text-white);
        }

        .loading-animation {
            font-size: 48px;
            margin-bottom: var(--space-lg);
            animation: float 2s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .loading-text {
            font-size: var(--font-lg);
            font-weight: 500;
            margin-bottom: var(--space-sm);
        }

        .loading-progress {
            font-size: var(--font-sm);
            opacity: 0.8;
        }

        /* Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà */
        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(20px);
        }

        /* Ìó§Îçî */
        .app-header {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-sm);
        }

        .header-content {
            padding: var(--space-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-md);
        }

        .app-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .title-icon {
            font-size: var(--font-2xl);
            animation: float 3s ease-in-out infinite;
        }

        .title-text h1 {
            font-size: var(--font-xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }

        .title-subtitle {
            font-size: var(--font-sm);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .status-indicators {
            display: flex;
            gap: var(--space-md);
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            background: rgba(25, 118, 210, 0.1);
            border-radius: var(--radius-lg);
            font-size: var(--font-sm);
            white-space: nowrap;
            border: 1px solid rgba(25, 118, 210, 0.2);
        }

        .status-item i {
            color: var(--primary);
        }

        /* ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò */
        .nav-tabs {
            display: flex;
            padding: 0 var(--space-lg);
            background: rgba(255, 255, 255, 0.05);
            overflow-x: auto;
        }

        .nav-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-md) var(--space-lg);
            border: none;
            background: none;
            color: var(--text-secondary);
            font-size: var(--font-xs);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-fast);
            border-radius: var(--radius-sm) var(--radius-sm) 0 0;
            position: relative;
            min-width: 80px;
        }

        .nav-tab i {
            font-size: var(--font-base);
        }

        .nav-tab:hover {
            color: var(--primary);
            background: rgba(25, 118, 210, 0.05);
        }

        .nav-tab.active {
            color: var(--primary);
            background: var(--bg-primary);
            border-bottom: 2px solid var(--primary);
        }

        .emergency-tab {
            color: var(--error) !important;
        }

        .emergency-tab.active {
            background: rgba(244, 67, 54, 0.1);
            border-bottom-color: var(--error);
        }

        /* Î©îÏù∏ ÏΩòÌÖêÏ∏† */
        .main-content {
            flex: 1;
            background: var(--bg-primary);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            margin-top: -var(--radius-xl);
            padding: var(--space-xl) var(--space-lg) 100px;
            min-height: 80vh;
        }

        .section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ÎåÄÏãúÎ≥¥Îìú ÏÑπÏÖò */
        .dashboard-grid {
            display: grid;
            gap: var(--space-lg);
            margin-bottom: var(--space-lg);
        }

        .card {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            padding: var(--space-lg);
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--font-lg);
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-title i {
            color: var(--primary);
        }

        .card-body {
            padding: var(--space-lg);
        }

        /* ÌòÑÏû¨ ÏúÑÏπò Ïπ¥Îìú */
        .location-info {
            background: linear-gradient(135deg, var(--bg-tertiary), rgba(25, 118, 210, 0.05));
            padding: var(--space-lg);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
        }

        .current-location {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-md);
        }

        .location-details h3 {
            font-weight: 600;
            margin-bottom: var(--space-xs);
        }

        .location-coords {
            font-size: var(--font-sm);
            color: var(--text-secondary);
        }

        .refresh-location {
            background: var(--primary);
            color: var(--text-white);
            border: none;
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .refresh-location:hover {
            background: var(--primary-dark);
        }

        /* Ï∂îÏ≤ú Î¶¨Ïä§Ìä∏ */
        .recommendations-list {
            display: grid;
            gap: var(--space-md);
        }

        .recommendation-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: var(--radius-md);
            transition: var(--transition-fast);
            cursor: pointer;
        }

        .recommendation-item:hover {
            border-color: var(--primary);
            background: rgba(25, 118, 210, 0.02);
        }

        .recommendation-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-lg);
            background: var(--bg-tertiary);
            flex-shrink: 0;
        }

        .recommendation-content {
            flex: 1;
        }

        .recommendation-name {
            font-weight: 600;
            margin-bottom: var(--space-xs);
        }

        .recommendation-details {
            display: flex;
            gap: var(--space-md);
            color: var(--text-secondary);
            font-size: var(--font-sm);
        }

        /* Îπ†Î•∏ Ïï°ÏÖò Í∑∏Î¶¨Îìú */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: var(--space-md);
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-lg);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: var(--radius-lg);
            background: var(--bg-primary);
            cursor: pointer;
            transition: var(--transition-fast);
            text-align: center;
            min-height: 100px;
        }

        .action-btn:hover {
            border-color: var(--primary);
            background: rgba(25, 118, 210, 0.02);
            transform: translateY(-2px);
        }

        .action-btn i {
            font-size: var(--font-xl);
            color: var(--primary);
        }

        .action-text {
            font-weight: 500;
            color: var(--text-primary);
        }

        .action-desc {
            font-size: var(--font-sm);
            color: var(--text-secondary);
        }

        /* ÏßÄÎèÑ ÏÑπÏÖò */
        .map-container {
            height: 70vh;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            position: relative;
        }

        .map-controls {
            position: absolute;
            top: var(--space-md);
            left: var(--space-md);
            right: var(--space-md);
            display: flex;
            gap: var(--space-sm);
            z-index: 100;
        }

        .map-control-btn {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            border: none;
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }

        .map-control-btn:hover {
            background: var(--primary);
            color: var(--text-white);
        }

        #google-map {
            width: 100%;
            height: 100%;
        }

        /* ÏùºÏ†ï ÏÑπÏÖò */
        .schedule-container {
            display: grid;
            gap: var(--space-lg);
        }

        .day-schedule {
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .day-header {
            background: var(--bg-tertiary);
            padding: var(--space-lg);
            font-weight: 600;
        }

        .schedule-item {
            padding: var(--space-md) var(--space-lg);
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .schedule-item:last-child {
            border-bottom: none;
        }

        .schedule-time {
            font-weight: 600;
            color: var(--primary);
            min-width: 80px;
        }

        .schedule-content {
            flex: 1;
            margin-left: var(--space-md);
        }

        .schedule-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .edit-btn, .delete-btn {
            background: none;
            border: none;
            padding: var(--space-xs);
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
        }

        .edit-btn:hover {
            background: rgba(25, 118, 210, 0.1);
            color: var(--primary);
        }

        .delete-btn:hover {
            background: rgba(244, 67, 54, 0.1);
            color: var(--error);
        }

        /* Î≤àÏó≠ ÏÑπÏÖò */
        .translator-container {
            display: grid;
            gap: var(--space-lg);
        }

        .translation-input {
            display: flex;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .input-text {
            flex: 1;
            padding: var(--space-md);
            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-md);
            font-family: var(--font-family);
            font-size: var(--font-base);
        }

        .translate-btn {
            background: var(--primary);
            color: var(--text-white);
            border: none;
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition-fast);
            white-space: nowrap;
        }

        .translate-btn:hover {
            background: var(--primary-dark);
        }

        .translation-result {
            background: var(--bg-secondary);
            padding: var(--space-lg);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
            min-height: 60px;
            display: flex;
            align-items: center;
            font-size: var(--font-lg);
        }

        /* ÏùëÍ∏â ÏÑπÏÖò */
        .emergency-grid {
            display: grid;
            gap: var(--space-lg);
        }

        .emergency-card {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border: 1px solid var(--error);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
        }

        .emergency-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            color: var(--error);
            font-weight: 600;
            margin-bottom: var(--space-md);
        }

        .emergency-content {
            color: var(--text-primary);
            line-height: 1.8;
        }

        /* ÌîåÎ°úÌåÖ Ïï°ÏÖò Î≤ÑÌäº */
        .fab-container {
            position: fixed;
            bottom: var(--space-xl);
            right: var(--space-xl);
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
            z-index: 1000;
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-lg);
        }

        .fab:hover {
            transform: scale(1.1);
        }

        .fab-emergency {
            background: var(--error);
            color: var(--text-white);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: var(--shadow-lg); }
            50% { box-shadow: 0 0 0 8px rgba(244, 67, 54, 0.3); }
        }

        .fab-translate {
            background: var(--secondary);
            color: var(--text-white);
        }

        .fab-location {
            background: var(--success);
            color: var(--text-white);
        }

        /* ÌÜ†Ïä§Ìä∏ ÏïåÎ¶º */
        .toast-container {
            position: fixed;
            top: var(--space-xl);
            right: var(--space-xl);
            z-index: 10000;
            pointer-events: none;
        }

        .toast {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-sm);
            transform: translateX(100%);
            transition: var(--transition);
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-success {
            border-left: 4px solid var(--success);
        }

        .toast-error {
            border-left: 4px solid var(--error);
        }

        .toast-warning {
            border-left: 4px solid var(--warning);
        }

        .toast-info {
            border-left: 4px solid var(--info);
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: var(--space-sm);
                align-items: stretch;
            }

            .status-indicators {
                justify-content: center;
            }

            .nav-tabs {
                padding: 0 var(--space-sm);
            }

            .nav-tab {
                min-width: 60px;
                padding: var(--space-sm) var(--space-md);
            }

            .main-content {
                padding: var(--space-lg) var(--space-md) 80px;
            }

            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }

            .fab-container {
                bottom: var(--space-lg);
                right: var(--space-lg);
            }

            .fab {
                width: 48px;
                height: 48px;
                font-size: var(--font-base);
            }
        }

        @media (max-width: 480px) {
            .title-text h1 {
                font-size: var(--font-lg);
            }

            .quick-actions {
                grid-template-columns: 1fr;
            }

            .map-container {
                height: 50vh;
            }
        }

        /* Îã§ÌÅ¨Î™®Îìú ÏßÄÏõê */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1e1e1e;
                --bg-secondary: #2d2d2d;
                --bg-glass: rgba(30, 30, 30, 0.95);
                --text-primary: #ffffff;
                --text-secondary: #b0b0b0;
            }
        }
    </style>
</head>
<body>
    <!-- Î°úÎî© Ïä§ÌÅ¨Î¶∞ -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-animation">üèùÔ∏è</div>
            <div class="loading-text">ÎØ∏ÏïºÏΩîÏßÄÎßà Ïó¨Ìñâ Ï§ÄÎπÑ Ï§ë...</div>
            <div class="loading-progress" id="loading-progress">ÏãúÏä§ÌÖú Ï¥àÍ∏∞Ìôî...</div>
        </div>
    </div>

    <!-- Î©îÏù∏ Ïï± -->
    <div id="app" class="app-container">
        <!-- Ìó§Îçî -->
        <header class="app-header">
            <div class="header-content">
                <div class="app-title">
                    <div class="title-icon">üèùÔ∏è</div>
                    <div class="title-text">
                        <h1>ÎØ∏ÏïºÏΩîÏßÄÎßà Ïª¥Ìå®ÎãàÏñ∏</h1>
                        <div class="title-subtitle">
                            <span>üìÖ 2025.9.27 - 10.1</span>
                            <span>üë´ ÏùÄÌÉú & Ïú†ÎØº</span>
                        </div>
                    </div>
                </div>
                
                <div class="status-indicators">
                    <div class="status-item" id="time-status">
                        <i class="fas fa-clock"></i>
                        <span id="current-time">--:--</span>
                        <small>JST</small>
                    </div>
                    
                    <div class="status-item" id="weather-status">
                        <i class="fas fa-sun" id="weather-icon"></i>
                        <span id="weather-temp">--¬∞C</span>
                        <span id="weather-desc">ÎßëÏùå</span>
                    </div>
                    
                    <div class="status-item" id="budget-status">
                        <i class="fas fa-yen-sign"></i>
                        <span id="budget-remaining">278</span>
                        <small>K JPY</small>
                    </div>
                </div>
            </div>
            
            <!-- ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
            <nav class="nav-tabs">
                <button class="nav-tab active" data-section="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Ìôà</span>
                </button>
                <button class="nav-tab" data-section="map">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>ÏßÄÎèÑ</span>
                </button>
                <button class="nav-tab" data-section="itinerary">
                    <i class="fas fa-calendar-check"></i>
                    <span>ÏùºÏ†ï</span>
                </button>
                <button class="nav-tab" data-section="budget">
                    <i class="fas fa-wallet"></i>
                    <span>ÏòàÏÇ∞</span>
                </button>
                <button class="nav-tab" data-section="translate">
                    <i class="fas fa-language"></i>
                    <span>Î≤àÏó≠</span>
                </button>
                <button class="nav-tab emergency-tab" data-section="emergency">
                    <i class="fas fa-first-aid"></i>
                    <span>ÏùëÍ∏â</span>
                </button>
            </nav>
        </header>

        <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
        <main class="main-content">
            <!-- ÎåÄÏãúÎ≥¥Îìú ÏÑπÏÖò -->
            <section id="dashboard-section" class="section active">
                <div class="dashboard-grid">
                    <!-- ÌòÑÏû¨ ÏúÑÏπò -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-map-marker-alt"></i>
                                ÏßÄÍ∏à Ïó¨Í∏∞ÏÑú Î≠êÌï†Íπå?
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="location-info">
                                <div class="current-location">
                                    <div class="location-details">
                                        <h3 id="current-location-name">ÏúÑÏπòÎ•º ÌôïÏù∏ÌïòÎäî Ï§ë...</h3>
                                        <div class="location-coords" id="location-coords">GPS ÎåÄÍ∏∞Ï§ë</div>
                                    </div>
                                    <button class="refresh-location" onclick="updateLocation()">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="recommendations-list" id="smart-recommendations">
                                <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê† Ï∂îÏ≤ú -->
                                <div class="recommendation-item">
                                    <div class="recommendation-icon">üçú</div>
                                    <div class="recommendation-content">
                                        <div class="recommendation-name">Ï∂îÏ≤ú Ïû•ÏÜåÎ•º Ï∞æÎäî Ï§ë...</div>
                                        <div class="recommendation-details">
                                            <span>GPS ÏúÑÏπò ÌôïÏù∏ ÌõÑ Ï£ºÎ≥Ä Î™ÖÏÜåÎ•º Ï∂îÏ≤úÌï¥ÎìúÎ¶ΩÎãàÎã§</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Îπ†Î•∏ Ïï°ÏÖò -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-bolt"></i>
                                Îπ†Î•∏ Ïï°ÏÖò
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="quick-actions">
                                <button class="action-btn" onclick="findNearby('restaurant')">
                                    <i class="fas fa-utensils"></i>
                                    <div class="action-text">ÎßõÏßë Ï∞æÍ∏∞</div>
                                    <div class="action-desc">Ï£ºÎ≥Ä ÏùåÏãùÏ†ê</div>
                                </button>
                                
                                <button class="action-btn" onclick="findNearby('shopping')">
                                    <i class="fas fa-shopping-bag"></i>
                                    <div class="action-text">ÏáºÌïë</div>
                                    <div class="action-desc">Ìé∏ÏùòÏ†ê/ÎßàÌä∏</div>
                                </button>
                                
                                <button class="action-btn" onclick="callTaxi()">
                                    <i class="fas fa-taxi"></i>
                                    <div class="action-text">ÌÉùÏãú</div>
                                    <div class="action-desc">Ìò∏Ï∂ú Ï†ïÎ≥¥</div>
                                </button>
                                
                                <button class="action-btn" onclick="openQuickTranslate()">
                                    <i class="fas fa-camera"></i>
                                    <div class="action-text">Î≤àÏó≠</div>
                                    <div class="action-desc">Î©îÎâ¥Ìåê/Í∞ÑÌåê</div>
                                </button>
                                
                                <button class="action-btn" onclick="openWeatherDetails()">
                                    <i class="fas fa-cloud-sun"></i>
                                    <div class="action-text">ÎÇ†Ïî®</div>
                                    <div class="action-desc">ÏÉÅÏÑ∏ Ï†ïÎ≥¥</div>
                                </button>
                                
                                <button class="action-btn" onclick="openDirections()">
                                    <i class="fas fa-route"></i>
                                    <div class="action-text">Í∏∏Ï∞æÍ∏∞</div>
                                    <div class="action-desc">Î™©Ï†ÅÏßÄ ÏïàÎÇ¥</div>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Ïò§ÎäòÏùò ÏùºÏ†ï -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-calendar-day"></i>
                                Ïò§ÎäòÏùò ÏùºÏ†ï
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="today-schedule">
                                <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê† ÏùºÏ†ï -->
                                <div class="schedule-item">
                                    <div class="schedule-time">09:00</div>
                                    <div class="schedule-content">
                                        <div class="schedule-title">Ìò∏ÌÖî Ï≤¥ÌÅ¨ÏïÑÏõÉ</div>
                                    </div>
                                </div>
                                <div class="schedule-item">
                                    <div class="schedule-time">10:30</div>
                                    <div class="schedule-content">
                                        <div class="schedule-title">ÎßàÏóêÌïòÎßà Ìï¥Î≥Ä Î∞©Î¨∏</div>
                                    </div>
                                </div>
                                <div class="schedule-item">
                                    <div class="schedule-time">12:00</div>
                                    <div class="schedule-content">
                                        <div class="schedule-title">Ï†êÏã¨ÏãùÏÇ¨ - ÌòÑÏßÄ Ïò§ÌÇ§ÎÇòÏôÄ ÏöîÎ¶¨</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ÏßÄÎèÑ ÏÑπÏÖò -->
            <section id="map-section" class="section">
                <div class="map-container">
                    <div class="map-controls">
                        <button class="map-control-btn" onclick="centerOnUser()">
                            <i class="fas fa-crosshairs"></i> ÎÇ¥ ÏúÑÏπò
                        </button>
                        <button class="map-control-btn" onclick="showAllPOIs()">
                            <i class="fas fa-map-marker-alt"></i> Ï†ÑÏ≤¥ Î™ÖÏÜå
                        </button>
                        <button class="map-control-btn" onclick="toggleTraffic()">
                            <i class="fas fa-road"></i> ÍµêÌÜµÏÉÅÌô©
                        </button>
                    </div>
                    <div id="google-map"></div>
                </div>
            </section>

            <!-- ÏùºÏ†ï ÏÑπÏÖò -->
            <section id="itinerary-section" class="section">
                <div class="schedule-container">
                    <div class="day-schedule">
                        <div class="day-header">
                            üìÖ 9Ïõî 27Ïùº (Í∏à) - ÎèÑÏ∞©Ïùº
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">15:30</div>
                            <div class="schedule-content">
                                <div class="schedule-title">ÎØ∏ÏïºÏΩîÍ≥µÌï≠ ÎèÑÏ∞©</div>
                                <div class="schedule-desc">Ìï≠Í≥µÌé∏: Ï≤¥ÌÅ¨Ïù∏ ÌõÑ Ìò∏ÌÖîÎ°ú Ïù¥Îèô</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">17:00</div>
                            <div class="schedule-content">
                                <div class="schedule-title">Ìò∏ÌÖî Ï≤¥ÌÅ¨Ïù∏</div>
                                <div class="schedule-desc">Ìú¥Ïãù Î∞è Ïßê Ï†ïÎ¶¨</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">19:00</div>
                            <div class="schedule-content">
                                <div class="schedule-title">Ï†ÄÎÖÅ ÏãùÏÇ¨</div>
                                <div class="schedule-desc">ÌòÑÏßÄ Ïù¥ÏûêÏπ¥Ïïº Ï≤¥Ìóò</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="day-schedule">
                        <div class="day-header">
                            üìÖ 9Ïõî 28Ïùº (ÌÜ†) - Í¥ÄÍ¥ë 1ÏùºÏ∞®
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">08:00</div>
                            <div class="schedule-content">
                                <div class="schedule-title">Ìò∏ÌÖî Ï°∞Ïãù</div>
                                <div class="schedule-desc">Î∑îÌéòÏãù ÏïÑÏπ®</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">09:30</div>
                            <div class="schedule-content">
                                <div class="schedule-title">ÎßàÏóêÌïòÎßà Ìï¥Î≥Ä</div>
                                <div class="schedule-desc">ÎèôÏñë ÏµúÍ≥†Ïùò Ìï¥Î≥ÄÏóêÏÑú Ìú¥Ïãù</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ÏòàÏÇ∞ ÏÑπÏÖò -->
            <section id="budget-section" class="section">
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-chart-pie"></i>
                                ÏòàÏÇ∞ ÌòÑÌô©
                            </div>
                        </div>
                        <div class="card-body">
                            <div style="text-align: center; margin-bottom: 2rem;">
                                <div style="font-size: 2rem; font-weight: bold; color: var(--primary);" id="total-budget">
                                    ¬•278,000
                                </div>
                                <div style="color: var(--text-secondary);">Ï¥ù ÏòàÏÇ∞</div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem;">
                                <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: var(--radius-md);">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--error);">¬•0</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">ÏÇ¨Ïö©</div>
                                </div>
                                
                                <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: var(--radius-md);">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--success);">¬•278,000</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">ÏûîÏï°</div>
                                </div>
                                
                                <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: var(--radius-md);">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">¬•55,600</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">ÏùºÌèâÍ∑†</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-plus"></i>
                                ÏßÄÏ∂ú Ï∂îÍ∞Ä
                            </div>
                        </div>
                        <div class="card-body">
                            <form onsubmit="addExpense(event)">
                                <div style="display: grid; gap: 1rem; margin-bottom: 1rem;">
                                    <input type="number" placeholder="Í∏àÏï° (JPY)" required>
                                    <input type="text" placeholder="ÎÇ¥Ïö©" required>
                                    <select required>
                                        <option value="">Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù</option>
                                        <option value="food">ÏãùÏÇ¨</option>
                                        <option value="transport">ÍµêÌÜµ</option>
                                        <option value="shopping">ÏáºÌïë</option>
                                        <option value="activity">Ïï°Ìã∞ÎπÑÌã∞</option>
                                        <option value="other">Í∏∞ÌÉÄ</option>
                                    </select>
                                </div>
                                <button type="submit" style="width: 100%; padding: 0.75rem; background: var(--primary); color: white; border: none; border-radius: var(--radius-md); cursor: pointer;">
                                    Ï∂îÍ∞ÄÌïòÍ∏∞
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Î≤àÏó≠ ÏÑπÏÖò -->
            <section id="translate-section" class="section">
                <div class="translator-container">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-language"></i>
                                Ïã§ÏãúÍ∞Ñ Î≤àÏó≠
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="translation-input">
                                <textarea class="input-text" placeholder="Î≤àÏó≠Ìï† ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." id="translate-input"></textarea>
                                <button class="translate-btn" onclick="translateText()">
                                    <i class="fas fa-exchange-alt"></i>
                                    Î≤àÏó≠
                                </button>
                            </div>
                            
                            <div class="translation-result" id="translation-result">
                                Î≤àÏó≠ Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§...
                            </div>

                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                                <button class="action-btn" onclick="insertPhrase('ÏïàÎÖïÌïòÏÑ∏Ïöî')">
                                    <i class="fas fa-hand-wave"></i>
                                    <div class="action-text">Ïù∏ÏÇ¨</div>
                                    <div class="action-desc">ÏïàÎÖïÌïòÏÑ∏Ïöî</div>
                                </button>
                                
                                <button class="action-btn" onclick="insertPhrase('ÌôîÏû•Ïã§Ïù¥ Ïñ¥ÎîîÏù∏Í∞ÄÏöî?')">
                                    <i class="fas fa-restroom"></i>
                                    <div class="action-text">ÌôîÏû•Ïã§</div>
                                    <div class="action-desc">ÏúÑÏπò Î¨∏Ïùò</div>
                                </button>
                                
                                <button class="action-btn" onclick="insertPhrase('Ïù¥Í≤ÉÏùÄ ÏñºÎßàÏù∏Í∞ÄÏöî?')">
                                    <i class="fas fa-yen-sign"></i>
                                    <div class="action-text">Í∞ÄÍ≤©</div>
                                    <div class="action-desc">Í∞ÄÍ≤© Î¨∏Ïùò</div>
                                </button>
                                
                                <button class="action-btn" onclick="insertPhrase('ÎèÑÏôÄÏ£ºÏÑ∏Ïöî')">
                                    <i class="fas fa-hand-paper"></i>
                                    <div class="action-text">ÎèÑÏõÄ</div>
                                    <div class="action-desc">ÎèÑÏõÄ ÏöîÏ≤≠</div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ÏùëÍ∏â ÏÑπÏÖò -->
            <section id="emergency-section" class="section">
                <div class="emergency-grid">
                    <div class="emergency-card">
                        <div class="emergency-title">
                            <i class="fas fa-hospital"></i>
                            ÏùëÍ∏âÏã§
                        </div>
                        <div class="emergency-content">
                            <strong>ÎØ∏ÏïºÏΩîÏßÄÎßà ÏãúÎ¶ΩÎ≥ëÏõê</strong><br>
                            üìû 0980-72-3751<br>
                            üìç ÎØ∏ÏïºÏΩîÏßÄÎßàÏãú ÌïòÎùºÎßà 1123-4<br>
                            24ÏãúÍ∞Ñ ÏùëÍ∏âÏã§ Ïö¥ÏòÅ
                        </div>
                    </div>

                    <div class="emergency-card">
                        <div class="emergency-title">
                            <i class="fas fa-shield-alt"></i>
                            Í≤ΩÏ∞∞ÏÑú
                        </div>
                        <div class="emergency-content">
                            <strong>ÎØ∏ÏïºÏΩîÏßÄÎßà Í≤ΩÏ∞∞ÏÑú</strong><br>
                            üìû 110 (ÏùëÍ∏â) / 0980-72-0110<br>
                            üìç ÎØ∏ÏïºÏΩîÏßÄÎßàÏãú ÌûàÎùºÎùº ÏÑúÏ™Ω 1-1<br>
                            ÌïúÍµ≠Ïñ¥ ÌÜµÏó≠ Í∞ÄÎä•
                        </div>
                    </div>

                    <div class="emergency-card">
                        <div class="emergency-title">
                            <i class="fas fa-flag"></i>
                            ÏòÅÏÇ¨Í¥Ä
                        </div>
                        <div class="emergency-content">
                            <strong>Ï£ºÎÇòÌïò ÌïúÍµ≠Ï¥ùÏòÅÏÇ¨Í¥Ä</strong><br>
                            üìû 098-876-4460<br>
                            üìß naha@mofa.go.kr<br>
                            ÏùëÍ∏âÏÉÅÌô© Ïãú 24ÏãúÍ∞Ñ Ïó∞ÎùΩ Í∞ÄÎä•
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-comment-medical"></i>
                                ÏùëÍ∏â ÏÉÅÌô© ÏùºÎ≥∏Ïñ¥
                            </div>
                        </div>
                        <div class="card-body">
                            <div style="display: grid; gap: 1rem;">
                                <div style="padding: 1rem; border: 1px solid var(--error); border-radius: var(--radius-md); background: rgba(244, 67, 54, 0.05);">
                                    <strong>ÎèÑÏôÄÏ£ºÏÑ∏Ïöî!</strong><br>
                                    „Åü„Åô„Åë„Å¶ÔºÅ (ÌÉÄÏä§ÏºÄÌÖå!)
                                </div>
                                
                                <div style="padding: 1rem; border: 1px solid var(--error); border-radius: var(--radius-md); background: rgba(244, 67, 54, 0.05);">
                                    <strong>Î≥ëÏõêÏóê Í∞ÄÍ≥† Ïã∂Ïñ¥Ïöî</strong><br>
                                    ÁóÖÈô¢„Å´Ë°å„Åç„Åü„ÅÑ„Åß„Åô (Îµ§Ïö∞Ïù∏Îãà Ïù¥ÌÇ§ÌÉÄÏù¥Îç∞Ïä§)
                                </div>
                                
                                <div style="padding: 1rem; border: 1px solid var(--error); border-radius: var(--radius-md); background: rgba(244, 67, 54, 0.05);">
                                    <strong>Íµ¨Í∏âÏ∞®Î•º Î∂àÎü¨Ï£ºÏÑ∏Ïöî</strong><br>
                                    ÊïëÊÄ•Ëªä„ÇíÂëº„Çì„Åß„Åè„Å†„Åï„ÅÑ (ÌÅêÌÅêÏÉ§Ïò§ ÏöòÎç∞Ïø†Îã§ÏÇ¨Ïù¥)
                                </div>
                                
                                <div style="padding: 1rem; border: 1px solid var(--error); border-radius: var(--radius-md); background: rgba(244, 67, 54, 0.05);">
                                    <strong>ÌïúÍµ≠ ÏòÅÏÇ¨Í¥ÄÏóê Ïó∞ÎùΩÌï¥Ï£ºÏÑ∏Ïöî</strong><br>
                                    ÈüìÂõΩÈ†ò‰∫ãÈ§®„Å´ÈÄ£Áµ°„Åó„Å¶„Åè„Å†„Åï„ÅÑ (Ïπ∏ÏΩîÏø† Î£åÏßÄÏπ∏Îãà Î†åÎùºÏø†ÏãúÌÖåÏø†Îã§ÏÇ¨Ïù¥)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ÌîåÎ°úÌåÖ Ïï°ÏÖò Î≤ÑÌäº -->
    <div class="fab-container">
        <button class="fab fab-emergency" onclick="switchToSection('emergency')" title="ÏùëÍ∏âÏÉÅÌô©">
            <i class="fas fa-exclamation-triangle"></i>
        </button>
        
        <button class="fab fab-translate" onclick="openQuickTranslate()" title="Îπ†Î•∏ Î≤àÏó≠">
            <i class="fas fa-language"></i>
        </button>
        
        <button class="fab fab-location" onclick="updateLocation()" title="ÎÇ¥ ÏúÑÏπò">
            <i class="fas fa-map-marker-alt"></i>
        </button>
    </div>

    <!-- ÌÜ†Ïä§Ìä∏ Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="toast-container" id="toast-container"></div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let currentLocation = null;
        let googleMap = null;
        let userMarker = null;
        let poiMarkers = [];
        let currentSection = 'dashboard';

        // Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            updateLoadingProgress('ÏúÑÏπò ÏÑúÎπÑÏä§ Ï¥àÍ∏∞Ìôî...');
            setTimeout(() => {
                updateLoadingProgress('ÏßÄÎèÑ Î°úÎî©...');
                setTimeout(() => {
                    updateLoadingProgress('Îç∞Ïù¥ÌÑ∞ ÎèôÍ∏∞Ìôî...');
                    setTimeout(() => {
                        updateLoadingProgress('ÏôÑÎ£å!');
                        hideLoadingScreen();
                        startApp();
                    }, 800);
                }, 1000);
            }, 500);
        }

        function updateLoadingProgress(text) {
            const progressEl = document.getElementById('loading-progress');
            if (progressEl) {
                progressEl.textContent = text;
            }
        }

        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.classList.add('hidden');
            }
        }

        function startApp() {
            updateTime();
            updateLocation();
            updateWeather();
            setupEventListeners();
            
            // Ï£ºÍ∏∞Ï†Å ÏóÖÎç∞Ïù¥Ìä∏
            setInterval(updateTime, 60000);
            setInterval(updateWeather, 600000);
        }

        function setupEventListeners() {
            // ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÌÉ≠
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const section = this.dataset.section;
                    switchToSection(section);
                });
            });
        }

        function switchToSection(sectionName) {
            // ÌÉ≠ ÏóÖÎç∞Ïù¥Ìä∏
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');

            // ÏÑπÏÖò ÏóÖÎç∞Ïù¥Ìä∏
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${sectionName}-section`).classList.add('active');

            currentSection = sectionName;

            // ÏÑπÏÖòÎ≥Ñ Ï¥àÍ∏∞Ìôî
            if (sectionName === 'map' && !googleMap) {
                initializeMap();
            }
        }

        function updateTime() {
            const now = new Date();
            const jstTime = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Tokyo"}));
            const timeString = jstTime.toLocaleTimeString('ko-KR', {
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            });
            
            const timeEl = document.getElementById('current-time');
            if (timeEl) {
                timeEl.textContent = timeString;
            }
        }

        function updateLocation() {
            if (!navigator.geolocation) {
                showToast('ÏúÑÏπò ÏÑúÎπÑÏä§Î•º ÏßÄÏõêÌïòÏßÄ ÏïäÎäî Î∏åÎùºÏö∞Ï†ÄÏûÖÎãàÎã§', 'error');
                return;
            }

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    currentLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude,
                        accuracy: position.coords.accuracy
                    };
                    
                    updateLocationDisplay();
                    generateRecommendations();
                    
                    if (googleMap && userMarker) {
                        userMarker.setPosition(currentLocation);
                        googleMap.setCenter(currentLocation);
                    }
                    
                    showToast('ÏúÑÏπòÍ∞Ä ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§', 'success');
                },
                function(error) {
                    console.error('ÏúÑÏπò Ïò§Î•ò:', error);
                    // ÎØ∏ÏïºÏΩîÏßÄÎßà Í∏∞Î≥∏ ÏúÑÏπò
                    currentLocation = {
                        lat: 24.7456,
                        lng: 125.2456,
                        accuracy: null,
                        isDefault: true
                    };
                    updateLocationDisplay();
                    generateRecommendations();
                    showToast('Í∏∞Î≥∏ ÏúÑÏπòÎ•º ÏÇ¨Ïö©Ìï©ÎãàÎã§', 'info');
                }
            );
        }

        function updateLocationDisplay() {
            const locationEl = document.getElementById('current-location-name');
            const coordsEl = document.getElementById('location-coords');
            
            if (locationEl) {
                if (currentLocation.isDefault) {
                    locationEl.textContent = 'ÎØ∏ÏïºÏΩîÏßÄÎßà (Í∏∞Î≥∏ ÏúÑÏπò)';
                    if (coordsEl) {
                        coordsEl.textContent = 'GPS ÎπÑÌôúÏÑ±Ìôî';
                    }
                } else {
                    locationEl.textContent = 'ÌòÑÏû¨ ÏúÑÏπò ÌôïÏù∏Îê®';
                    if (coordsEl) {
                        coordsEl.textContent = `Ï†ïÌôïÎèÑ: ${Math.round(currentLocation.accuracy)}m`;
                    }
                }
            }
        }

        function generateRecommendations() {
            const container = document.getElementById('smart-recommendations');
            if (!container) return;

            // ÏÉòÌîå Ï∂îÏ≤ú Îç∞Ïù¥ÌÑ∞
            const recommendations = [
                {
                    name: 'ÎßàÏóêÌïòÎßà Ìï¥Î≥Ä',
                    category: 'Ìï¥Î≥Ä',
                    distance: '2.1km',
                    icon: 'üèñÔ∏è',
                    rating: '4.8'
                },
                {
                    name: 'Ïù¥ÎùºÎ∂ÄÎåÄÍµê',
                    category: 'Í¥ÄÍ¥ëÏßÄ',
                    distance: '15km',
                    icon: 'üåâ',
                    rating: '4.6'
                },
                {
                    name: 'ÎØ∏ÏïºÏΩîÏÜåÎ∞î',
                    category: 'ÏùåÏãùÏ†ê',
                    distance: '800m',
                    icon: 'üçú',
                    rating: '4.5'
                }
            ];

            container.innerHTML = recommendations.map(item => `
                <div class="recommendation-item" onclick="showPOIDetails('${item.name}')">
                    <div class="recommendation-icon">${item.icon}</div>
                    <div class="recommendation-content">
                        <div class="recommendation-name">${item.name}</div>
                        <div class="recommendation-details">
                            <span><i class="fas fa-walking"></i> ${item.distance}</span>
                            <span><i class="fas fa-star"></i> ${item.rating}</span>
                            <span><i class="fas fa-tag"></i> ${item.category}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateWeather() {
            // ÏÉòÌîå ÎÇ†Ïî® Îç∞Ïù¥ÌÑ∞ (Ïã§Ï†úÎ°úÎäî OpenWeatherMap API ÏÇ¨Ïö©)
            const weather = {
                temp: 26,
                condition: 'clear',
                description: 'ÎßëÏùå'
            };

            const tempEl = document.getElementById('weather-temp');
            const descEl = document.getElementById('weather-desc');
            const iconEl = document.getElementById('weather-icon');

            if (tempEl) tempEl.textContent = `${weather.temp}¬∞C`;
            if (descEl) descEl.textContent = weather.description;
            
            if (iconEl) {
                const iconClass = weather.condition === 'clear' ? 'fa-sun' : 'fa-cloud';
                iconEl.className = `fas ${iconClass}`;
            }
        }

        function initializeMap() {
            if (!window.google || !window.google.maps) {
                console.error('Google Maps APIÍ∞Ä Î°úÎìúÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§');
                return;
            }

            const mapEl = document.getElementById('google-map');
            if (!mapEl) return;

            const mapCenter = currentLocation || { lat: 24.7456, lng: 125.2456 };
            
            googleMap = new google.maps.Map(mapEl, {
                zoom: 12,
                center: mapCenter,
                styles: [
                    {
                        "featureType": "water",
                        "elementType": "geometry",
                        "stylers": [{"color": "#e9e9e9"}, {"lightness": 17}]
                    }
                ]
            });

            // ÏÇ¨Ïö©Ïûê ÏúÑÏπò ÎßàÏª§
            if (currentLocation) {
                userMarker = new google.maps.Marker({
                    position: currentLocation,
                    map: googleMap,
                    title: 'ÌòÑÏû¨ ÏúÑÏπò',
                    icon: {
                        url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="8" fill="#1976D2" stroke="white" stroke-width="2"/>
                                <circle cx="12" cy="12" r="3" fill="white"/>
                            </svg>
                        `),
                        scaledSize: new google.maps.Size(24, 24)
                    }
                });
            }

            // POI ÎßàÏª§Îì§ Ï∂îÍ∞Ä
            addPOIMarkers();
        }

        function addPOIMarkers() {
            const pois = [
                {
                    name: 'ÎßàÏóêÌïòÎßà Ìï¥Î≥Ä',
                    position: { lat: 24.7906, lng: 125.2809 },
                    category: 'beach'
                },
                {
                    name: 'Ïù¥ÎùºÎ∂ÄÎåÄÍµê',
                    position: { lat: 24.8328, lng: 125.2442 },
                    category: 'bridge'
                }
            ];

            pois.forEach(poi => {
                const marker = new google.maps.Marker({
                    position: poi.position,
                    map: googleMap,
                    title: poi.name
                });

                const infoWindow = new google.maps.InfoWindow({
                    content: `
                        <div style="padding: 10px;">
                            <h3>${poi.name}</h3>
                            <p>Ïπ¥ÌÖåÍ≥†Î¶¨: ${poi.category}</p>
                            <button onclick="getDirections(${poi.position.lat}, ${poi.position.lng})" style="margin-top: 5px; padding: 5px 10px; background: #1976D2; color: white; border: none; border-radius: 4px; cursor: pointer;">Í∏∏Ï∞æÍ∏∞</button>
                        </div>
                    `
                });

                marker.addListener('click', () => {
                    infoWindow.open(googleMap, marker);
                });

                poiMarkers.push(marker);
            });
        }

        function centerOnUser() {
            if (currentLocation && googleMap) {
                googleMap.setCenter(currentLocation);
                googleMap.setZoom(15);
                showToast('ÌòÑÏû¨ ÏúÑÏπòÎ°ú Ïù¥ÎèôÌñàÏäµÎãàÎã§', 'info');
            } else {
                showToast('ÌòÑÏû¨ ÏúÑÏπòÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§', 'warning');
            }
        }

        function showAllPOIs() {
            if (googleMap && poiMarkers.length > 0) {
                const bounds = new google.maps.LatLngBounds();
                
                if (currentLocation) {
                    bounds.extend(currentLocation);
                }
                
                poiMarkers.forEach(marker => {
                    bounds.extend(marker.getPosition());
                });
                
                googleMap.fitBounds(bounds);
                showToast('Î™®Îì† Î™ÖÏÜåÎ•º ÌëúÏãúÌï©ÎãàÎã§', 'info');
            }
        }

        function toggleTraffic() {
            if (!googleMap) return;
            
            if (!window.trafficLayer) {
                window.trafficLayer = new google.maps.TrafficLayer();
                window.trafficLayer.setMap(googleMap);
                showToast('ÍµêÌÜµÏÉÅÌô©ÏùÑ ÌëúÏãúÌï©ÎãàÎã§', 'info');
            } else {
                window.trafficLayer.setMap(
                    window.trafficLayer.getMap() ? null : googleMap
                );
                const isVisible = window.trafficLayer.getMap() !== null;
                showToast(isVisible ? 'ÍµêÌÜµÏÉÅÌô©ÏùÑ ÌëúÏãúÌï©ÎãàÎã§' : 'ÍµêÌÜµÏÉÅÌô©ÏùÑ Ïà®ÍπÅÎãàÎã§', 'info');
            }
        }

        function findNearby(type) {
            let message = '';
            switch(type) {
                case 'restaurant':
                    message = 'Í∑ºÏ≤ò ÏùåÏãùÏ†êÏùÑ Í≤ÄÏÉâÌï©ÎãàÎã§';
                    break;
                case 'shopping':
                    message = 'Í∑ºÏ≤ò ÏáºÌïëÏãúÏÑ§ÏùÑ Í≤ÄÏÉâÌï©ÎãàÎã§';
                    break;
                default:
                    message = 'Í∑ºÏ≤ò ÏãúÏÑ§ÏùÑ Í≤ÄÏÉâÌï©ÎãàÎã§';
            }
            showToast(message, 'info');
        }

        function callTaxi() {
            showToast('ÌÉùÏãú Ìò∏Ï∂ú Ï†ïÎ≥¥: 0980-72-7777', 'info');
        }

        function openQuickTranslate() {
            switchToSection('translate');
            showToast('Î≤àÏó≠ Í∏∞Îä•ÏùÑ ÏãúÏûëÌï©ÎãàÎã§', 'info');
        }

        function openWeatherDetails() {
            showToast('ÏÉÅÏÑ∏ ÎÇ†Ïî® Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï©ÎãàÎã§', 'info');
        }

        function openDirections() {
            showToast('Í∏∏Ï∞æÍ∏∞ ÏÑúÎπÑÏä§Î•º ÏãúÏûëÌï©ÎãàÎã§', 'info');
        }

        function translateText() {
            const input = document.getElementById('translate-input').value.trim();
            if (!input) {
                showToast('Î≤àÏó≠Ìï† ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî', 'warning');
                return;
            }

            const resultEl = document.getElementById('translation-result');
            resultEl.textContent = 'Î≤àÏó≠ Ï§ë...';

            // Í∞ÑÎã®Ìïú Î≤àÏó≠ ÏÉòÌîå (Ïã§Ï†úÎ°úÎäî Google Translate API ÏÇ¨Ïö©)
            setTimeout(() => {
                const translations = {
                    'ÏïàÎÖïÌïòÏÑ∏Ïöî': '„Åì„Çì„Å´„Å°„ÅØ (Konnichiwa)',
                    'Í∞êÏÇ¨Ìï©ÎãàÎã§': '„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô (Arigatou gozaimasu)',
                    'ÌôîÏû•Ïã§Ïù¥ Ïñ¥ÎîîÏù∏Í∞ÄÏöî?': '„Éà„Ç§„É¨„ÅØ„Å©„Åì„Åß„Åô„ÅãÔºü (Toire wa doko desu ka?)',
                    'Ïù¥Í≤ÉÏùÄ ÏñºÎßàÏù∏Í∞ÄÏöî?': '„Åì„Çå„ÅØ„ÅÑ„Åè„Çâ„Åß„Åô„ÅãÔºü (Kore wa ikura desu ka?)',
                    'ÎèÑÏôÄÏ£ºÏÑ∏Ïöî': 'Âä©„Åë„Å¶„Åè„Å†„Åï„ÅÑ (Tasukete kudasai)'
                };

                const result = translations[input] || `[Î≤àÏó≠ Í≤∞Í≥º: ${input}]`;
                resultEl.textContent = result;
                showToast('Î≤àÏó≠Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§', 'success');
            }, 1000);
        }

        function insertPhrase(phrase) {
            const inputEl = document.getElementById('translate-input');
            if (inputEl) {
                inputEl.value = phrase;
                translateText();
            }
        }

        function addExpense(event) {
            event.preventDefault();
            showToast('ÏßÄÏ∂úÏù¥ Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§', 'success');
            event.target.reset();
        }

        function getDirections(lat, lng) {
            const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
            window.open(url, '_blank');
        }

        function showPOIDetails(name) {
            showToast(`${name} ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï©ÎãàÎã§`, 'info');
        }

        function showToast(message, type = 'info', duration = 3000) {
            const container = document.getElementById('toast-container');
            if (!container) return;

            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px;">
                    <i class="fas ${getToastIcon(type)}"></i>
                    <span>${message}</span>
                </div>
            `;

            container.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => container.removeChild(toast), 300);
            }, duration);
        }

        function getToastIcon(type) {
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-times-circle',
                warning: 'fa-exclamation-triangle',
                info: 'fa-info-circle'
            };
            return icons[type] || icons.info;
        }

        // Google Maps Ï¥àÍ∏∞Ìôî ÏΩúÎ∞±
        window.initializeMap = function() {
            if (currentSection === 'map') {
                initializeMap();
            }
        };
    </script>
</body>
</html>