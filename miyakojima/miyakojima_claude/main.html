<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ğŸï¸ ë¯¸ì•¼ì½”ì§€ë§ˆ ì—¬í–‰ ì»´íŒ¨ë‹ˆì–¸</title>
    
    <!-- PWA ë©”íƒ€ íƒœê·¸ -->
    <meta name="theme-color" content="#1976D2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="description" content="ê¹€ì€íƒœ & ì •ìœ ë¯¼ì˜ ë¯¸ì•¼ì½”ì§€ë§ˆ ì—¬í–‰ì„ ìœ„í•œ ì™„ì „í•œ AI ì»´íŒ¨ë‹ˆì–¸">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- ì•„ì´ì½˜ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Google Maps API -->
    <script>
        window.initMap = function() {
            window.mapsLoaded = true;
            if (window.initializeMap) {
                window.initializeMap();
            }
        }
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap&language=ko&region=JP&libraries=places">
    </script>
    
    <style>
        :root {
            /* ì»¬ëŸ¬ ì‹œìŠ¤í…œ */
            --primary: #1976D2;
            --primary-light: #42A5F5;
            --primary-dark: #0D47A1;
            --secondary: #FF9800;
            --accent: #4CAF50;
            --error: #F44336;
            --warning: #FF9800;
            --success: #4CAF50;
            --info: #2196F3;
            
            /* ë°°ê²½ */
            --bg-primary: #FFFFFF;
            --bg-secondary: #F8F9FA;
            --bg-tertiary: #E3F2FD;
            --bg-glass: rgba(255, 255, 255, 0.95);
            
            /* í…ìŠ¤íŠ¸ */
            --text-primary: #212121;
            --text-secondary: #757575;
            --text-hint: #BDBDBD;
            --text-white: #FFFFFF;
            
            /* ê·¸ë¦¼ì */
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.2);
            
            /* ê°„ê²© */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            
            /* ë°˜ì§€ë¦„ */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            /* í°íŠ¸ */
            --font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-xs: 12px;
            --font-sm: 14px;
            --font-base: 16px;
            --font-lg: 18px;
            --font-xl: 20px;
            --font-2xl: 24px;
            --font-3xl: 32px;
            
            /* ì• ë‹ˆë©”ì´ì…˜ */
            --transition: 0.3s ease;
            --transition-fast: 0.15s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            font-size: var(--font-base);
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ë¡œë”© ìŠ¤í¬ë¦° */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-content {
            text-align: center;
            color: var(--text-white);
        }

        .loading-animation {
            font-size: 48px;
            margin-bottom: var(--space-lg);
            animation: float 2s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .loading-text {
            font-size: var(--font-lg);
            font-weight: 500;
            margin-bottom: var(--space-sm);
        }

        .loading-progress {
            font-size: var(--font-sm);
            opacity: 0.8;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(20px);
        }

        /* í—¤ë” */
        .app-header {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-sm);
        }

        .header-content {
            padding: var(--space-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-md);
        }

        .app-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .title-icon {
            font-size: var(--font-2xl);
            animation: float 3s ease-in-out infinite;
        }

        .title-text h1 {
            font-size: var(--font-xl);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }

        .title-subtitle {
            font-size: var(--font-sm);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .status-indicators {
            display: flex;
            gap: var(--space-md);
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            background: rgba(25, 118, 210, 0.1);
            border-radius: var(--radius-lg);
            font-size: var(--font-sm);
            white-space: nowrap;
            border: 1px solid rgba(25, 118, 210, 0.2);
        }

        .status-item i {
            color: var(--primary);
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ */
        .nav-tabs {
            display: flex;
            padding: 0 var(--space-lg);
            background: rgba(255, 255, 255, 0.05);
            overflow-x: auto;
        }

        .nav-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-md) var(--space-lg);
            border: none;
            background: none;
            color: var(--text-secondary);
            font-size: var(--font-xs);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-fast);
            border-radius: var(--radius-sm) var(--radius-sm) 0 0;
            position: relative;
            min-width: 80px;
        }

        .nav-tab i {
            font-size: var(--font-base);
        }

        .nav-tab:hover {
            color: var(--primary);
            background: rgba(25, 118, 210, 0.05);
        }

        .nav-tab.active {
            color: var(--primary);
            background: var(--bg-primary);
            border-bottom: 2px solid var(--primary);
        }

        .emergency-tab {
            color: var(--error) !important;
        }

        .emergency-tab.active {
            background: rgba(244, 67, 54, 0.1);
            border-bottom-color: var(--error);
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            flex: 1;
            background: var(--bg-primary);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            margin-top: -var(--radius-xl);
            padding: var(--space-xl) var(--space-lg) 100px;
            min-height: 80vh;
        }

        .section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ */
        .dashboard-grid {
            display: grid;
            gap: var(--space-lg);
            margin-bottom: var(--space-lg);
        }

        .card {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            padding: var(--space-lg);
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--font-lg);
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-title i {
            color: var(--primary);
        }

        .card-body {
            padding: var(--space-lg);
        }

        /* í˜„ì¬ ìœ„ì¹˜ ì¹´ë“œ */
        .location-info {
            background: linear-gradient(135deg, var(--bg-tertiary), rgba(25, 118, 210, 0.05));
            padding: var(--space-lg);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
        }

        .current-location {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-md);
        }

        .location-details h3 {
            font-weight: 600;
            margin-bottom: var(--space-xs);
        }

        .location-coords {
            font-size: var(--font-sm);
            color: var(--text-secondary);
        }

        .refresh-location {
            background: var(--primary);
            color: var(--text-white);
            border: none;
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .refresh-location:hover {
            background: var(--primary-dark);
        }

        /* ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ */
        .recommendations-list {
            display: grid;
            gap: var(--space-md);
        }

        .recommendation-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: var(--radius-md);
            transition: var(--transition-fast);
            cursor: pointer;
        }

        .recommendation-item:hover {
            border-color: var(--primary);
            background: rgba(25, 118, 210, 0.02);
        }

        .recommendation-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-lg);
            background: var(--bg-tertiary);
            flex-shrink: 0;
        }

        .recommendation-content {
            flex: 1;
        }

        .recommendation-name {
            font-weight: 600;
            margin-bottom: var(--space-xs);
        }

        .recommendation-details {
            display: flex;
            gap: var(--space-md);
            color: var(--text-secondary);
            font-size: var(--font-sm);
        }

        /* ë¹ ë¥¸ ì•¡ì…˜ ê·¸ë¦¬ë“œ */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: var(--space-md);
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-lg);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: var(--radius-lg);
            background: var(--bg-primary);
            cursor: pointer;
            transition: var(--transition-fast);
            text-align: center;
            min-height: 100px;
        }

        .action-btn:hover {
            border-color: var(--primary);
            background: rgba(25, 118, 210, 0.02);
            transform: translateY(-2px);
        }

        .action-btn i {
            font-size: var(--font-xl);
            color: var(--primary);
        }

        .action-text {
            font-weight: 500;
            color: var(--text-primary);
        }

        .action-desc {
            font-size: var(--font-sm);
            color: var(--text-secondary);
        }

        /* ì§€ë„ ì„¹ì…˜ */
        .map-container {
            height: 70vh;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            position: relative;
        }

        .map-controls {
            position: absolute;
            top: var(--space-md);
            left: var(--space-md);
            right: var(--space-md);
            display: flex;
            gap: var(--space-sm);
            z-index: 100;
        }

        .map-control-btn {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            border: none;
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }

        .map-control-btn:hover {
            background: var(--primary);
            color: var(--text-white);
        }

        #google-map {
            width: 100%;
            height: 100%;
        }

        /* ì¼ì • ì„¹ì…˜ */
        .schedule-container {
            display: grid;
            gap: var(--space-lg);
        }

        .day-schedule {
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .day-header {
            background: var(--bg-tertiary);
            padding: var(--space-lg);
            font-weight: 600;
        }

        .schedule-item {
            padding: var(--space-md) var(--space-lg);
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .schedule-item:last-child {
            border-bottom: none;
        }

        .schedule-time {
            font-weight: 600;
            color: var(--primary);
            min-width: 80px;
        }

        .schedule-content {
            flex: 1;
            margin-left: var(--space-md);
        }

        .schedule-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .edit-btn, .delete-btn {
            background: none;
            border: none;
            padding: var(--space-xs);
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
        }

        .edit-btn:hover {
            background: rgba(25, 118, 210, 0.1);
            color: var(--primary);
        }

        .delete-btn:hover {
            background: rgba(244, 67, 54, 0.1);
            color: var(--error);
        }

        /* ë²ˆì—­ ì„¹ì…˜ */
        .translator-container {
            display: grid;
            gap: var(--space-lg);
        }

        .translation-input {
            display: flex;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .input-text {
            flex: 1;
            padding: var(--space-md);
            border: 1px solid rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-md);
            font-family: var(--font-family);
            font-size: var(--font-base);
        }

        .translate-btn {
            background: var(--primary);
            color: var(--text-white);
            border: none;
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition-fast);
            white-space: nowrap;
        }

        .translate-btn:hover {
            background: var(--primary-dark);
        }

        .translation-result {
            background: var(--bg-secondary);
            padding: var(--space-lg);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
            min-height: 60px;
            display: flex;
            align-items: center;
            font-size: var(--font-lg);
        }

        /* ì‘ê¸‰ ì„¹ì…˜ */
        .emergency-grid {
            display: grid;
            gap: var(--space-lg);
        }

        .emergency-card {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border: 1px solid var(--error);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
        }

        .emergency-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            color: var(--error);
            font-weight: 600;
            margin-bottom: var(--space-md);
        }

        .emergency-content {
            color: var(--text-primary);
            line-height: 1.8;
        }

        /* í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ */
        .fab-container {
            position: fixed;
            bottom: var(--space-xl);
            right: var(--space-xl);
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
            z-index: 1000;
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-lg);
        }

        .fab:hover {
            transform: scale(1.1);
        }

        .fab-emergency {
            background: var(--error);
            color: var(--text-white);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: var(--shadow-lg); }
            50% { box-shadow: 0 0 0 8px rgba(244, 67, 54, 0.3); }
        }

        .fab-translate {
            background: var(--secondary);
            color: var(--text-white);
        }

        .fab-location {
            background: var(--success);
            color: var(--text-white);
        }

        /* í† ìŠ¤íŠ¸ ì•Œë¦¼ */
        .toast-container {
            position: fixed;
            top: var(--space-xl);
            right: var(--space-xl);
            z-index: 10000;
            pointer-events: none;
        }

        .toast {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-sm);
            transform: translateX(100%);
            transition: var(--transition);
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-success {
            border-left: 4px solid var(--success);
        }

        .toast-error {
            border-left: 4px solid var(--error);
        }

        .toast-warning {
            border-left: 4px solid var(--warning);
        }

        .toast-info {
            border-left: 4px solid var(--info);
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: var(--space-sm);
                align-items: stretch;
            }

            .status-indicators {
                justify-content: center;
            }

            .nav-tabs {
                padding: 0 var(--space-sm);
            }

            .nav-tab {
                min-width: 60px;
                padding: var(--space-sm) var(--space-md);
            }

            .main-content {
                padding: var(--space-lg) var(--space-md) 80px;
            }

            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }

            .fab-container {
                bottom: var(--space-lg);
                right: var(--space-lg);
            }

            .fab {
                width: 48px;
                height: 48px;
                font-size: var(--font-base);
            }
        }

        @media (max-width: 480px) {
            .title-text h1 {
                font-size: var(--font-lg);
            }

            .quick-actions {
                grid-template-columns: 1fr;
            }

            .map-container {
                height: 50vh;
            }
        }

        /* ë‹¤í¬ëª¨ë“œ ì§€ì› */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #1e1e1e;
                --bg-secondary: #2d2d2d;
                --bg-glass: rgba(30, 30, 30, 0.95);
                --text-primary: #ffffff;
                --text-secondary: #b0b0b0;
            }
        }
    </style>
</head>
<body>
    <!-- ë¡œë”© ìŠ¤í¬ë¦° -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-animation">ğŸï¸</div>
            <div class="loading-text">ë¯¸ì•¼ì½”ì§€ë§ˆ ì—¬í–‰ ì¤€ë¹„ ì¤‘...</div>
            <div class="loading-progress" id="loading-progress">ì‹œìŠ¤í…œ ì´ˆê¸°í™”...</div>
        </div>
    </div>

    <!-- ë©”ì¸ ì•± -->
    <div id="app" class="app-container">
        <!-- í—¤ë” -->
        <header class="app-header">
            <div class="header-content">
                <div class="app-title">
                    <div class="title-icon">ğŸï¸</div>
                    <div class="title-text">
                        <h1>ë¯¸ì•¼ì½”ì§€ë§ˆ ì»´íŒ¨ë‹ˆì–¸</h1>
                        <div class="title-subtitle">
                            <span>ğŸ“… 2025.9.27 - 10.1</span>
                            <span>ğŸ‘« ì€íƒœ & ìœ ë¯¼</span>
                        </div>
                    </div>
                </div>
                
                <div class="status-indicators">
                    <div class="status-item" id="time-status">
                        <i class="fas fa-clock"></i>
                        <span id="current-time">--:--</span>
                        <small>JST</small>
                    </div>
                    
                    <div class="status-item" id="weather-status">
                        <i class="fas fa-sun" id="weather-icon"></i>
                        <span id="weather-temp">--Â°C</span>
                        <span id="weather-desc">ë§‘ìŒ</span>
                    </div>
                    
                    <div class="status-item" id="budget-status">
                        <i class="fas fa-yen-sign"></i>
                        <span id="budget-remaining">278</span>
                        <small>K JPY</small>
                    </div>
                </div>
            </div>
            
            <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
            <nav class="nav-tabs">
                <button class="nav-tab active" data-section="dashboard">
                    <i class="fas fa-home"></i>
                    <span>í™ˆ</span>
                </button>
                <button class="nav-tab" data-section="map">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>ì§€ë„</span>
                </button>
                <button class="nav-tab" data-section="itinerary">
                    <i class="fas fa-calendar-check"></i>
                    <span>ì¼ì •</span>
                </button>
                <button class="nav-tab" data-section="budget">
                    <i class="fas fa-wallet"></i>
                    <span>ì˜ˆì‚°</span>
                </button>
                <button class="nav-tab" data-section="translate">
                    <i class="fas fa-language"></i>
                    <span>ë²ˆì—­</span>
                </button>
                <button class="nav-tab emergency-tab" data-section="emergency">
                    <i class="fas fa-first-aid"></i>
                    <span>ì‘ê¸‰</span>
                </button>
            </nav>
        </header>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <main class="main-content">
            <!-- ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ -->
            <section id="dashboard-section" class="section active">
                <div class="dashboard-grid">
                    <!-- í˜„ì¬ ìœ„ì¹˜ -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-map-marker-alt"></i>
                                ì§€ê¸ˆ ì—¬ê¸°ì„œ ë­í• ê¹Œ?
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="location-info">
                                <div class="current-location">
                                    <div class="location-details">
                                        <h3 id="current-location-name">ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ëŠ” ì¤‘...</h3>
                                        <div class="location-coords" id="location-coords">GPS ëŒ€ê¸°ì¤‘</div>
                                    </div>
                                    <button class="refresh-location" onclick="updateLocation()">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="recommendations-list" id="smart-recommendations">
                                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ì¶”ì²œ -->
                                <div class="recommendation-item">
                                    <div class="recommendation-icon">ğŸœ</div>
                                    <div class="recommendation-content">
                                        <div class="recommendation-name">ì¶”ì²œ ì¥ì†Œë¥¼ ì°¾ëŠ” ì¤‘...</div>
                                        <div class="recommendation-details">
                                            <span>GPS ìœ„ì¹˜ í™•ì¸ í›„ ì£¼ë³€ ëª…ì†Œë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ë¹ ë¥¸ ì•¡ì…˜ -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-bolt"></i>
                                ë¹ ë¥¸ ì•¡ì…˜
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="quick-actions">
                                <button class="action-btn" onclick="findNearby('restaurant')">
                                    <i class="fas fa-utensils"></i>
                                    <div class="action-text">ë§›ì§‘ ì°¾ê¸°</div>
                                    <div class="action-desc">ì£¼ë³€ ìŒì‹ì </div>
                                </button>
                                
                                <button class="action-btn" onclick="findNearby('shopping')">
                                    <i class="fas fa-shopping-bag"></i>
                                    <div class="action-text">ì‡¼í•‘</div>
                                    <div class="action-desc">í¸ì˜ì /ë§ˆíŠ¸</div>
                                </button>
                                
                                <button class="action-btn" onclick="callTaxi()">
                                    <i class="fas fa-taxi"></i>
                                    <div class="action-text">íƒì‹œ</div>
                                    <div class="action-desc">í˜¸ì¶œ ì •ë³´</div>
                                </button>
                                
                                <button class="action-btn" onclick="openQuickTranslate()">
                                    <i class="fas fa-camera"></i>
                                    <div class="action-text">ë²ˆì—­</div>
                                    <div class="action-desc">ë©”ë‰´íŒ/ê°„íŒ</div>
                                </button>
                                
                                <button class="action-btn" onclick="openWeatherDetails()">
                                    <i class="fas fa-cloud-sun"></i>
                                    <div class="action-text">ë‚ ì”¨</div>
                                    <div class="action-desc">ìƒì„¸ ì •ë³´</div>
                                </button>
                                
                                <button class="action-btn" onclick="openDirections()">
                                    <i class="fas fa-route"></i>
                                    <div class="action-text">ê¸¸ì°¾ê¸°</div>
                                    <div class="action-desc">ëª©ì ì§€ ì•ˆë‚´</div>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ì˜¤ëŠ˜ì˜ ì¼ì • -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-calendar-day"></i>
                                ì˜¤ëŠ˜ì˜ ì¼ì •
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="today-schedule">
                                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ì¼ì • -->
                                <div class="schedule-item">
                                    <div class="schedule-time">09:00</div>
                                    <div class="schedule-content">
                                        <div class="schedule-title">í˜¸í…” ì²´í¬ì•„ì›ƒ</div>
                                    </div>
                                </div>
                                <div class="schedule-item">
                                    <div class="schedule-time">10:30</div>
                                    <div class="schedule-content">
                                        <div class="schedule-title">ë§ˆì—í•˜ë§ˆ í•´ë³€ ë°©ë¬¸</div>
                                    </div>
                                </div>
                                <div class="schedule-item">
                                    <div class="schedule-time">12:00</div>
                                    <div class="schedule-content">
                                        <div class="schedule-title">ì ì‹¬ì‹ì‚¬ - í˜„ì§€ ì˜¤í‚¤ë‚˜ì™€ ìš”ë¦¬</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ì§€ë„ ì„¹ì…˜ -->
            <section id="map-section" class="section">
                <div class="map-container">
                    <div class="map-controls">
                        <button class="map-control-btn" onclick="centerOnUser()">
                            <i class="fas fa-crosshairs"></i> ë‚´ ìœ„ì¹˜
                        </button>
                        <button class="map-control-btn" onclick="showAllPOIs()">
                            <i class="fas fa-map-marker-alt"></i> ì „ì²´ ëª…ì†Œ
                        </button>
                        <button class="map-control-btn" onclick="toggleTraffic()">
                            <i class="fas fa-road"></i> êµí†µìƒí™©
                        </button>
                    </div>
                    <div id="google-map"></div>
                </div>
            </section>

            <!-- ì¼ì • ì„¹ì…˜ -->
            <section id="itinerary-section" class="section">
                <div class="schedule-container">
                    <div class="day-schedule">
                        <div class="day-header">
                            ğŸ“… 9ì›” 27ì¼ (ê¸ˆ) - ë„ì°©ì¼
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">15:30</div>
                            <div class="schedule-content">
                                <div class="schedule-title">ë¯¸ì•¼ì½”ê³µí•­ ë„ì°©</div>
                                <div class="schedule-desc">í•­ê³µí¸: ì²´í¬ì¸ í›„ í˜¸í…”ë¡œ ì´ë™</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">17:00</div>
                            <div class="schedule-content">
                                <div class="schedule-title">í˜¸í…” ì²´í¬ì¸</div>
                                <div class="schedule-desc">íœ´ì‹ ë° ì§ ì •ë¦¬</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">19:00</div>
                            <div class="schedule-content">
                                <div class="schedule-title">ì €ë… ì‹ì‚¬</div>
                                <div class="schedule-desc">í˜„ì§€ ì´ìì¹´ì•¼ ì²´í—˜</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="day-schedule">
                        <div class="day-header">
                            ğŸ“… 9ì›” 28ì¼ (í† ) - ê´€ê´‘ 1ì¼ì°¨
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">08:00</div>
                            <div class="schedule-content">
                                <div class="schedule-title">í˜¸í…” ì¡°ì‹</div>
                                <div class="schedule-desc">ë·”í˜ì‹ ì•„ì¹¨</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">09:30</div>
                            <div class="schedule-content">
                                <div class="schedule-title">ë§ˆì—í•˜ë§ˆ í•´ë³€</div>
                                <div class="schedule-desc">ë™ì–‘ ìµœê³ ì˜ í•´ë³€ì—ì„œ íœ´ì‹</div>
                            </div>
                            <div class="schedule-actions">
                                <button class="edit-btn"><i class="fas fa-edit"></i></button>
                                <button class="delete-btn"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ì˜ˆì‚° ì„¹ì…˜ -->
            <section id="budget-section" class="section">
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-chart-pie"></i>
                                ì˜ˆì‚° í˜„í™©
                            </div>
                        </div>
                        <div class="card-body">
                            <div style="text-align: center; margin-bottom: 2rem;">
                                <div style="font-size: 2rem; font-weight: bold; color: var(--primary);" id="total-budget">
                                    Â¥278,000
                                </div>
                                <div style="color: var(--text-secondary);">ì´ ì˜ˆì‚°</div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem;">
                                <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: var(--radius-md);">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--error);">Â¥0</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">ì‚¬ìš©</div>
                                </div>
                                
                                <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: var(--radius-md);">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--success);">Â¥278,000</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">ì”ì•¡</div>
                                </div>
                                
                                <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: var(--radius-md);">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">Â¥55,600</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary);">ì¼í‰ê· </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-plus"></i>
                                ì§€ì¶œ ì¶”ê°€
                            </div>
                        </div>
                        <div class="card-body">
                            <form onsubmit="addExpense(event)">
                                <div style="display: grid; gap: 1rem; margin-bottom: 1rem;">
                                    <input type="number" placeholder="ê¸ˆì•¡ (JPY)" required>
                                    <input type="text" placeholder="ë‚´ìš©" required>
                                    <select required>
                                        <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                                        <option value="food">ì‹ì‚¬</option>
                                        <option value="transport">êµí†µ</option>
                                        <option value="shopping">ì‡¼í•‘</option>
                                        <option value="activity">ì•¡í‹°ë¹„í‹°</option>
                                        <option value="other">ê¸°íƒ€</option>
                                    </select>
                                </div>
                                <button type="submit" style="width: 100%; padding: 0.75rem; background: var(--primary); color: white; border: none; border-radius: var(--radius-md); cursor: pointer;">
                                    ì¶”ê°€í•˜ê¸°
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ë²ˆì—­ ì„¹ì…˜ -->
            <section id="translate-section" class="section">
                <div class="translator-container">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-language"></i>
                                ì‹¤ì‹œê°„ ë²ˆì—­
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="translation-input">
                                <textarea class="input-text" placeholder="ë²ˆì—­í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." id="translate-input"></textarea>
                                <button class="translate-btn" onclick="translateText()">
                                    <i class="fas fa-exchange-alt"></i>
                                    ë²ˆì—­
                                </button>
                            </div>
                            
                            <div class="translation-result" id="translation-result">
                                ë²ˆì—­ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...
                            </div>

                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                                <button class="action-btn" onclick="insertPhrase('ì•ˆë…•í•˜ì„¸ìš”')">
                                    <i class="fas fa-hand-wave"></i>
                                    <div class="action-text">ì¸ì‚¬</div>
                                    <div class="action-desc">ì•ˆë…•í•˜ì„¸ìš”</div>
                                </button>
                                
                                <button class="action-btn" onclick="insertPhrase('í™”ì¥ì‹¤ì´ ì–´ë””ì¸ê°€ìš”?')">
                                    <i class="fas fa-restroom"></i>
                                    <div class="action-text">í™”ì¥ì‹¤</div>
                                    <div class="action-desc">ìœ„ì¹˜ ë¬¸ì˜</div>
                                </button>
                                
                                <button class="action-btn" onclick="insertPhrase('ì´ê²ƒì€ ì–¼ë§ˆì¸ê°€ìš”?')">
                                    <i class="fas fa-yen-sign"></i>
                                    <div class="action-text">ê°€ê²©</div>
                                    <div class="action-desc">ê°€ê²© ë¬¸ì˜</div>
                                </button>
                                
                                <button class="action-btn" onclick="insertPhrase('ë„ì™€ì£¼ì„¸ìš”')">
                                    <i class="fas fa-hand-paper"></i>
                                    <div class="action-text">ë„ì›€</div>
                                    <div class="action-desc">ë„ì›€ ìš”ì²­</div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ì‘ê¸‰ ì„¹ì…˜ -->
            <section id="emergency-section" class="section">
                <div class="emergency-grid">
                    <div class="emergency-card">
                        <div class="emergency-title">
                            <i class="fas fa-hospital"></i>
                            ì‘ê¸‰ì‹¤
                        </div>
                        <div class="emergency-content">
                            <strong>ë¯¸ì•¼ì½”ì§€ë§ˆ ì‹œë¦½ë³‘ì›</strong><br>
                            ğŸ“ 0980-72-3751<br>
                            ğŸ“ ë¯¸ì•¼ì½”ì§€ë§ˆì‹œ í•˜ë¼ë§ˆ 1123-4<br>
                            24ì‹œê°„ ì‘ê¸‰ì‹¤ ìš´ì˜
                        </div>
                    </div>

                    <div class="emergency-card">
                        <div class="emergency-title">
                            <i class="fas fa-shield-alt"></i>
                            ê²½ì°°ì„œ
                        </div>
                        <div class="emergency-content">
                            <strong>ë¯¸ì•¼ì½”ì§€ë§ˆ ê²½ì°°ì„œ</strong><br>
                            ğŸ“ 110 (ì‘ê¸‰) / 0980-72-0110<br>
                            ğŸ“ ë¯¸ì•¼ì½”ì§€ë§ˆì‹œ íˆë¼ë¼ ì„œìª½ 1-1<br>
                            í•œêµ­ì–´ í†µì—­ ê°€ëŠ¥
                        </div>
                    </div>

                    <div class="emergency-card">
                        <div class="emergency-title">
                            <i class="fas fa-flag"></i>
                            ì˜ì‚¬ê´€
                        </div>
                        <div class="emergency-content">
                            <strong>ì£¼ë‚˜í•˜ í•œêµ­ì´ì˜ì‚¬ê´€</strong><br>
                            ğŸ“ 098-876-4460<br>
                            ğŸ“§ naha@mofa.go.kr<br>
                            ì‘ê¸‰ìƒí™© ì‹œ 24ì‹œê°„ ì—°ë½ ê°€ëŠ¥
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-comment-medical"></i>
                                ì‘ê¸‰ ìƒí™© ì¼ë³¸ì–´
                            </div>
                        </div>
                        <div class="card-body">
                            <div style="display: grid; gap: 1rem;">
                                <div style="padding: 1rem; border: 1px solid var(--error); border-radius: var(--radius-md); background: rgba(244, 67, 54, 0.05);">
                                    <strong>ë„ì™€ì£¼ì„¸ìš”!</strong><br>
                                    ãŸã™ã‘ã¦ï¼ (íƒ€ìŠ¤ì¼€í…Œ!)
                                </div>
                                
                                <div style="padding: 1rem; border: 1px solid var(--error); border-radius: var(--radius-md); background: rgba(244, 67, 54, 0.05);">
                                    <strong>ë³‘ì›ì— ê°€ê³  ì‹¶ì–´ìš”</strong><br>
                                    ç—…é™¢ã«è¡ŒããŸã„ã§ã™ (ëµ¤ìš°ì¸ë‹ˆ ì´í‚¤íƒ€ì´ë°ìŠ¤)
                                </div>
                                
                                <div style="padding: 1rem; border: 1px solid var(--error); border-radius: var(--radius-md); background: rgba(244, 67, 54, 0.05);">
                                    <strong>êµ¬ê¸‰ì°¨ë¥¼ ë¶ˆëŸ¬ì£¼ì„¸ìš”</strong><br>
                                    æ•‘æ€¥è»Šã‚’å‘¼ã‚“ã§ãã ã•ã„ (ííìƒ¤ì˜¤ ìš˜ë°ì¿ ë‹¤ì‚¬ì´)
                                </div>
                                
                                <div style="padding: 1rem; border: 1px solid var(--error); border-radius: var(--radius-md); background: rgba(244, 67, 54, 0.05);">
                                    <strong>í•œêµ­ ì˜ì‚¬ê´€ì— ì—°ë½í•´ì£¼ì„¸ìš”</strong><br>
                                    éŸ“å›½é ˜äº‹é¤¨ã«é€£çµ¡ã—ã¦ãã ã•ã„ (ì¹¸ì½”ì¿  ë£Œì§€ì¹¸ë‹ˆ ë Œë¼ì¿ ì‹œí…Œì¿ ë‹¤ì‚¬ì´)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼ -->
    <div class="fab-container">
        <button class="fab fab-emergency" onclick="switchToSection('emergency')" title="ì‘ê¸‰ìƒí™©">
            <i class="fas fa-exclamation-triangle"></i>
        </button>
        
        <button class="fab fab-translate" onclick="openQuickTranslate()" title="ë¹ ë¥¸ ë²ˆì—­">
            <i class="fas fa-language"></i>
        </button>
        
        <button class="fab fab-location" onclick="updateLocation()" title="ë‚´ ìœ„ì¹˜">
            <i class="fas fa-map-marker-alt"></i>
        </button>
    </div>

    <!-- í† ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ -->
    <div class="toast-container" id="toast-container"></div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentLocation = null;
        let googleMap = null;
        let userMarker = null;
        let poiMarkers = [];
        let currentSection = 'dashboard';

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            updateLoadingProgress('ìœ„ì¹˜ ì„œë¹„ìŠ¤ ì´ˆê¸°í™”...');
            setTimeout(() => {
                updateLoadingProgress('ì§€ë„ ë¡œë”©...');
                setTimeout(() => {
                    updateLoadingProgress('ë°ì´í„° ë™ê¸°í™”...');
                    setTimeout(() => {
                        updateLoadingProgress('ì™„ë£Œ!');
                        hideLoadingScreen();
                        startApp();
                    }, 800);
                }, 1000);
            }, 500);
        }

        function updateLoadingProgress(text) {
            const progressEl = document.getElementById('loading-progress');
            if (progressEl) {
                progressEl.textContent = text;
            }
        }

        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.classList.add('hidden');
            }
        }

        function startApp() {
            updateTime();
            updateLocation();
            updateWeather();
            setupEventListeners();
            
            // ì£¼ê¸°ì  ì—…ë°ì´íŠ¸
            setInterval(updateTime, 60000);
            setInterval(updateWeather, 600000);
        }

        function setupEventListeners() {
            // ë„¤ë¹„ê²Œì´ì…˜ íƒ­
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const section = this.dataset.section;
                    switchToSection(section);
                });
            });
        }

        function switchToSection(sectionName) {
            // íƒ­ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');

            // ì„¹ì…˜ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${sectionName}-section`).classList.add('active');

            currentSection = sectionName;

            // ì„¹ì…˜ë³„ ì´ˆê¸°í™”
            if (sectionName === 'map' && !googleMap) {
                initializeMap();
            }
        }

        function updateTime() {
            const now = new Date();
            const jstTime = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Tokyo"}));
            const timeString = jstTime.toLocaleTimeString('ko-KR', {
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            });
            
            const timeEl = document.getElementById('current-time');
            if (timeEl) {
                timeEl.textContent = timeString;
            }
        }

        function updateLocation() {
            if (!navigator.geolocation) {
                showToast('ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤', 'error');
                return;
            }

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    currentLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude,
                        accuracy: position.coords.accuracy
                    };
                    
                    updateLocationDisplay();
                    generateRecommendations();
                    
                    if (googleMap && userMarker) {
                        userMarker.setPosition(currentLocation);
                        googleMap.setCenter(currentLocation);
                    }
                    
                    showToast('ìœ„ì¹˜ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                },
                function(error) {
                    console.error('ìœ„ì¹˜ ì˜¤ë¥˜:', error);
                    // ë¯¸ì•¼ì½”ì§€ë§ˆ ê¸°ë³¸ ìœ„ì¹˜
                    currentLocation = {
                        lat: 24.7456,
                        lng: 125.2456,
                        accuracy: null,
                        isDefault: true
                    };
                    updateLocationDisplay();
                    generateRecommendations();
                    showToast('ê¸°ë³¸ ìœ„ì¹˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤', 'info');
                }
            );
        }

        function updateLocationDisplay() {
            const locationEl = document.getElementById('current-location-name');
            const coordsEl = document.getElementById('location-coords');
            
            if (locationEl) {
                if (currentLocation.isDefault) {
                    locationEl.textContent = 'ë¯¸ì•¼ì½”ì§€ë§ˆ (ê¸°ë³¸ ìœ„ì¹˜)';
                    if (coordsEl) {
                        coordsEl.textContent = 'GPS ë¹„í™œì„±í™”';
                    }
                } else {
                    locationEl.textContent = 'í˜„ì¬ ìœ„ì¹˜ í™•ì¸ë¨';
                    if (coordsEl) {
                        coordsEl.textContent = `ì •í™•ë„: ${Math.round(currentLocation.accuracy)}m`;
                    }
                }
            }
        }

        function generateRecommendations() {
            const container = document.getElementById('smart-recommendations');
            if (!container) return;

            // ìƒ˜í”Œ ì¶”ì²œ ë°ì´í„°
            const recommendations = [
                {
                    name: 'ë§ˆì—í•˜ë§ˆ í•´ë³€',
                    category: 'í•´ë³€',
                    distance: '2.1km',
                    icon: 'ğŸ–ï¸',
                    rating: '4.8'
                },
                {
                    name: 'ì´ë¼ë¶€ëŒ€êµ',
                    category: 'ê´€ê´‘ì§€',
                    distance: '15km',
                    icon: 'ğŸŒ‰',
                    rating: '4.6'
                },
                {
                    name: 'ë¯¸ì•¼ì½”ì†Œë°”',
                    category: 'ìŒì‹ì ',
                    distance: '800m',
                    icon: 'ğŸœ',
                    rating: '4.5'
                }
            ];

            container.innerHTML = recommendations.map(item => `
                <div class="recommendation-item" onclick="showPOIDetails('${item.name}')">
                    <div class="recommendation-icon">${item.icon}</div>
                    <div class="recommendation-content">
                        <div class="recommendation-name">${item.name}</div>
                        <div class="recommendation-details">
                            <span><i class="fas fa-walking"></i> ${item.distance}</span>
                            <span><i class="fas fa-star"></i> ${item.rating}</span>
                            <span><i class="fas fa-tag"></i> ${item.category}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateWeather() {
            // ìƒ˜í”Œ ë‚ ì”¨ ë°ì´í„° (ì‹¤ì œë¡œëŠ” OpenWeatherMap API ì‚¬ìš©)
            const weather = {
                temp: 26,
                condition: 'clear',
                description: 'ë§‘ìŒ'
            };

            const tempEl = document.getElementById('weather-temp');
            const descEl = document.getElementById('weather-desc');
            const iconEl = document.getElementById('weather-icon');

            if (tempEl) tempEl.textContent = `${weather.temp}Â°C`;
            if (descEl) descEl.textContent = weather.description;
            
            if (iconEl) {
                const iconClass = weather.condition === 'clear' ? 'fa-sun' : 'fa-cloud';
                iconEl.className = `fas ${iconClass}`;
            }
        }

        function initializeMap() {
            if (!window.google || !window.google.maps) {
                console.error('Google Maps APIê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
                return;
            }

            const mapEl = document.getElementById('google-map');
            if (!mapEl) return;

            const mapCenter = currentLocation || { lat: 24.7456, lng: 125.2456 };
            
            googleMap = new google.maps.Map(mapEl, {
                zoom: 12,
                center: mapCenter,
                styles: [
                    {
                        "featureType": "water",
                        "elementType": "geometry",
                        "stylers": [{"color": "#e9e9e9"}, {"lightness": 17}]
                    }
                ]
            });

            // ì‚¬ìš©ì ìœ„ì¹˜ ë§ˆì»¤
            if (currentLocation) {
                userMarker = new google.maps.Marker({
                    position: currentLocation,
                    map: googleMap,
                    title: 'í˜„ì¬ ìœ„ì¹˜',
                    icon: {
                        url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="8" fill="#1976D2" stroke="white" stroke-width="2"/>
                                <circle cx="12" cy="12" r="3" fill="white"/>
                            </svg>
                        `),
                        scaledSize: new google.maps.Size(24, 24)
                    }
                });
            }

            // POI ë§ˆì»¤ë“¤ ì¶”ê°€
            addPOIMarkers();
        }

        function addPOIMarkers() {
            const pois = [
                {
                    name: 'ë§ˆì—í•˜ë§ˆ í•´ë³€',
                    position: { lat: 24.7906, lng: 125.2809 },
                    category: 'beach'
                },
                {
                    name: 'ì´ë¼ë¶€ëŒ€êµ',
                    position: { lat: 24.8328, lng: 125.2442 },
                    category: 'bridge'
                }
            ];

            pois.forEach(poi => {
                const marker = new google.maps.Marker({
                    position: poi.position,
                    map: googleMap,
                    title: poi.name
                });

                const infoWindow = new google.maps.InfoWindow({
                    content: `
                        <div style="padding: 10px;">
                            <h3>${poi.name}</h3>
                            <p>ì¹´í…Œê³ ë¦¬: ${poi.category}</p>
                            <button onclick="getDirections(${poi.position.lat}, ${poi.position.lng})" style="margin-top: 5px; padding: 5px 10px; background: #1976D2; color: white; border: none; border-radius: 4px; cursor: pointer;">ê¸¸ì°¾ê¸°</button>
                        </div>
                    `
                });

                marker.addListener('click', () => {
                    infoWindow.open(googleMap, marker);
                });

                poiMarkers.push(marker);
            });
        }

        function centerOnUser() {
            if (currentLocation && googleMap) {
                googleMap.setCenter(currentLocation);
                googleMap.setZoom(15);
                showToast('í˜„ì¬ ìœ„ì¹˜ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤', 'info');
            } else {
                showToast('í˜„ì¬ ìœ„ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'warning');
            }
        }

        function showAllPOIs() {
            if (googleMap && poiMarkers.length > 0) {
                const bounds = new google.maps.LatLngBounds();
                
                if (currentLocation) {
                    bounds.extend(currentLocation);
                }
                
                poiMarkers.forEach(marker => {
                    bounds.extend(marker.getPosition());
                });
                
                googleMap.fitBounds(bounds);
                showToast('ëª¨ë“  ëª…ì†Œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤', 'info');
            }
        }

        function toggleTraffic() {
            if (!googleMap) return;
            
            if (!window.trafficLayer) {
                window.trafficLayer = new google.maps.TrafficLayer();
                window.trafficLayer.setMap(googleMap);
                showToast('êµí†µìƒí™©ì„ í‘œì‹œí•©ë‹ˆë‹¤', 'info');
            } else {
                window.trafficLayer.setMap(
                    window.trafficLayer.getMap() ? null : googleMap
                );
                const isVisible = window.trafficLayer.getMap() !== null;
                showToast(isVisible ? 'êµí†µìƒí™©ì„ í‘œì‹œí•©ë‹ˆë‹¤' : 'êµí†µìƒí™©ì„ ìˆ¨ê¹ë‹ˆë‹¤', 'info');
            }
        }

        function findNearby(type) {
            let message = '';
            switch(type) {
                case 'restaurant':
                    message = 'ê·¼ì²˜ ìŒì‹ì ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤';
                    break;
                case 'shopping':
                    message = 'ê·¼ì²˜ ì‡¼í•‘ì‹œì„¤ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤';
                    break;
                default:
                    message = 'ê·¼ì²˜ ì‹œì„¤ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤';
            }
            showToast(message, 'info');
        }

        function callTaxi() {
            showToast('íƒì‹œ í˜¸ì¶œ ì •ë³´: 0980-72-7777', 'info');
        }

        function openQuickTranslate() {
            switchToSection('translate');
            showToast('ë²ˆì—­ ê¸°ëŠ¥ì„ ì‹œì‘í•©ë‹ˆë‹¤', 'info');
        }

        function openWeatherDetails() {
            showToast('ìƒì„¸ ë‚ ì”¨ ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤', 'info');
        }

        function openDirections() {
            showToast('ê¸¸ì°¾ê¸° ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤', 'info');
        }

        function translateText() {
            const input = document.getElementById('translate-input').value.trim();
            if (!input) {
                showToast('ë²ˆì—­í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”', 'warning');
                return;
            }

            const resultEl = document.getElementById('translation-result');
            resultEl.textContent = 'ë²ˆì—­ ì¤‘...';

            // ê°„ë‹¨í•œ ë²ˆì—­ ìƒ˜í”Œ (ì‹¤ì œë¡œëŠ” Google Translate API ì‚¬ìš©)
            setTimeout(() => {
                const translations = {
                    'ì•ˆë…•í•˜ì„¸ìš”': 'ã“ã‚“ã«ã¡ã¯ (Konnichiwa)',
                    'ê°ì‚¬í•©ë‹ˆë‹¤': 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ (Arigatou gozaimasu)',
                    'í™”ì¥ì‹¤ì´ ì–´ë””ì¸ê°€ìš”?': 'ãƒˆã‚¤ãƒ¬ã¯ã©ã“ã§ã™ã‹ï¼Ÿ (Toire wa doko desu ka?)',
                    'ì´ê²ƒì€ ì–¼ë§ˆì¸ê°€ìš”?': 'ã“ã‚Œã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ (Kore wa ikura desu ka?)',
                    'ë„ì™€ì£¼ì„¸ìš”': 'åŠ©ã‘ã¦ãã ã•ã„ (Tasukete kudasai)'
                };

                const result = translations[input] || `[ë²ˆì—­ ê²°ê³¼: ${input}]`;
                resultEl.textContent = result;
                showToast('ë²ˆì—­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }, 1000);
        }

        function insertPhrase(phrase) {
            const inputEl = document.getElementById('translate-input');
            if (inputEl) {
                inputEl.value = phrase;
                translateText();
            }
        }

        function addExpense(event) {
            event.preventDefault();
            showToast('ì§€ì¶œì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            event.target.reset();
        }

        function getDirections(lat, lng) {
            const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
            window.open(url, '_blank');
        }

        function showPOIDetails(name) {
            showToast(`${name} ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤`, 'info');
        }

        function showToast(message, type = 'info', duration = 3000) {
            const container = document.getElementById('toast-container');
            if (!container) return;

            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px;">
                    <i class="fas ${getToastIcon(type)}"></i>
                    <span>${message}</span>
                </div>
            `;

            container.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => container.removeChild(toast), 300);
            }, duration);
        }

        function getToastIcon(type) {
            const icons = {
                success: 'fa-check-circle',
                error: 'fa-times-circle',
                warning: 'fa-exclamation-triangle',
                info: 'fa-info-circle'
            };
            return icons[type] || icons.info;
        }

        // Google Maps ì´ˆê¸°í™” ì½œë°±
        window.initializeMap = function() {
            if (currentSection === 'map') {
                initializeMap();
            }
        };
    </script>
</body>
</html>