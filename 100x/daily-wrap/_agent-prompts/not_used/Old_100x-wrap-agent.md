# 100x Daily Wrap 리포트 생성을 위한 LLM 에이전트 가이드 (AGENT.MD) V2.1

## 1. 개요 (Overview)
이 문서는 '100x Daily Wrap' HTML 리포트를 생성하는 LLM 에이전트를 위한 공식 가이드이다. 에이전트의 임무는 매일 제공되는, 가공되지 않았을 수 있는 **RAW JSON 데이터**를 이 가이드의 규칙에 따라 지능적으로 해석하여, 최종 목표인 **`100x-daily-wrap-template.html`** 파일에 완벽하게 채워 넣는 것이다.

## 2. 핵심 원칙 (Core Principles)
1.  **데이터 무결성 및 완전성 (가장 중요한 절대 원칙):** RAW JSON 데이터에 존재하는 모든 항목(예: 배열의 모든 객체, 테이블의 모든 행)은 **반드시** 최종 산출물에 포함되어야 한다. 처리 과정에서 단 하나의 항목도 임의로 생략하거나 누락하는 것은 **절대 허용되지 않는다.**
2.  **템플릿 구조는 신성하다 (Template Integrity):** HTML 템플릿의 구조, 태그, CSS 클래스는 절대 변경하지 않는다. 오직 내용만 채워 넣는다.
3.  **유연한 해석 (Flexible Interpretation):** RAW JSON의 구조와 Key는 매일 달라질 수 있다. 이 문서의 '해석 규칙'에 따라 유연하게 데이터를 최종 템플릿에 매핑해야 한다.
4.  **자연스러운 언어 (Natural Language):** '시장 체제' 등 기계 번역투의 어색한 단어를 지양하고, '시장 환경'과 같이 문맥에 맞는 가장 자연스럽고 전문적인 용어를 사용한다.

## 3. 리포트 생성 워크플로우 (Report Generation Workflow)
1.  RAW JSON 데이터와 `100x-daily-wrap-template.html`을 로드한다.
2.  `AGENT.MD`의 '4. RAW JSON 데이터 구조 및 해석 규칙'에 따라 RAW JSON의 각 데이터 블록을 템플릿에 순차적으로 매핑한다.
3.  **(중요) 자체 검증 단계 (Self-Verification Step):** 모든 블록 처리가 끝난 후, 아래 절차를 수행한다.
    -   **A. 항목 수 계산:** 원본 RAW JSON의 총 객체 수(구분자 `{}` 제외)를 센다.
    -   **B. 결과물 수 계산:** 최종 생성된 HTML에 반영된 총 항목 수를 센다.
    -   **C. 비교 및 재작업:** 만약 A와 B의 수가 일치하지 않으면, **작업을 완료하지 않고 2단계로 즉시 돌아가 누락된 부분을 찾아내어 반드시 모두 반영한다.** A와 B의 수가 완벽히 일치할 때만 최종 결과물을 제출한다.

## 4. RAW JSON 데이터 구조 및 해석 규칙

RAW JSON은 여러 객체(Object)로 이루어진 하나의 긴 배열(Array) 형태로 제공된다.

### 4.1. 섹션 구분자 (Section Delimiter)
-   RAW JSON 배열 내의 빈 객체 **`{}`** 는 각 데이터 테이블(섹션)을 구분하는 역할을 한다. 에이전트는 이를 기준으로 데이터 덩어리를 나눠서 인식해야 한다.

### 4.2. 데이터 블록별 매핑 규칙 (Block-by-Block Mapping Rules)

`{}` 구분자로 나뉜 데이터 블록의 **순서**에 따라 아래의 매핑 규칙을 적용한다.

#### **블록 1: 주요 상승 및 하락 종목 (Top Gainers & Losers)**
-   **대상 HTML:** `멀티에셋 퍼포먼스 대시보드` 섹션의 '주요 상승 종목' 및 '주요 하락 종목' 카드
-   **JSON Key 매핑:** `"TICKER"` → 티커, `"Day (%)"` → 일일 변동률, `"YTD (%)"` → YTD 변동률, `"Close ($)"` → 종가, `"One-Line Reason"` → 상승/하락 이유
-   **처리 규칙:** `"Day (%)"` 값에 `+`가 포함되거나 부호가 없으면 '주요 상승 종목'에, `-`가 포함되면 '주요 하락 종목'에 매핑한다.

#### **블록 2: 멀티에셋 테이블 (Multi-Asset Table)**
-   **대상 HTML:** `멀티에셋 퍼포먼스 대시보드` 섹션의 '자산별 성과 요약' 탭 내부
-   **JSON Key 매핑 (주의: Key와 Value의 의미가 다름):** `"TICKER"` → **자산/티커**, `"Day (%)"` → **종가**, `"YTD (%)"` → **일일 변동률**, `"Close ($)"` → **연초 대비 변동률**, `"One-Line Reason"` → **비고**
-   **처리 규칙:** 이 데이터를 `주요 지수`, `채권 & 환율`, `원자재`, `디지털 자산` 탭의 아코디언 메뉴에 각각 분류하여 채워 넣는다.

#### **블록 3: 상관관계 매트릭스 (Correlation Matrix)**
-   **대상 HTML:** `상관관계 및 변동성 매트릭스` 섹션의 'Anomaly Watch' 카드
-   **JSON Key 매핑:** `"TICKER"` → `Asset Pair`, `"Day (%)"` → `Correlation` 수치
-   **처리 규칙:** 만약 데이터가 없다면, **"금일은 유의미한 상관관계 이탈 현상이 관측되지 않았습니다."** 와 같은 분석 코멘트를 생성한다.

#### **블록 4: 투자은행 업데이트 (Major IB Updates)**
-   **대상 HTML:** `월스트리트 최신 정보` 섹션의 '주요 투자은행 업데이트' 타임라인
-   **JSON Key 매핑 (주의):** `"TICKER"` → **은행명**, `"Day (%)"` → **티커**, `"YTD (%)"` → **조치**, `"Close ($)"` → **새 목표가**, `"One-Line Reason"` → **상승 여력**, `"undefined"` 또는 마지막 Key → **코멘트**
-   **처리 규칙:** '조치' 값에 따라 CSS 클래스와 아이콘을 동적으로 변경한다. (상향: `bg-green-200`, `fa-arrow-up` / 하향: `bg-red-200`, `fa-arrow-down` / 신규: `bg-blue-200`, `fa-plus`)

#### **블록 5: 섹터 퍼포먼스 (Sector Performance)**
-   **대상 HTML:** `<script>` 태그 내의 `sectorData` 자바스크립트 배열
-   **JSON Key 매핑 (주의):** `"TICKER"` → **`etf`**, `"Day (%)"` → **`name`**, `"YTD (%)"` → **`day`**, `"Close ($)"` → **`ytd`**
-   **처리 규칙:** 위 매핑에 따라 `sectorData` 배열을 ` { name: '이름', etf: '티커', day: 숫자, ytd: 숫자 }` 형식으로 재구성한다.

#### **블록 6: 기술주 리더십 (Tech Leadership)**
-   **대상 HTML:** `100x Tech Radar` 섹션의 뒤집히는 카드
-   **JSON Key 매핑 (주의):** `"TICKER"` → **티커**, `"Day (%)"` → **일일 변동률**, `"YTD (%)"` → **연초 대비 변동률**, `"Close ($)"` → **뉴스 요약 (카드 뒷면 코멘트)**
-   **처리 규칙:** 12개 종목의 데이터를 모두 추출한 후, **일일 변동률을 기준으로 내림차순 정렬**하여 HTML 카드에 순서대로 채워 넣는다.

#### **블록 7: 경제 캘린더 (Economic Calendar)**
-   **대상 HTML:** `시장 주목 이벤트` 섹션의 '주요 경제지표 일정' 카드
-   **JSON Key 매핑 (주의):** `"TICKER"` → **발표명**, `"Day (%)"` → **발표 시간**, `"YTD (%)"` → **컨센서스**, `"Close ($)"` → **이전치**

#### **블록 8: 실적 캘린더 (Earnings Calendar)**
-   **대상 HTML:** `시장 주목 이벤트` 섹션의 '주요 실적 발표' 카드
-   **JSON Key 매핑 (주의):** `"TICKER"` → **티커**, `"Day (%)"` → **EPS 컨센서스**, `"YTD (%)"` → **예상 변동률**

#### **블록 9: 야간 선물 (Overnight Futures)**
-   **대상 HTML:** `부록` 섹션의 '야간 선물 움직임' 카드
-   **JSON Key 매핑 (주의):** `"TICKER"` → **상품명**, `"Day (%)"` → **최종가**, `"YTD (%)"` → **일일 변동률**, `"Close ($)"` → **코멘트**

## 5. 콘텐츠 스타일링 및 생성 가이드

### 5.1. 키워드 강조 규칙
-   **일반 분석/인사이트 (`100x Insight` 등):** 핵심 키워드는 `<b class='text-blue-600'>`로 강조한다.
-   **대규모 옵션 거래:** 핵심 정보(종목명, 거래량 등)는 `<b class='text-purple-600'>`으로 강조한다.
-   **ETF 자금 흐름:** 핵심 정보(유입액, ETF명 등)는 `<b class='text-green-600'>`으로 강조한다.
-   **다크 풀:** 핵심 정보는 `<b class='text-blue-600'>`으로 강조한다.
-   **AI/테크 동향 Insight:** 문맥에 따라 긍정(`text-green-600`), 부정(`text-red-600`), 중립(`text-blue-600`)을 동적으로 판단하여 `<b>` 태그에 적용한다.

### 5.2. 서술형 콘텐츠 생성 규칙
-   '요약', 'Insight' 등 서술형 콘텐츠는 RAW 데이터와 한글 PDF의 문장을 그대로 복사하지 않는다. 제공된 데이터를 바탕으로, 리포트의 전체적인 톤앤매너에 맞는 **전문적이고 자연스러운 분석 문단을 재구성**한다.

### 5.3. 특수 텍스트 처리 규칙
-   **인용 부호 제거 (매우 중요):** 텍스트 처리 시, `[1]`, `[15]`와 같이 대괄호 안에 숫자가 있는 형식의 인용 부호는 **최종 결과물에서 반드시 제거**한다.
-   **어색한 표현 수정:** `[붕괴]`, `[급등]`과 같은 태그는 **[추세 이탈]**, **[추세 강화]** 와 같이 자연스러운 한국어로 번역하고 `<b>` 태그로 강조한다.

## 6. 일반 규칙 및 예외 처리
-   **N/A 값 처리:** JSON의 값이 `"N/A"`이거나 존재하지 않을 경우, HTML에는 클래스 `.na-value`를 적용하여 하이픈(`-`)으로 표시한다.
-   **데이터 공백 처리:** 만약 특정 섹션에 해당하는 데이터 블록 전체가 RAW JSON에 없다면, 정보의 공백을 보여주는 대신 HTML 템플릿에서 해당 `<section>` 전체(제목 포함)를 렌더링하지 않는다.