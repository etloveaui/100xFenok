<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Google tag (gtag.js) - í˜¸ìŠ¤íŠ¸ë³„ ìë™ ì„ íƒ -->
  <script>
    (function() {
      const GA_IDS = {
        'etloveaui.github.io': 'G-X7MZFQZRBW',
        '100xfenok.pages.dev': 'G-BWHGXQPH2D'
      };
      const id = GA_IDS[location.hostname] || 'G-X7MZFQZRBW';
      const s = document.createElement('script');
      s.async = true;
      s.src = 'https://www.googletagmanager.com/gtag/js?id=' + id;
      document.head.appendChild(s);
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      window.gtag = gtag;
      gtag('js', new Date());
      gtag('config', id);
    })();
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>100x Market Radar | 100xFenok</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

  <style>
    /* ===== ê¸°ë³¸ ìŠ¤íƒ€ì¼ ===== */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      color: #1e293b;
      min-height: 100vh;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 32px 20px;
    }

    /* ===== í—¤ë” (íƒ€ì´í‹€ + íƒ­) ===== */
    .page-header {
      text-align: center;
      margin-bottom: 32px;
    }

    .page-title {
      font-family: 'Orbitron', monospace;
      font-size: 32px;
      font-weight: 700;
      color: #0f172a;
      margin-bottom: 8px;
    }

    /* íƒ€ì´í‹€ í…ìŠ¤íŠ¸ë§Œ ê·¸ë¼ë°ì´ì…˜ ì ìš© (ì´ëª¨ì§€ ì œì™¸) */
    .page-title {
      background: linear-gradient(135deg, #2563eb, #4f46e5);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* ì´ëª¨ì§€ ì•„ì´ì½˜ì€ ì›ë˜ ìƒ‰ìƒ ìœ ì§€ */
    .title-icon {
      -webkit-background-clip: initial !important;
      -webkit-text-fill-color: initial !important;
      background: none !important;
      color: inherit;
    }

    .page-subtitle {
      font-size: 14px;
      color: #64748b;
      font-weight: 500;
    }

    /* ===== ì¹´í…Œê³ ë¦¬ íƒ­ ===== */
    .category-tabs {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 24px;
      flex-wrap: wrap;
    }

    .tab-btn {
      border: none;
      background: #ffffff;
      padding: 10px 24px;
      font-size: 13px;
      font-weight: 600;
      color: #64748b;
      cursor: pointer;
      border-radius: 12px;
      transition: all 0.2s ease;
      border: 2px solid #e2e8f0;
    }

    .tab-btn:hover {
      background: #f8fafc;
      color: #1e293b;
      border-color: #cbd5e1;
    }

    .tab-btn.active {
      background: #2563eb;
      color: #ffffff;
      border-color: #2563eb;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    /* ===== Bento Box Grid (ë°˜ì‘í˜•) ===== */
    .card-grid {
      display: grid;
      gap: 20px;
      margin-top: 32px;
    }

    /* PC: 3ì—´ */
    @media (min-width: 1200px) {
      .card-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* íƒœë¸”ë¦¿: 2ì—´ */
    @media (min-width: 768px) and (max-width: 1199px) {
      .card-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* ëª¨ë°”ì¼: 1ì—´ */
    @media (max-width: 767px) {
      .card-grid {
        grid-template-columns: 1fr;
      }
    }

    /* ===== ì¹´ë“œ ê³µí†µ ìŠ¤íƒ€ì¼ ===== */
    .indicator-card {
      background: #ffffff;
      border-radius: 20px;
      border: 1px solid #e2e8f0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      overflow: hidden;
      transition: all 0.3s ease;
      cursor: pointer;
      min-height: 280px;
      display: flex;
      flex-direction: column;
    }

    .indicator-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }

    .indicator-card.disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .indicator-card.disabled:hover {
      transform: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    /* ===== ë¼ì´ë¸Œ ìœ„ì ¯ ì¹´ë“œ (iframe) ===== */
    .live-widget {
      padding: 0;
    }

    .live-widget iframe {
      width: 100%;
      height: 280px;
      border: none;
      display: block;
    }

    /* ===== ëª¨ë°”ì¼ ë°˜ì‘í˜• (2025-12-13) ===== */
    @media (max-width: 767px) {
      .live-widget iframe {
        height: 320px;
      }
    }

    @media (max-width: 400px) {
      .live-widget iframe {
        height: 360px;
      }
    }

    /* ===== Coming Soon ì¹´ë“œ ===== */
    .coming-soon {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      padding: 32px 24px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .cs-icon {
      width: 64px;
      height: 64px;
      background: rgba(37, 99, 235, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      margin-bottom: 16px;
      color: #2563eb;
    }

    .cs-title {
      font-family: 'Orbitron', monospace;
      font-size: 18px;
      font-weight: 700;
      color: #1e293b;
      margin-bottom: 8px;
    }

    .cs-category {
      font-size: 11px;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
      font-weight: 600;
    }

    .cs-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 16px;
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      color: #64748b;
    }

    .cs-description {
      font-size: 12px;
      color: #94a3b8;
      margin-top: 12px;
      line-height: 1.5;
    }

    /* ===== ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ í…Œë§ˆ ===== */
    /* Liquidity */
    .category-liquidity .cs-icon {
      background: rgba(16, 185, 129, 0.1);
      color: #10b981;
    }

    /* Rates */
    .category-rates .cs-icon {
      background: rgba(99, 102, 241, 0.1);
      color: #6366f1;
    }

    /* Sentiment */
    .category-sentiment .cs-icon {
      background: rgba(251, 146, 60, 0.1);
      color: #fb923c;
    }

    /* ===== ë°˜ì‘í˜• ì¡°ì • ===== */
    @media (max-width: 768px) {
      .container {
        padding: 20px 16px;
      }

      .page-title {
        font-size: 24px;
      }

      .page-subtitle {
        font-size: 13px;
      }

      .tab-btn {
        padding: 8px 16px;
        font-size: 12px;
      }

      .cs-title {
        font-size: 16px;
      }

      .cs-icon {
        width: 56px;
        height: 56px;
        font-size: 24px;
      }
    }

    /* í´ë”ë¸”: 280-400px */
    @media (max-width: 400px) {
      .page-title {
        font-size: 20px;
      }

      .cs-title {
        font-size: 15px;
      }
    }

    /* ===== í•„í„°ë§ ì• ë‹ˆë©”ì´ì…˜ ===== */
    .indicator-card.hidden {
      display: none;
    }

    .indicator-card.fade-in {
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>

<div class="container">
  <!-- í—¤ë” -->
  <header class="page-header">
    <h1 class="page-title"><span class="title-icon">ğŸ“¡</span> 100x Market Radar</h1>
    <p class="page-subtitle">ê±°ì‹œê²½ì œ ì§€í‘œ í†µí•© ëŒ€ì‹œë³´ë“œ - ì‹¤ì‹œê°„ ìœ„í—˜ ì‹ í˜¸ ëª¨ë‹ˆí„°ë§</p>

    <!-- ì¹´í…Œê³ ë¦¬ íƒ­ -->
    <div class="category-tabs">
      <button class="tab-btn active" data-category="all" onclick="filterCategory('all', this)">All</button>
      <button class="tab-btn" data-category="liquidity" onclick="filterCategory('liquidity', this)">Liquidity</button>
      <button class="tab-btn" data-category="rates" onclick="filterCategory('rates', this)">Rates</button>
      <button class="tab-btn" data-category="sentiment" onclick="filterCategory('sentiment', this)">Sentiment</button>
    </div>
  </header>

  <!-- ì¹´ë“œ ê·¸ë¦¬ë“œ -->
  <div class="card-grid" id="cardGrid">

    <!-- 1. Liquidity Flow (Layer 2 - ë¼ì´ë¸Œ ìœ„ì ¯) -->
    <div class="indicator-card live-widget fade-in" data-category="liquidity" onclick="openDetail('details/liquidity-flow.html')">
      <iframe
        src="widgets/liquidity-flow.html"
        scrolling="no"
        loading="lazy"
        title="Liquidity Flow Monitor">
      </iframe>
    </div>

    <!-- 2. Liquidity Stress (ë¼ì´ë¸Œ ìœ„ì ¯ - Layer 1) -->
    <div class="indicator-card live-widget fade-in" data-category="liquidity" onclick="openDetail('details/liquidity-stress.html')">
      <iframe
        src="widgets/liquidity-stress.html"
        scrolling="no"
        loading="lazy"
        title="Liquidity Stress Monitor">
      </iframe>
    </div>

    <!-- 3. Banking Health (4-A) - ë¼ì´ë¸Œ ìœ„ì ¯ -->
    <div class="indicator-card live-widget fade-in" data-category="liquidity" onclick="openDetail('details/banking-health.html')">
      <iframe
        src="widgets/banking-health.html"
        scrolling="no"
        loading="lazy"
        title="Banking Health Monitor">
      </iframe>
    </div>

    <!-- 4. Corporate Health (4-B) - ë¦¬ì„œì¹˜ ì™„ë£Œ -->
    <div class="indicator-card coming-soon category-rates fade-in" data-category="rates">
      <div class="cs-icon">ğŸ¢</div>
      <h3 class="cs-title">Corporate Health</h3>
      <p class="cs-category">Foundation</p>
      <span class="cs-badge">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        Coming Soon
      </span>
      <p class="cs-description">ê¸°ì—… ìˆ˜ìµì„± (ê¸°ì—…ì´ìµ/GDP, Forward P/E)</p>
    </div>

  </div>
</div>

<script>
  // ===== ì¹´í…Œê³ ë¦¬ í•„í„°ë§ =====
  function filterCategory(category, btn) {
    // íƒ­ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
    document.querySelectorAll('.tab-btn').forEach(tab => tab.classList.remove('active'));
    btn.classList.add('active');

    // ì¹´ë“œ í•„í„°ë§
    const cards = document.querySelectorAll('.indicator-card');
    cards.forEach(card => {
      const cardCategory = card.getAttribute('data-category');

      if (category === 'all' || cardCategory === category) {
        card.classList.remove('hidden');
        card.classList.add('fade-in');
      } else {
        card.classList.add('hidden');
        card.classList.remove('fade-in');
      }
    });
  }

  // ===== ë””í…Œì¼ í˜ì´ì§€ ì—´ê¸° =====
  function openDetail(path) {
    // iframe ë‚´ë¶€ë¼ë©´ ë¶€ëª¨ ì°½ì—ì„œ í˜ì´ì§€ ë¡œë“œ
    try {
      if (window.top?.loadPage) {
        window.top.loadPage('tools/macro-monitor/' + path);
        return;
      }
      if (window.parent?.loadPage) {
        window.parent.loadPage('tools/macro-monitor/' + path);
        return;
      }
    } catch(e) {
      console.error('Parent navigation failed:', e);
    }

    // ì§ì ‘ ì ‘ê·¼ ì‹œ ìƒëŒ€ ê²½ë¡œë¡œ ì´ë™
    window.location.href = path;
  }

  // ===== Coming Soon ì¹´ë“œ í´ë¦­ ì‹œ ì•Œë¦¼ =====
  document.querySelectorAll('.coming-soon').forEach(card => {
    card.addEventListener('click', (e) => {
      e.stopPropagation();
      const title = card.querySelector('.cs-title').textContent;
      alert(`"${title}" ì§€í‘œëŠ” ê³§ ì œê³µë  ì˜ˆì •ì…ë‹ˆë‹¤!\n\nê°œë°œ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.`);
    });
  });

  // ===== ì´ˆê¸° ì• ë‹ˆë©”ì´ì…˜ =====
  window.addEventListener('load', () => {
    const cards = document.querySelectorAll('.indicator-card');
    cards.forEach((card, index) => {
      setTimeout(() => {
        card.classList.add('fade-in');
      }, index * 50);
    });
  });

  // ===== ìœ„ì ¯ ë°ì´í„° ì „ë‹¬ (postMessage) =====
  // iframe sandboxì—ì„œ localStorage ì ‘ê·¼ ë¶ˆê°€ â†’ ë¶€ëª¨ì—ì„œ ë°ì´í„° ì „ë‹¬
  (function() {
    const WIDGET_IDS = ['liquidity-flow', 'liquidity-stress', 'banking-health'];

    function sendDataToWidgets() {
      WIDGET_IDS.forEach(widgetId => {
        const iframe = document.querySelector(`iframe[src*="${widgetId}.html"]`);
        if (!iframe || !iframe.contentWindow) return;

        try {
          const rawData = localStorage.getItem('macro_' + widgetId);
          if (rawData) {
            const parsed = JSON.parse(rawData);
            iframe.contentWindow.postMessage({
              type: 'WIDGET_DATA_UPDATE',
              payload: parsed.data
            }, '*');
            console.log(`[Index] ${widgetId} ìœ„ì ¯ìœ¼ë¡œ ë°ì´í„° ì „ì†¡`);
          }
        } catch (e) {
          console.warn(`[Index] ${widgetId} ë°ì´í„° ì „ì†¡ ì‹¤íŒ¨:`, e);
        }
      });
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ + iframe ë¡œë“œ ì™„ë£Œ ì‹œ
    window.addEventListener('load', () => {
      // iframe ë¡œë“œ ëŒ€ê¸° í›„ ì „ì†¡
      setTimeout(sendDataToWidgets, 500);
      setTimeout(sendDataToWidgets, 1500);
    });

    // ê° iframe onload ì´ë²¤íŠ¸
    document.querySelectorAll('.live-widget iframe').forEach(iframe => {
      iframe.addEventListener('load', () => {
        setTimeout(() => {
          const widgetId = WIDGET_IDS.find(id => iframe.src.includes(id));
          if (!widgetId) return;

          try {
            const rawData = localStorage.getItem('macro_' + widgetId);
            if (rawData) {
              const parsed = JSON.parse(rawData);
              iframe.contentWindow.postMessage({
                type: 'WIDGET_DATA_UPDATE',
                payload: parsed.data
              }, '*');
              console.log(`[Index] ${widgetId} iframe ë¡œë“œ í›„ ë°ì´í„° ì „ì†¡`);
            }
          } catch (e) {}
        }, 300);
      });
    });
  })();
</script>

</body>
</html>
