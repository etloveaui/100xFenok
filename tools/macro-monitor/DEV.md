# Macro Monitor - DEV.md

> ê¸°ëŠ¥ë³„ ê°œë°œ ë©”ëª¨. CLAUDE.mdì—ì„œ ì´ ê¸°ëŠ¥ ì‘ì—… ì‹œ ì°¸ì¡°.
> **ì„¤ê³„ ì² í•™**: `docs/planning/macro-monitor-philosophy.md` í•„ë…

## Purpose

ìœ ë™ì„± ë° í€ë”ë©˜í„¸ ì§€í‘œë¥¼ **ì¡°í•©**í•˜ì—¬ **ì˜ë¯¸ ìˆëŠ” ì‹ í˜¸**ë¡œ ì‹œê°í™”í•˜ëŠ” ìœ„ì ¯ ì‹œìŠ¤í…œ.

### í•µì‹¬ ì² í•™
- âŒ ì–´ë””ì„œë‚˜ ë³¼ ìˆ˜ ìˆëŠ” ì§€í‘œ ë‹¨ìˆœ ë‚˜ì—´ (VIX ìˆ«ìë§Œ, M2 ì°¨íŠ¸ë§Œ)
- âœ… ê°œë³„ ì§€í‘œë“¤ì„ ì¡°í•© â†’ í•´ì„ ê°€ëŠ¥í•œ ì‹ í˜¸ë¡œ ë³€í™˜

---

## 3-Layer ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: Foundation (í€ë”ë©˜í„¸)                          â”‚
â”‚  "ê¸°ì´ˆ ì²´ë ¥ì€ ê´œì°®ë‚˜?"                                    â”‚
â”‚  ì˜ˆëŒ€ìœ¨, ì—°ì²´ìœ¨, Tier1, ROE, ìƒì‚°ì„±, Fear&Greed, VIX      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 2: Fuel (ìœ ë™ì„± íë¦„) âœ… ì™„ë£Œ                      â”‚
â”‚  "ëˆì´ í’€ë¦¬ê³  ìˆë‚˜? ì–´ë””ì„œ? ì–¼ë§ˆë‚˜ ë¹ ë¥´ê²Œ?"                 â”‚
â”‚  M2 ì¦ê°€ìœ¨, TGA ë°©ì¶œ, RRP ì†Œì§„, ì •ì±… ìŠ¤íƒ ìŠ¤               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 1: Shield (ìœ„ê¸° ê°ì§€) âœ… ì™„ë£Œ                      â”‚
â”‚  "ì§€ê¸ˆ í„°ì§€ë‚˜?"                                          â”‚
â”‚  SOFR-IORB ìŠ¤í”„ë ˆë“œ â†’ Liquidity Stress                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layerë³„ ì—­í• 

| Layer | ì´ë¦„ | ì§ˆë¬¸ | ì‹œê°„ í”„ë ˆì„ | ìƒíƒœ |
|-------|------|------|------------|------|
| 1 | Shield (ë°©íŒ¨) | ì§€ê¸ˆ í„°ì§€ë‚˜? | ì‹¤ì‹œê°„~ì¼ê°„ | âœ… ì™„ë£Œ |
| 2 | Fuel (ì—°ë£Œ) | ëˆì´ í’€ë¦¬ê³  ìˆë‚˜? | ì£¼ê°„~ì›”ê°„ | âœ… ì™„ë£Œ |
| 3 | Foundation (ê¸°ì´ˆ) | í€ë”ë©˜í„¸ ê´œì°®ë‚˜? | ì›”ê°„~ë¶„ê¸° | ğŸ“‹ ê³„íš |

---

## Folder Structure

```
tools/macro-monitor/
â”œâ”€â”€ DEV.md                    â† ì´ íŒŒì¼
â”œâ”€â”€ index.html                â† Command Center ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ widgets/                  â† ì¹´ë“œí˜• ìœ„ì ¯ (Command Center/main.html iframeìš©)
â”‚   â”œâ”€â”€ liquidity-stress.html â† âš¡ Layer 1: ìœ„ê¸° ê°ì§€ (SOFR-IORB)
â”‚   â”œâ”€â”€ liquidity-flow.html   â† ğŸ’§ Layer 2: ìœ ë™ì„± íë¦„ (M2/TGA/RRP)
â”‚   â””â”€â”€ sofr-iorb.html        â† (ë°±ì—…)
â”œâ”€â”€ details/                  â† ìƒì„¸ í˜ì´ì§€ (í´ë¦­ ì‹œ ì´ë™)
â”‚   â”œâ”€â”€ liquidity-stress.html â† Layer 1 ìƒì„¸
â”‚   â”œâ”€â”€ liquidity-flow.html   â† Layer 2 ìƒì„¸
â”‚   â””â”€â”€ ...
â””â”€â”€ shared/                   â† ê³µí†µ ëª¨ë“ˆ (ES Module)
    â”œâ”€â”€ data-manager.js       â† ìºì‹œ ì—”ì§„ (ES Module export)
    â””â”€â”€ constants.js          â† ìƒìˆ˜ ì •ì˜ (ES Module export)
```

### âœ… ê³µí†µ ëª¨ë“ˆ ES Module ì „í™˜ ì™„ë£Œ (2025-12-01)

**ë³€ê²½ ë‚´ìš©**:
- `shared/data-manager.js`: `export { MacroDataManager, DataManager }` ì¶”ê°€
- `shared/constants.js`: `export { MACRO_CONSTANTS }` ì¶”ê°€
- 4ê°œ HTML íŒŒì¼: ì¸ë¼ì¸ ì½”ë“œ ì œê±° â†’ `import` ì‚¬ìš©

**ì‚¬ìš© íŒ¨í„´**:
```html
<!-- ES Module import -->
<script type="module">
  import { DataManager } from '../shared/data-manager.js';
  window.DataManager = DataManager;  // ì „ì—­ ë…¸ì¶œ
</script>
```

**ìƒíƒœ**: âœ… ë¡œì»¬ + ë°°í¬ í™˜ê²½ ëª¨ë‘ ì •ìƒ ì‘ë™ í™•ì¸

### ğŸ”´ Known Issue: FRED API CORS

**ë¬¸ì œ**: Detail í˜ì´ì§€ì—ì„œ `api.stlouisfed.org` ì§ì ‘ í˜¸ì¶œ â†’ CORS ì—ëŸ¬
```
Access to fetch at 'https://api.stlouisfed.org/...' from origin 'https://etloveaui.github.io'
has been blocked by CORS policy
```

**í•´ê²° ë°©ì•ˆ**: Cloudflare Worker í”„ë¡ì‹œ ì‚¬ìš©
```javascript
// Before (í˜„ì¬ - CORS ì—ëŸ¬)
const url = 'https://api.stlouisfed.org/fred/series/observations?...';

// After (ìˆ˜ì • í•„ìš”)
const url = 'https://fed-proxy.etloveaui.workers.dev/fred/series/observations?...';
```

**ìˆ˜ì • ëŒ€ìƒ íŒŒì¼**:
- `details/liquidity-stress.html`
- `details/liquidity-flow.html`

**ìƒíƒœ**: â³ ëŒ€ê¸° (ACTIVE_TASKS.md 4-0.5 ì°¸ì¡°)

### ìƒˆ ì§€í‘œ ì¶”ê°€ ì‹œ
1. `details/[ì§€í‘œëª…].html` ìƒì„± (API í˜¸ì¶œ + ìºì‹œ ì €ì¥)
2. `widgets/[ì§€í‘œëª…].html` ìƒì„± (ìºì‹œ ì½ê¸° ì „ìš©)
3. `index.html` Command Centerì— iframe ì¶”ê°€
4. **ê³µí†µ ëª¨ë“ˆ import** (ë¦¬íŒ©í† ë§ í›„)

---

## Current Implementation

### Layer 1: Liquidity Stress âš¡
**Widget** (`widgets/liquidity-stress.html`)
- ì‹ í˜¸ë“± ìŠ¤íƒ€ì¼ (ì¢…í•© ìƒíƒœ + Tier 1/2 ì¹´ë“œ)
- ìºì‹œ ê¸°ë°˜ (Detailì—ì„œ ì €ì¥í•œ localStorage ì½ê¸°)
- í´ë¦­ â†’ Detail í˜ì´ì§€ ì´ë™

**Detail** (`details/liquidity-stress.html`)
- SOFR-IORB ìŠ¤í”„ë ˆë“œ ë¶„ì„
- ë°˜ì‘í˜• í•˜ì´ë¸Œë¦¬ë“œ ë ˆì´ì•„ì›ƒ
- ê¸°ê°„ ì˜µì…˜: 1M/3M/6M/1Y/3Y/MAX

### Layer 2: Liquidity Flow ğŸ’§ (v2.1 ì™„ë£Œ âœ…)

#### í•µì‹¬ ë³€ê²½: Net Liquidity ì •ì‹ ê³µì‹
```
Net Liquidity = Fed Balance Sheet (WALCL) - TGA - RRP
```
- ì´ì „: `M2Î” + TGAë°©ì¶œ + RRPê°ì†Œ` (ê·¼ì‚¬ì¹˜)
- ë³€ê²½: Fed ê³µì‹ ì ìš© (WALCL ë°ì´í„° ì¶”ê°€)

#### v2.1 ì •í•©ì„± ìˆ˜ì • (2025-12-01, Gemini í˜‘ì—…)
| í•­ëª© | ë¬¸ì œ | í•´ê²° |
|------|------|------|
| ë³€ìˆ˜ëª… ë¶ˆì¼ì¹˜ | `m2Growth` â†’ `0.0%` í‘œì‹œ | `m2YoY`ë¡œ ë§¤í•‘ |
| ìƒíƒœ íŒë‹¨ ë¡œì§ | Widget vs Detail ë¶ˆì¼ì¹˜ | AND ì¡°ê±´ í†µì¼ |
| ë‹¨ìœ„ ë³€í™˜ | B/T í˜¼ì„  â†’ SC/M2 `0.00%` | ë°©ì–´ì  ë³€í™˜ ë¡œì§ |
| Neutral ì•„ì´ì½˜ | ğŸ“ˆ â†’ â¡ï¸ | ë²”ìœ„ë³„ ì•„ì´ì½˜ ìˆ˜ì • |

#### Overall ìƒíƒœ íŒë‹¨ ê¸°ì¤€ (Widget-Detail ë™ì¼)
```javascript
// Expanding: Net Liq > 50 AND M2 YoY >= 4
// Contracting: Net Liq < -50 OR M2 YoY < 2
// Neutral: ê·¸ ì™¸
```

#### Signal Matrix: 5ê°œ â†’ 3ê°œ
| # | ì§€í‘œ | Primary | Subtext |
|---|------|---------|---------|
| 1 | M2 | YoY% | $22.3T (ì´ëŸ‰) |
| 2 | Net Liquidity | $5.8T | Î” +$39B |
| 3 | Stablecoin | $226B | SC/M2 % |

- ì¹´ë“œ ì •ë ¬: ê·œëª¨ ìˆœ (M2 â†’ Net Liq â†’ SC)
- âŒ ì œê±°: TGA, RRP, Policy Stance (Net Liquidityì— í†µí•©)
- âœ… SCëŠ” M2ì— ë¯¸í¬í•¨ â†’ ë³„ë„ ìœ ì§€

#### Detail íƒ­: 3ê°œ (v2 í†µí•©)
| íƒ­ | ë‚´ìš© | ë³€ê²½ì‚¬í•­ |
|----|------|----------|
| **Liquidity Pulse** | Stacked Bar (Fed BS, -TGA, -RRP) + Net Liq Î” ì„  | Components í†µí•© |
| Credit Flow | M2 YoY% + M2 ì´ëŸ‰ ë©´ì  | ìœ ì§€ |
| Crypto Bridge | SC ì´ëŸ‰ + SC/M2 Ratio (ì´ì¤‘ì¶•) | SC Total ì¶”ê°€ |

- âŒ ì œê±°: Components íƒ­ (Liquidity Pulseë¡œ í†µí•©, ì¤‘ë³µ ì œê±°)

#### ì„ê³„ê°’
| ì§€í‘œ | ğŸŸ¢ | ğŸŸ¡ | ğŸ”´ |
|------|----|----|----|
| M2 YoY | â‰¥6% | 2-6% | <2% |
| Net Liquidity Î” | >$50B | Â±$50B | <-$50B |
| SC Total | â‰¥$350B | $250-350B | <$250B |

#### API ì†ŒìŠ¤
| ì§€í‘œ | API | FRED Code |
|------|-----|-----------|
| Fed Balance Sheet | FRED | WALCL |
| M2 | FRED | M2SL |
| TGA | FRED | WTREGEN |
| RRP | FRED | RRPONTSYD |
| Stablecoin | DefiLlama | stablecoins |

**Widget** (`widgets/liquidity-flow.html`) - v2.1 ì™„ë£Œ âœ…
- Net Liquidity Hero + 3ê°œ ì§€í‘œ (1x3 ê·¸ë¦¬ë“œ)
- ì§€í‘œ: M2 ($T + YoY%), Net Liq ($T + Î”$B), SC ($B + SC/M2%)
- ìºì‹œ ê¸°ë°˜ + ë°±ê·¸ë¼ìš´ë“œ Detail ë¡œë“œ
- ë‹¨ìœ„ ë³€í™˜: `>100 ? Bâ†’T ë³€í™˜ : ê·¸ëŒ€ë¡œ`

**Detail** (`details/liquidity-flow.html`) - v2.1 ì™„ë£Œ âœ…
- 3ê°œ Signal Matrix (M2, Net Liquidity, SC)
- 3íƒ­ ì°¨íŠ¸ (Liquidity Pulse / Credit Flow / Crypto Bridge)
- saveWidgetCache: m2YoY, m2Total, netLiquidity, netLiquidityDelta, stablecoinMcap

---

## Widget í‘œì¤€í™” ê°€ì´ë“œ

### ë ˆì´ì•„ì›ƒ ê·œì¹™
| í•­ëª© | ê·œê²© |
|------|------|
| ìµœì†Œ ë†’ì´ | 280px |
| íŒ¨ë”© | 16px |
| í—¤ë” | ì•„ì´ì½˜ + íƒ€ì´í‹€ + ìƒíƒœ ë°°ì§€ |
| í°íŠ¸ | Orbitron (íƒ€ì´í‹€), Inter (ë³¸ë¬¸) |

### ì•„ì´ì½˜ ê·œì¹™
- Layer 1 (Stress): âš¡
- Layer 2 (Flow): ğŸ’§
- Layer 3 (Foundation): ğŸ“Š (ì˜ˆì •)

### ìºì‹œ ì—°ë™ íŒ¨í„´
```javascript
// Widget: ìºì‹œ ì½ê¸°ë§Œ
const data = DataManager.getWidgetData('widget-id');
if (!data) await loadDetailInBackground();

// Detail: API í˜¸ì¶œ + ìºì‹œ ì €ì¥
DataManager.saveWidgetData('widget-id', processedData);
```

### ìƒíƒœ ì‹ í˜¸ë“±
| ìƒíƒœ | ì´ëª¨ì§€ | ìƒ‰ìƒ |
|------|--------|------|
| Positive/Normal | ğŸŸ¢ | #16a34a |
| Neutral/Caution | ğŸŸ¡ | #ca8a04 |
| Negative/Warning | ğŸŸ  | #ea580c |
| Critical/Danger | ğŸ”´ | #dc2626 |

---

## Data Flow

```
Detail í˜ì´ì§€ ë¡œë“œ
    â†“
FRED API / DefiLlama API
    â†“ (CORS ìš°íšŒ: Cloudflare Worker / allorigins)
ë°ì´í„° ì²˜ë¦¬ + ì°¨íŠ¸ ë Œë”ë§
    â†“
DataManager.saveWidgetData() â†’ localStorage
    â†“
Widget ë¡œë“œ ì‹œ â†’ DataManager.getWidgetData() ì½ê¸°
    â†“
ìºì‹œ ì—†ìœ¼ë©´? â†’ hidden iframeìœ¼ë¡œ Detail ë°±ê·¸ë¼ìš´ë“œ ë¡œë“œ
```

---

## ğŸ”§ ìœ„ì ¯ ê°œë°œ í‘œì¤€ ê°€ì´ë“œ

> **ìƒˆ ìœ„ì ¯ ê°œë°œ ì‹œ ë°˜ë“œì‹œ ì´ ì„¹ì…˜ì„ ì°¸ê³ **

### ì¸í”„ë¼ í˜„í™©

| í•­ëª© | ê°’ | ë¹„ê³  |
|------|-----|------|
| Cloudflare Worker | `https://fed-proxy.etloveaui.workers.dev/` | í”„ë¡œë•ì…˜ CORS í”„ë¡ì‹œ |
| ë¡œì»¬ ê°œë°œ í”„ë¡ì‹œ | `node scripts/dev/fred-proxy.js` | í¬íŠ¸ 8787 |
| Fallback | `https://cors.isomorphic-git.org/` | ì‹ ë¢°ë„ ë‚®ìŒ, ë§ˆì§€ë§‰ ìˆ˜ë‹¨ |
| FRED API Key | `6dda7dc3956a2c1d6ac939133de115f1` | ê³µê°œ í‚¤ |
| ìºì‹œ TTL | 30ë¶„ | localStorage ê¸°ë°˜ |

### Widget-Detail ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Detail í˜ì´ì§€ (API í˜¸ì¶œ ë‹´ë‹¹)                        â”‚
â”‚ 1. FRED API í˜¸ì¶œ (3ë‹¨ê³„ Fallback)                   â”‚
â”‚ 2. ë°ì´í„° ê³„ì‚° (ìŠ¤í”„ë ˆë“œ, ë¹„ìœ¨ ë“±)                   â”‚
â”‚ 3. DataManager.saveWidgetData() í˜¸ì¶œ               â”‚
â”‚ 4. localStorageì— ì €ì¥ (TTL: 30ë¶„)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ localStorage (ìºì‹œ)          â”‚
       â”‚ Key: macro_[widget-id]       â”‚
       â”‚ TTL: 30ë¶„                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Widget (API í˜¸ì¶œ ê¸ˆì§€!)                              â”‚
â”‚ 1. DataManager.getWidgetData() í˜¸ì¶œ                 â”‚
â”‚ 2. ìºì‹œ ìˆìœ¼ë©´ â†’ ì¦‰ì‹œ ë Œë”ë§                         â”‚
â”‚ 3. ìºì‹œ ì—†ìœ¼ë©´ â†’ hidden iframeìœ¼ë¡œ Detail ë¡œë“œ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ìŠ¤íƒ€ì¼ ì¼ê´€ì„± ê·œì¹™

| ìš”ì†Œ | í‘œì¤€ | ì˜ˆì‹œ |
|------|------|------|
| **í—¤ë”** | `card-header` + `card-title` | liquidity-stress.html ì°¸ê³  |
| **íƒ€ì´í‹€ í°íŠ¸** | Orbitron, 13px, 700 | ëª¨ë“  ìœ„ì ¯ ë™ì¼ |
| **íƒ€ì´í‹€ ì´ëª¨ì§€** | ì—†ìŒ (í…ìŠ¤íŠ¸ë§Œ) | `LIQUIDITY STRESS` |
| **ì‹ í˜¸ë“±** | 4ê°€ì§€ ìƒíƒœ | ğŸŸ¢ğŸŸ¡ğŸŸ ğŸ”´ |
| **ë°°ê²½** | ê·¸ë˜ë””ì–¸íŠ¸ | `#f8fafc â†’ #f1f5f9` |
| **ìµœì†Œ ë†’ì´** | 260px (ìœ„ì ¯), 280px (iframe) | |
| **hover íš¨ê³¼** | translateY(-4px) + shadow | |

### âš ï¸ ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ

1. **Widgetì—ì„œ API ì§ì ‘ í˜¸ì¶œ ê¸ˆì§€** - localStorageë§Œ ì½ê¸°
2. **ì˜ë¯¸ ì—†ëŠ” ë°ëª¨ ë°ì´í„° ê¸ˆì§€** - API ë¯¸ì—°ê²° ì‹œ "ë°ì´í„° ì—†ìŒ" ë˜ëŠ” "Loading" í‘œì‹œ
3. **ìŠ¤íƒ€ì¼ ì„ì˜ ë³€ê²½ ê¸ˆì§€** - ê¸°ì¡´ liquidity-stress.html íŒ¨í„´ ë”°ë¥´ê¸°
4. **íƒ€ì´í‹€ì— ì•„ì´ì½˜ ì¶”ê°€ ê¸ˆì§€** - ê¸°ì¡´ ìœ„ì ¯ê³¼ ì¼ê´€ì„± ìœ ì§€

### ìƒˆ ìœ„ì ¯ ì¶”ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸

**Step 1: Detail í˜ì´ì§€** (`details/[name].html`)
- [ ] FRED API í˜¸ì¶œ ë¡œì§ (3ë‹¨ê³„ Fallback í¬í•¨)
- [ ] ê³„ì‚° ë¡œì§ (ì§€í‘œë³„ ê³µì‹)
- [ ] DataManager.saveWidgetData() í˜¸ì¶œ
- [ ] ìƒì„¸ UI (ê·¸ë˜í”„, ì„¤ëª…, ê¸°ê°„ ì„ íƒê¸°)

**Step 2: Widget ì¹´ë“œ** (`widgets/[name].html`)
- [ ] API í˜¸ì¶œ ì—†ìŒ (localStorageë§Œ ì½ê¸°)
- [ ] `card-header` + `card-title` êµ¬ì¡°
- [ ] ì‹ í˜¸ë“± ìƒíƒœ í‘œì‹œ
- [ ] íƒ€ì´í‹€ ì´ëª¨ì§€ ì—†ìŒ (í…ìŠ¤íŠ¸ë§Œ)
- [ ] 260px ì´ìƒ ë†’ì´

**Step 3: í˜ì´ì§€ ë“±ë¡**
- [ ] `index.html` (Command Center)ì— ì¹´ë“œ ì¶”ê°€
- [ ] `main.html`ì— iframe ì¶”ê°€ (í•„ìš” ì‹œ)

---

## Technical Decisions

| ê²°ì • | ì´ìœ  |
|------|------|
| Chart.js | ê°€ë³ê³  ë¹ ë¦„, ë³µì¡í•œ ì‹œê°í™” ë¶ˆí•„ìš” |
| tension: 0 | ì§ì„  ìŠ¤íƒ€ì¼ë¡œ ë°ì´í„° ë³€í™” ëª…í™•íˆ í‘œì‹œ |
| widgets/details ë¶„ë¦¬ | í™•ì¥ì„±: ì§€í‘œ ì¶”ê°€ ì‹œ íŒ¨í„´ ëª…í™• |
| ë°ì€ í…Œë§ˆ | ì‚¬ì´íŠ¸ ì „ì²´ í†¤ê³¼ í†µì¼ |
| ~~shared/ ì§€ì—° ìƒì„±~~ | ~~ì§€í‘œ 3ê°œ ì´ìƒ ì‹œ ê³µí†µí™” (YAGNI)~~ â†’ **Layer 3 ì „ ë¦¬íŒ©í† ë§ ì˜ˆì •** |

---

## Phase Checklist

### Phase 1: Widget Card UI âœ…
- [x] ìœ„ì ¯ ì¹´ë“œí˜• ì¬ì„¤ê³„ (1/3 í¬ê¸°)
- [x] ì§ì„  ê·¸ë˜í”„ ìŠ¤íƒ€ì¼ (tension: 0)
- [x] ìƒíƒœ í‘œì‹œ (ì •ìƒ/ì£¼ì˜/ê²½ê³„/ìœ„í—˜)
- [x] iframe ë†’ì´ (280px)
- [x] í´ë” êµ¬ì¡° ì •ë¦¬ (widgets/, details/)
- [x] detail ë°ì€ í…Œë§ˆ ì ìš©

### Phase 2: Graph Enhancement âœ… (2025-11-29)
- [x] Chart.js ì„¤ì • ìµœì í™” (5ê°€ì§€ ê°œì„ )
- [x] ê¸°ê°„ë³„ ë°ì´í„° í‘œì‹œ (1M/3M/6M/1Y/3Y/MAX)
- [x] ìŠ¤í”„ë ˆë“œ ì‹œê°í™” ê°œì„  (Gradient, Glow, Tooltip)
- [x] ë°˜ì‘í˜• í•˜ì´ë¸Œë¦¬ë“œ ë ˆì´ì•„ì›ƒ
- [x] ì„ê³„ì„  ë¼ë²¨ ì¢Œì¸¡ + ë°˜íˆ¬ëª…
- [x] í•˜ë‹¨ ì„¤ëª… ì¹´ë“œ 3ê°œ (í˜„ì¬ ìƒíƒœ/ì§€í‘œ ì„¤ëª…/ì¤‘ìš”ì„±)

### Phase 2.5: Widget System Architecture âœ… (2025-11-29)
- [x] ê³µí†µ ìºì‹±/API ë ˆì´ì–´ ì„¤ê³„
- [x] í™•ì¥ ê°€ëŠ¥í•œ ìœ„ì ¯ êµ¬ì¡° (10~30ê°œ ëŒ€ì‘)
- [x] ë§¤í¬ë¡œ ëª¨ë‹ˆí„° ë©”ì¸ í˜ì´ì§€ êµ¬ì¡°
- [x] ìœ„ì ¯-ë””í…Œì¼ ë°ì´í„° ê³µìœ  íŒ¨í„´
- [x] **ì„¤ê³„ ë¬¸ì„œ**: `CookBook/docs/ARCHITECTURE.md`

### Phase 2.6: Command Center âœ… (2025-11-29)
- [x] `index.html` Command Center ëŒ€ì‹œë³´ë“œ ìƒì„±
- [x] Bento Box ë ˆì´ì•„ì›ƒ (PC 3ì—´, íƒœë¸”ë¦¿ 2ì—´, ëª¨ë°”ì¼ 1ì—´)
- [x] ì¹´í…Œê³ ë¦¬ íƒ­ í•„í„°ë§ (All/Liquidity/Rates/Sentiment)
- [x] 6ê°œ ìœ„ì ¯ ì¹´ë“œ (1 ë¼ì´ë¸Œ + 5 Coming Soon)
- [x] `nav.html` ë©”ë‰´ ì—°ê²°

### Phase 2.7: Main Page Compact Hero Banner âœ… (2025-11-29)
- [x] Coming Soon ì¹´ë“œ 2ê°œ ì œê±°
- [x] Liquidity Stress ìœ„ì ¯ 1ê°œ ì¤‘ì•™ ì •ë ¬
- [x] max-width: 600px (ëª¨ë°”ì¼/íƒœë¸”ë¦¿), 500px (PC)
- [x] CTA ë²„íŠ¼: "More Macro Indicators (+5 Coming Soon)"

### Phase 3: Layer 2 - Liquidity Flow Monitor âœ… ì™„ë£Œ (2025-12-01)
> **ì»¨ì…‰**: ì—¬ëŸ¬ ìœ ë™ì„± ì±„ë„ì˜ íë¦„/ë°©í–¥ì„±/ì†ë„ë¥¼ ì¢…í•©

#### API ê²€ì¦ ì™„ë£Œ (2025-11-30)
| ì§€í‘œ | API | ì½”ë“œ/ì—”ë“œí¬ì¸íŠ¸ | ìµœì‹  ë°ì´í„° | ìƒíƒœ |
|------|-----|----------------|------------|------|
| M2 í†µí™”ëŸ‰ | FRED | `M2SL` | $22,298B (2025-10) | âœ… |
| TGA ì”ê³  | FRED | `WTREGEN` | $903B (2025-11-26) | âœ… |
| RRP ì”ê³  | FRED | `RRPONTSYD` | $7.5B (2025-11-28) | âœ… |
| ìŠ¤í…Œì´ë¸”ì½”ì¸ | DefiLlama | `stablecoins.llama.fi` | ~$200B | âœ… |

#### í•µì‹¬ ì¸ì‚¬ì´íŠ¸ (í˜„ì¬ ë°ì´í„° ê¸°ì¤€)
1. **RRP ê±°ì˜ ì†Œì§„**: $7.5B â†’ ë” ì´ìƒ ìœ ë™ì„± ê³µê¸‰ì› ì•„ë‹˜
2. **M2 ì¦ê°€ ì¶”ì„¸**: $22,298B (ì›”ê°„ ë°ì´í„°)
3. **TGA ê°ì†Œ ì¤‘**: $903B â†’ ìœ ë™ì„± ë°©ì¶œ ì¤‘
4. **Stablecoin/M2**: ~$200B / $22,298B â‰ˆ 0.9%

#### 4ê°œ ì§€í‘œ í™•ì • (Policy ì œê±°)
| ì§€í‘œ | í‘œì‹œ í˜•ì‹ | ê³„ì‚° ë°©ì‹ |
|------|----------|----------|
| M2 Growth | +X.X% YoY | í˜„ì¬ vs 12ê°œì›” ì „ |
| TGA Balance | $XXXB | ì ˆëŒ€ê°’ + ë³€í™” ë°©í–¥ |
| RRP Balance | $XXXB | ì ˆëŒ€ê°’ + ë³€í™” ë°©í–¥ |
| Stablecoin/M2 | X.X% | ìŠ¤í…Œì´ë¸”ì½”ì¸ ì´ëŸ‰ / M2 |

#### Detail ì„¤ê³„ í™•ì • (2025-11-30) âœ…

**íŒ¨í„´**: Signal-First Hybrid (Option 2+3 ê²°í•©)
**êµ¬ì¡°**: ì‹ í˜¸ë“± ë§¤íŠ¸ë¦­ìŠ¤ + 4íƒ­ ì°¨íŠ¸ ì‹œìŠ¤í…œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš¦ Liquidity Flow Status                               â”‚
â”‚  Net Flow: +$850B/mo  ğŸŸ¢ Strong Inflow                 â”‚
â”‚  Policy Stance: ğŸŸ¢ Accommodative                        â”‚
â”‚  Crypto Rotation: ğŸŸ¡ Moderate (15% of new M2)          â”‚ â† ì‹ ê·œ!
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Signal Matrix (4ê°œ ì§€í‘œ ì‹ í˜¸ë“±)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ˆ [Net Flow] [Credit Flow] [Policy Flow] [Details]   â”‚
â”‚  â†’ íƒ­ë³„ ì°¨íŠ¸ ì „í™˜                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¡ Insight Cards (3ê°œ)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íƒ­ë³„ ì°¨íŠ¸ êµ¬ì„±**:
| íƒ­ | ëª©ì  | ì°¨íŠ¸ |
|-----|------|------|
| Net Flow (ê¸°ë³¸) | ê²°ë¡  ë¨¼ì € | ìˆœìœ ë™ì„± ë§‰ëŒ€ (ì–‘/ìŒ) + 4ì£¼ MA |
| Credit Flow | M2+Stablecoin | M2 YoY% ì„  + SC YoY% ì ì„  + SC/M2 ë©´ì  ë°°ê²½ |
| Policy Flow | TGA+RRP | TGA/RRP ì„  + Combined Delta ë§‰ëŒ€ |
| Details | ê°œë³„ í™•ì¸ | 2x2 ê·¸ë¦¬ë“œ (4ê°œ ì§€í‘œ) |

**í•µì‹¬ ê³„ì‚°ì‹**:
```javascript
Net_Flow = M2_delta_weekly + TGA_delta + RRP_delta
Crypto_Rotation = (Stablecoin_delta / M2_delta) * 100
```

**ë°ì´í„° ì£¼ê¸°**: ëª¨ë‘ Weeklyë¡œ í†µì¼
- M2: Monthly â†’ Weekly (forward-fill)
- TGA: Weekly (ê·¸ëŒ€ë¡œ)
- RRP: Daily â†’ Weekly (í‰ê· )
- Stablecoin: Real-time â†’ Weekly (ë§ˆì§€ë§‰ ê°’)

#### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [x] 3-0: ì„¤ê³„ ì² í•™ ë° ì•„í‚¤í…ì²˜ ì •ì˜
- [x] 3-1: API ê²€ì¦ ì™„ë£Œ
- [x] 3-2: Detail í˜ì´ì§€ ë ˆì´ì•„ì›ƒ/ì°¨íŠ¸ ì„¤ê³„ âœ… ì™„ë£Œ
- [x] 3-3: Detail í˜ì´ì§€ êµ¬í˜„ (Phase A/B/C) âœ… ì™„ë£Œ (2025-12-01)
  - [x] Phase A: Signal Matrix + Net Flow
  - [x] Phase B: Credit Flow ì°¨íŠ¸
  - [x] Phase C: Policy Flow + Details íƒ­
  - [x] Policy Stance ì‹ í˜¸ ì¶”ê°€ (5ê°œ ì§€í‘œ ì™„ì„±)
- [ ] 3-4: Widget ì—°ë™ (ìºì‹œ ê¸°ë°˜)

### Phase 3.5: Liquidity Flow v3 - 4íƒ­ ì¬í¸ (ê³„íš)

> **ìƒíƒœ**: ğŸ“‹ ì„¤ê³„ ì™„ë£Œ, êµ¬í˜„ ëŒ€ê¸°
> **ë°°ê²½**: ì¬ì • ì§€ë°°(Fiscal Dominance) íŒ¨ëŸ¬ë‹¤ì„ ë°˜ì˜
> **ì°¸ì¡°**: `docs/planning/macro-monitor-philosophy.md` ì„¹ì…˜ 4.3, 4.7

#### í•µì‹¬ ë³€ê²½: 3íƒ­ â†’ 4íƒ­

| í˜„ì¬ (v2.1) | ì¬í¸ (v3) | ë³€ê²½ ë‚´ìš© |
|------------|----------|----------|
| Liquidity Pulse | **Fed Policy** | WALCL, RRP ìœ ì§€ + SRF ì¶”ê°€ |
| - | **Treasury Policy** | TGA ì´ë™ + T-Bill ë¹„ì¤‘ ì¶”ê°€ |
| Credit Flow | **Credit Expansion** | ê·¸ëŒ€ë¡œ |
| Crypto Bridge | **Dollar Flow** | ë‹¬ëŸ¬ ì¸ë±ìŠ¤(DTWEXBGS) ì¶”ê°€ |

#### ìƒˆ ì§€í‘œ 3ê°œ

| ì§€í‘œ | ì†ŒìŠ¤ | API | ë¹„ìš© | ìƒíƒœ |
|------|------|-----|------|------|
| **ë‹¬ëŸ¬ ì¸ë±ìŠ¤** | FRED: DTWEXBGS | âœ… ë¬´ë£Œ | ë¬´ë£Œ | ğŸŸ¢ ë°”ë¡œ ê°€ëŠ¥ |
| **T-Bill ë¹„ì¤‘** | Treasury Fiscal Data | âœ… ë¬´ë£Œ | ë¬´ë£Œ | ğŸŸ¡ ê³„ì‚° í•„ìš” |
| **SRF ì‚¬ìš©ëŸ‰** | NY Fed Operations | ğŸ”´ í¬ë¡¤ë§ | ë¬´ë£Œ | ğŸ”´ Apps Script |

#### êµ¬í˜„ ì‹œ ì„ í–‰ ì‘ì—…

1. **API ê²€ì¦**: DTWEXBGS, Treasury API ì‹¤ì œ í˜¸ì¶œ í…ŒìŠ¤íŠ¸
2. **ì¸í”„ë¼**: SRF í¬ë¡¤ë§ ì‹œ Google Sheets + Apps Script
3. **UI**: 4íƒ­ ë ˆì´ì•„ì›ƒ ì¬ì„¤ê³„

#### ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] 3.5-0: ë‹¬ëŸ¬ ì¸ë±ìŠ¤ API ê²€ì¦
- [ ] 3.5-1: T-Bill ë¹„ì¤‘ ë°ì´í„° ì†ŒìŠ¤ í™•ì •
- [ ] 3.5-2: SRF í¬ë¡¤ë§ ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨
- [ ] 3.5-3: Detail í˜ì´ì§€ 4íƒ­ ì¬ì„¤ê³„
- [ ] 3.5-4: Widget ìºì‹œ êµ¬ì¡° ìˆ˜ì •

### Phase 4: Layer 3 - Foundation (í€ë”ë©˜í„¸)

#### 4-A: Banking Health (ê¸ˆìœµ ê±´ì „ì„±)
| ì§€í‘œ | ì˜ë¯¸ | í˜„ì¬ | ìœ„ê¸° ì‹œ |
|------|------|------|--------|
| ì˜ˆëŒ€ìœ¨ (LDR) | ëŒ€ì¶œ ì—¬ë ¥ | 71% | 87%+ |
| ì—¬ì‹  ì¦ê°€ìœ¨ | ê²½ê¸° ëª¨ë©˜í…€ | 5.1% â†‘ | ë§ˆì´ë„ˆìŠ¤ |
| Tier 1 ìë³¸ë¹„ìœ¨ | ì€í–‰ ê±´ì „ì„± | 14.17% ì—­ëŒ€ ìµœê³  | 10% ë¯¸ë§Œ |
| ì—°ì²´ìœ¨ | ì—¬ì‹  ê±´ì „ì„± | 1.47% | 5%+ |

#### 4-B: Corporate Health (ê¸°ì—… ê±´ì „ì„±)
| ì§€í‘œ | ì˜ë¯¸ | í˜„ì¬ |
|------|------|------|
| ìˆœì´ìµ ë§ˆì§„ìœ¨ | ìˆ˜ìµì„± | 13.1% ì—­ëŒ€ ìµœê³  |
| ROE | ìë³¸ì´ìµë¥  | S&P 20%+, M7 44% |
| ìƒì‚°ì„± | AI ì‚¬ì´í´ ê²€ì¦ | ê¸‰ìƒìŠ¹ (ì¸í„°ë„·ì˜ 3ë°°) |

#### 4-C: Market Sentiment (ì‹œì¥ ì‹¬ë¦¬)
| ì§€í‘œ | ì˜ë¯¸ | ê´€ì°° í¬ì¸íŠ¸ |
|------|------|-------------|
| Fear & Greed | ê³¼ì—´ ì—¬ë¶€ | Extreme Fear = ë²„ë¸” ì•„ë‹˜ |
| VIX | ë³€ë™ì„± | 27+ ê¸‰ë“± í›„ ê¸‰ë½ = ë‹¨ê¸° ë³€ë™ |

### Phase 5: Infrastructure
- [ ] Google Sheets êµ¬ì¡° ì„¤ê³„
- [ ] Apps Script ë°°í¬
- [ ] CORS ìš°íšŒ ì§€í‘œ ì—°ë™

---

## Known Issues

- [ ] ë¡œì»¬ í™˜ê²½ CORS ë¬¸ì œ (ë°°í¬ í›„ ì •ìƒ)
- [ ] ë¡œë”© ì†ë„ ê°œì„  (ìºì‹± ë¯¸êµ¬í˜„)
- [ ] Google Sheets ì¸í”„ë¼ ë¯¸êµ¬ì¶•

---

## Future Work (ë…¼ì˜ í•„ìš”)

### ìœ„ì ¯ í¬ê¸° ì¶•ì†Œ
- **ë¬¸ì œ**: main.html ìœ„ì ¯ ì¹´ë“œ 1ê°œê°€ ë„ˆë¬´ í¼
- **ë°©ì•ˆ A**: ì¹´ë“œ í‘œì‹œ ë°©ì‹ ì›ì²œ ë³€ê²½
- **ë°©ì•ˆ B**: ì¹´ë“œ í•˜ë‚˜ì— ì—¬ëŸ¬ ì¸ë””ì¼€ì´í„° í‘œì‹œ
- **ì‹œì **: Phase 3 ì§„í–‰ ì¤‘ ì ì ˆí•œ ì‹œê¸°ì— ë…¼ì˜

### ê´€ë¦¬ì ëª¨ë“œ (ì•„ì£¼ ë‚˜ì¤‘)
> **ìƒíƒœ**: ğŸ“‹ ê³„íšë§Œ (ìƒì„¸ëŠ” ì¶”í›„ ë…¼ì˜)

| í•­ëª© | ë‚´ìš© | ë¹„ê³  |
|------|------|------|
| **ì§„ì… ë°©ì‹** | footer "alive" í…ìŠ¤íŠ¸ í´ë¦­ | ìœ„ì¹˜ ì¶”í›„ ë…¼ì˜ ê°€ëŠ¥ |
| **ì¸ì¦** | ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ìš” | ë°©ì‹ ì¶”í›„ ë…¼ì˜ |
| **ì¸íŠ¸ë¡œ í™”ë©´** | ë©”ë‰´ ëª©ë¡ í‘œì‹œ | |
| **ë©”ë‰´ í•­ëª©** | ì¶”í›„ ì‚¬ìš©ìì™€ í˜‘ì˜ | |
| **í´ë”/íŒŒì¼ëª…** | ì¶”í›„ ë…¼ì˜ | |

**ì˜ˆìƒ êµ¬ì¡°** (í™•ì • ì•„ë‹˜):
```
ê´€ë¦¬ì ëª¨ë“œ ì§„ì…
â”œâ”€ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
â”œâ”€ ì¸íŠ¸ë¡œ í™”ë©´ (ë©”ë‰´ ëª©ë¡)
â”‚   â”œâ”€ ë©”ë‰´ 1: ???
â”‚   â”œâ”€ ë©”ë‰´ 2: ???
â”‚   â””â”€ ...
â””â”€ ê° ë©”ë‰´ë³„ ê¸°ëŠ¥ í˜ì´ì§€
```

---

## Change Log

> ìƒì„¸ ì´ë ¥: `CookBook/docs/CHANGELOG.md` ì°¸ì¡°
