<nav class="enhanced-nav container mx-auto px-4 sm:px-6 py-3">
  <div class="flex justify-between items-center">
    <!-- Î°úÍ≥† ÏòÅÏó≠ -->
    <a href="index.html?path=main.html" data-path="main.html"
      class="logo-section flex items-center space-x-3 text-2xl group">
      <img src="./favicon.svg" alt="100x FenoK Icon"
        class="h-12 w-12 transition-transform duration-300 group-hover:rotate-[-10deg]">
      <span class="brand-text">100x FenoK</span>
    </a>

    <!-- Î©îÎâ¥ ÏòÅÏó≠ -->
    <div class="nav-links hidden md:flex items-center space-x-4">
      
      <!-- üß† 100x Briefing ÎìúÎ°≠Îã§Ïö¥ -->
      <div class="relative group">
        <button class="nav-item flex items-center gap-1">
          100x Briefing
          <i class="fas fa-caret-down text-xs mt-[1px]"></i>
        </button>

        <div
          class="absolute top-full left-0 mt-2 bg-white shadow-lg border border-gray-200 rounded-xl opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all duration-200 z-50 min-w-[180px] pointer-events-auto"
          onmouseenter="this.classList.add('hovering')" onmouseleave="this.classList.remove('hovering')">
          
          <!-- Daily Wrap -->
          <a href="index.html?path=100x/100x-main.html" data-path="100x/100x-main.html"
            class="nav-item block w-full text-left px-5 py-2.5 text-sm text-gray-800 font-medium tracking-wide hover:bg-gray-50 transition-colors duration-150">
            Daily Wrap
          </a>
          
          <!-- Alpha Scout -->
          <a href="index.html?path=alpha-scout/alpha-scout-main.html" data-path="alpha-scout/alpha-scout-main.html"
            class="nav-item block w-full text-left px-5 py-2.5 text-sm text-gray-800 font-medium tracking-wide hover:bg-gray-50 transition-colors duration-150">
            Alpha Scout
          </a>
        </div>
      </div>

      <!-- ÎÇòÎ®∏ÏßÄ Î©îÎâ¥Îäî Í∑∏ÎåÄÎ°ú -->
      <a href="index.html?path=tools/asset/multichart.html" data-path="tools/asset/multichart.html" class="nav-item">Î©ÄÌã∞Ï∞®Ìä∏</a>
      <a href="index.html?path=posts/posts-main.html" data-path="posts/posts-main.html" class="nav-item">Î∂ÑÏÑù</a>

      <!-- ÎùºÏò§Ïñ¥ ÎìúÎ°≠Îã§Ïö¥ -->
      <div class="relative group">
        <button class="nav-item flex items-center gap-1">
          ÎùºÏò§Ïñ¥
          <i class="fas fa-caret-down text-xs mt-[1px]"></i>
        </button>

        <div
          class="absolute top-full left-0 mt-2 bg-white shadow-lg border border-gray-200 rounded-xl opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all duration-200 z-50 min-w-[180px] pointer-events-auto"
          onmouseenter="this.classList.add('hovering')" onmouseleave="this.classList.remove('hovering')">          
          <!-- Î¨¥ÌïúÎß§ÏàòÎ≤ï -->
          <a href="index.html?path=ib/ib-total-guide-calculator.html" data-path="ib/ib-total-guide-calculator.html"
            class="nav-item block w-full text-left px-5 py-2.5 text-sm text-gray-800 font-medium tracking-wide hover:bg-gray-50 transition-colors duration-150">
            Infinite Buying
          </a>          
          <!-- Value Rebalancing -->
          <a href="index.html?path=vr/vr-main.html" data-path="vr/vr-main.html"
            class="nav-item block w-full text-left px-5 py-2.5 text-sm text-gray-800 font-medium tracking-wide hover:bg-gray-50 transition-colors duration-150">
            Value Rebalancing
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>



<div class="combined-floating-menu lg:hidden">
  <button class="main-toggle-btn" id="main-toggle">
    <i class="fas fa-bars-staggered"></i>
  </button>

  <div class="sub-buttons" id="sub-buttons">
    <a href="index.html?path=main.html" data-path="main.html" class="sub-btn home-sub">
      <i class="fas fa-home"></i>
    </a>

    <button class="sub-btn scroll-sub" id="scroll-combined">
      <i class="fas fa-angle-double-up"></i> 
    </button>
  </div>

  <!-- ÏÉàÎ°úÏö¥ ÏôºÏ™Ω Í≥µÏú† Î≤ÑÌäº -->
  <div class="share-button" id="share-button">
    <button class="sub-btn share-sub" id="share-url">
      <i class="fas fa-share-alt"></i>
    </button>
  </div>
</div>

<script>
  (function () {
    function initFloatingMenu() {
      const mainToggle = document.getElementById('main-toggle');
      const subButtons = document.getElementById('sub-buttons');
      const scrollBtn = document.getElementById('scroll-combined');
      const shareBtn = document.getElementById('share-url'); // Í≥µÏú† Î≤ÑÌäº Ï∂îÍ∞Ä

      if (!mainToggle || !subButtons) {
        setTimeout(initFloatingMenu, 500);
        return;
      }

      let isOpen = false;

      // Î©îÏù∏ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ (Í∏∞Ï°¥ ÏΩîÎìú Í∑∏ÎåÄÎ°ú)
      mainToggle.addEventListener('click', function (e) {
        e.preventDefault();
        e.stopPropagation();

        isOpen = !isOpen;

        if (isOpen) {
          mainToggle.classList.add('active');
          subButtons.classList.add('active');
        } else {
          mainToggle.classList.remove('active');
          subButtons.classList.remove('active');
        }
      });

      // Í≥µÏú† Î≤ÑÌäº Í∏∞Îä• (ÏµúÏ¢Ö ÏôÑÎ≤Ω Î≤ÑÏ†Ñ)
      if (shareBtn) {
        shareBtn.addEventListener('click', function (e) {
          e.preventDefault();
          e.stopPropagation();

          console.log('üîó URL Î≥µÏÇ¨ ÏãúÏûë');

          // loadPage.jsÏóêÏÑú ÏÑ§Ï†ïÌïú Ï†ÑÏó≠ Î≥ÄÏàò ÌôúÏö©
          let currentPath = 'main.html';

          try {
            // Î∞©Î≤ï 1: windowÏóêÏÑú ÏßÅÏ†ë Í∞ÄÏ†∏Ïò§Í∏∞
            if (window.currentActivePage) {
              currentPath = window.currentActivePage;
              console.log('‚úÖ Ï†ÑÏó≠ Î≥ÄÏàòÏóêÏÑú ÌòÑÏû¨ Í≤ΩÎ°ú ÌöçÎìù:', currentPath);
            } else if (window.parent && window.parent.currentActivePage) {
              // Î∞©Î≤ï 2: Î∂ÄÎ™® Ï∞ΩÏóêÏÑú Í∞ÄÏ†∏Ïò§Í∏∞ (iframe ÌôòÍ≤Ω)
              currentPath = window.parent.currentActivePage;
              console.log('‚úÖ Î∂ÄÎ™® Ï∞ΩÏóêÏÑú ÌòÑÏû¨ Í≤ΩÎ°ú ÌöçÎìù:', currentPath);
            } else {
              // Î∞©Î≤ï 3: URL paramsÏóêÏÑú fallback
              const urlParams = new URLSearchParams(window.location.search);
              currentPath = urlParams.get('path') || 'main.html';
              console.log('üìç URL params fallback ÏÇ¨Ïö©:', currentPath);
            }
          } catch (error) {
            console.log('‚ùå Í≤ΩÎ°ú ÌöçÎìù Ïã§Ìå®, Í∏∞Î≥∏Í∞í ÏÇ¨Ïö©:', error);
            currentPath = 'main.html';
          }

          // ÏôÑÏ†ÑÌïú Í≥µÏú† URL Íµ¨ÏÑ±
          const baseURL = window.location.origin + window.location.pathname;
          const shareableURL = `${baseURL}?path=${currentPath}`;

          console.log('üìã Í≥µÏú†Ìï† ÏôÑÏ†ÑÌïú URL:', shareableURL);

          // ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê URL Î≥µÏÇ¨
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(shareableURL)
              .then(() => {
                console.log('‚úÖ URL Î≥µÏÇ¨ ÏôÑÎ£å:', shareableURL);
                showCopyNotification('URLÏù¥ Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!');
              })
              .catch((error) => {
                console.log('‚ùå URL Î≥µÏÇ¨ Ïã§Ìå®:', error);
                fallbackCopyURL(shareableURL);
              });
          } else {
            fallbackCopyURL(shareableURL);
          }

          // Î©îÎâ¥ Îã´Í∏∞
          isOpen = false;
          mainToggle.classList.remove('active');
          subButtons.classList.remove('active');
        });
      }


      // ÏúÑÎ°úÍ∞ÄÍ∏∞ Í∏∞Îä• - Ïò¨Î∞îÎ•∏ Ïä§ÌÅ¨Î°§ ÎåÄÏÉÅ ÏßÄÏ†ï
      if (scrollBtn) {
        scrollBtn.addEventListener('click', function (e) {
          e.preventDefault();
          e.stopPropagation();

          console.log('üöÄ ÏúÑÎ°úÍ∞ÄÍ∏∞ ÏãúÏûë');

          // Î∞©Î≤ï 1: iframe ÎÇ¥Î∂Ä Ïä§ÌÅ¨Î°§ (ÌòÑÏû¨ ÌéòÏù¥ÏßÄÍ∞Ä iframeÏù∏ Í≤ΩÏö∞)
          const iframe = document.querySelector('iframe');
          if (iframe && iframe.contentWindow) {
            try {
              iframe.contentWindow.scrollTo({ top: 0, behavior: 'smooth' });
              console.log('‚úÖ iframe ÎÇ¥Î∂Ä Ïä§ÌÅ¨Î°§ ÏÑ±Í≥µ');
            } catch (error) {
              console.log('iframe ÎÇ¥Î∂Ä Ïä§ÌÅ¨Î°§ Ïã§Ìå®:', error);
            }
          }

          // Î∞©Î≤ï 2: Î∂ÄÎ™® window Ïä§ÌÅ¨Î°§ (Í∞ÄÏû• Ï§ëÏöî!)
          try {
            if (window.parent && window.parent !== window) {
              window.parent.scrollTo({ top: 0, behavior: 'smooth' });
              console.log('‚úÖ Î∂ÄÎ™® Ï∞Ω Ïä§ÌÅ¨Î°§ ÏÑ±Í≥µ');
            }
          } catch (error) {
            console.log('Î∂ÄÎ™® Ï∞Ω Ïä§ÌÅ¨Î°§ Ïã§Ìå®:', error);
          }

          // Î∞©Î≤ï 3: index.htmlÏùò iframe Ï∞æÏïÑÏÑú Ïä§ÌÅ¨Î°§
          try {
            const parentDocument = window.parent.document;
            const contentFrame = parentDocument.getElementById('content-frame');
            if (contentFrame && contentFrame.contentWindow) {
              contentFrame.contentWindow.scrollTo({ top: 0, behavior: 'smooth' });
              console.log('‚úÖ content-frame Ïä§ÌÅ¨Î°§ ÏÑ±Í≥µ');
            }
          } catch (error) {
            console.log('content-frame Ïä§ÌÅ¨Î°§ Ïã§Ìå®:', error);
          }

          // Î∞©Î≤ï 4: Î™®Îì† Í∞ÄÎä•Ìïú Ïä§ÌÅ¨Î°§ ÏöîÏÜå ÏãúÎèÑ
          try {
            // ÌòÑÏû¨ Ï∞Ω
            window.scrollTo({ top: 0, behavior: 'smooth' });
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;

            // Î∂ÄÎ™® Ï∞ΩÏùò Î™®Îì† Ïä§ÌÅ¨Î°§ ÏöîÏÜå
            if (window.parent && window.parent.document) {
              window.parent.document.documentElement.scrollTop = 0;
              window.parent.document.body.scrollTop = 0;
            }

            console.log('‚úÖ Ï†ÑÏ≤¥ Ïä§ÌÅ¨Î°§ ÏãúÎèÑ ÏôÑÎ£å');
          } catch (error) {
            console.log('Ï†ÑÏ≤¥ Ïä§ÌÅ¨Î°§ ÏãúÎèÑ Ïã§Ìå®:', error);
          }

          // Î©îÎâ¥ Îã´Í∏∞
          isOpen = false;
          mainToggle.classList.remove('active');
          subButtons.classList.remove('active');
        });
      }
    }

    // URL Î≥µÏÇ¨ ÏïåÎ¶º ÌëúÏãú Ìï®Ïàò
    function showCopyNotification(message) {
      // Í∏∞Ï°¥ ÏïåÎ¶º Ï†úÍ±∞
      const existingNotification = document.querySelector('.copy-notification');
      if (existingNotification) {
        existingNotification.remove();
      }

      // ÏÉà ÏïåÎ¶º ÏÉùÏÑ±
      const notification = document.createElement('div');
      notification.className = 'copy-notification';
      notification.textContent = message;
      notification.style.cssText = `
      position: fixed;
      bottom: 80px;
      right: 20px;
      background: rgba(34, 197, 94, 0.9);
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 1001;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s ease;
    `;

      document.body.appendChild(notification);

      // Ïï†ÎãàÎ©îÏù¥ÏÖò
      setTimeout(() => {
        notification.style.opacity = '1';
        notification.style.transform = 'translateY(0)';
      }, 10);

      // 3Ï¥à ÌõÑ Ï†úÍ±∞
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(-10px)';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    // Íµ¨Ìòï Î∏åÎùºÏö∞Ï†ÄÏö© URL Î≥µÏÇ¨ Ìï®Ïàò
    function fallbackCopyURL(url) {
      const textArea = document.createElement('textarea');
      textArea.value = url;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      textArea.style.top = '-999999px';
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();

      try {
        document.execCommand('copy');
        console.log('‚úÖ fallback URL Î≥µÏÇ¨ ÏÑ±Í≥µ');
        showCopyNotification('URLÏù¥ Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!');
      } catch (error) {
        console.log('‚ùå fallback URL Î≥µÏÇ¨ Ïã§Ìå®:', error);
        showCopyNotification('URL Î≥µÏÇ¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
      }

      document.body.removeChild(textArea);
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initFloatingMenu);
    } else {
      initFloatingMenu();
    }
  })();

  // ========================================
  // ÌîåÎ°úÌåÖ Î≤ÑÌäº Í∏ÄÎ¶¨Ïπò ÏàòÏ†ï JavaScript (2025-08-17)
  // ========================================
  (function() {
    'use strict';
    
    // ÏúÑÏπò Î≥¥Ï†ï Ìï®Ïàò
    function correctFloatingMenuPosition() {
        const floatingMenu = document.querySelector('.combined-floating-menu');
        if (!floatingMenu) return;
        
        const width = window.innerWidth;
        
        // Î¨∏Ï†ú Íµ¨Í∞Ñ Í∞êÏßÄ: 590px - 720px
        const isProblemZone = width >= 590 && width <= 720;
        
        if (isProblemZone) {
            // Í∞ïÏ†ú ÏúÑÏπò Î≥¥Ï†ï
            floatingMenu.style.position = 'fixed';
            floatingMenu.style.bottom = '30px';
            floatingMenu.style.right = '30px';
            floatingMenu.style.zIndex = '9999';
            floatingMenu.style.visibility = 'visible';
            floatingMenu.style.opacity = '1';
            floatingMenu.style.transform = 'none';
        } else {
            // Ï†ïÏÉÅ Íµ¨Í∞ÑÏóêÏÑúÎäî ÏõêÎûò Ïä§ÌÉÄÏùº Î≥µÏõê
            floatingMenu.style.position = '';
            floatingMenu.style.bottom = '';
            floatingMenu.style.right = '';
            floatingMenu.style.transform = '';
        }
        
        // lg Î∏åÎ†àÏù¥ÌÅ¨Ìè¨Ïù∏Ìä∏ÏóêÏÑú Ïà®ÍπÄ Ï≤òÎ¶¨
        if (width >= 1024) {
            floatingMenu.style.display = 'none';
        } else {
            floatingMenu.style.display = '';
        }
    }
    
    // Î¶¨ÏÇ¨Ïù¥Ï¶à Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨ (ÎîîÎ∞îÏö¥Ïã± Ï†ÅÏö©)
    let resizeTimeout;
    function handleResize() {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(correctFloatingMenuPosition, 16); // ~60fps
    }
    
    // Ï¥àÍ∏∞Ìôî
    function initPositionFix() {
        correctFloatingMenuPosition();
        window.addEventListener('resize', handleResize);
        window.addEventListener('orientationchange', () => {
            setTimeout(correctFloatingMenuPosition, 500);
        });
        
        // Ï£ºÍ∏∞Ï†Å Ï≤¥ÌÅ¨ (ÏïàÏ†Ñ Ïû•Ïπò)
        setInterval(() => {
            const floatingMenu = document.querySelector('.combined-floating-menu');
            if (floatingMenu) {
                const rect = floatingMenu.getBoundingClientRect();
                const width = window.innerWidth;
                const height = window.innerHeight;
                
                // ÌôîÎ©¥ Î∞ñÏúºÎ°ú ÎÇòÍ∞Ñ Í≤ΩÏö∞ Í∞êÏßÄ Î∞è Î≥¥Ï†ï
                if (rect.right > width || rect.bottom > height || rect.left < 0 || rect.top < 0) {
                    correctFloatingMenuPosition();
                }
            }
        }, 1000);
    }
    
    // DOM Ï§ÄÎπÑ Ïãú Ïã§Ìñâ
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPositionFix);
    } else {
        initPositionFix();
    }
  })();
</script>